[
    {
        "pk": 2, 
        "model": "auth.user", 
        "fields": {
            "username": "krecoun", 
            "first_name": "Vojta", 
            "last_name": "Pol\u00e1\u0161ek", 
            "is_active": true, 
            "is_superuser": false, 
            "is_staff": false, 
            "last_login": "2008-11-27 17:27:28", 
            "groups": [], 
            "user_permissions": [], 
            "password": "sha1$fc5f6$1524f9c1624fbaa77265bef7a93149cf88984d48", 
            "email": "", 
            "date_joined": "2008-11-27 17:27:28"
        }
    }, 
    {
        "pk": 3, 
        "model": "auth.user", 
        "fields": {
            "username": "smoke", 
            "first_name": "Luk\u00e1\u0161", 
            "last_name": "Sl\u00e1de\u010dek", 
            "is_active": true, 
            "is_superuser": false, 
            "is_staff": false, 
            "last_login": "2008-12-13 15:00:18", 
            "groups": [], 
            "user_permissions": [], 
            "password": "sha1$fc5f6$1524f9c1624fbaa77265bef7a93149cf88984d48", 
            "email": "", 
            "date_joined": "2008-12-13 15:00:18"
        }
    }, 
    {
        "pk": 4, 
        "model": "auth.user", 
        "fields": {
            "username": "mvinarek", 
            "first_name": "", 
            "last_name": "", 
            "is_active": true, 
            "is_superuser": false, 
            "is_staff": false, 
            "last_login": "2011-08-10 19:08:15", 
            "groups": [], 
            "user_permissions": [], 
            "password": "sha1$fc5f6$1524f9c1624fbaa77265bef7a93149cf88984d48", 
            "email": "", 
            "date_joined": "2011-08-10 19:08:15"
        }
    }, 
    {
        "pk": 1, 
        "model": "auth.user", 
        "fields": {
            "username": "michal", 
            "first_name": "Michal", 
            "last_name": "Valou\u0161ek", 
            "is_active": true, 
            "is_superuser": true, 
            "is_staff": true, 
            "last_login": "2012-10-11 13:49:00", 
            "groups": [], 
            "user_permissions": [], 
            "password": "sha1$fc5f6$1524f9c1624fbaa77265bef7a93149cf88984d48", 
            "email": "", 
            "date_joined": "2008-11-23 14:31:14"
        }
    }, 
    {
        "pk": 2, 
        "model": "sites.site", 
        "fields": {
            "domain": "http://beta.djangoproject.cz", 
            "name": "beta.djangoproject.cz"
        }
    }, 
    {
        "pk": 1, 
        "model": "sites.site", 
        "fields": {
            "domain": "http://www.djangoproject.cz", 
            "name": "djangoproject.cz"
        }
    }, 
    {
        "pk": 2, 
        "model": "translations.translation", 
        "fields": {
            "flat_page": null, 
            "updated": "2010-08-16 22:32:26", 
            "created": "2008-11-23 14:33:42", 
            "source_path": "/home/michal/projects/www/djangoproject.cz/docs/intro/install.txt", 
            "content": ".. _intro-install:\r\n\r\nRychl\u00fd instala\u010dn\u00ed pr\u016fvodce\r\n==========================\r\n\r\nNe\u017e budete moci Django pou\u017e\u00edvat, mus\u00edte jej nainstalovat. K dispozici je :ref:`kompletn\u00ed instala\u010dn\u00ed pr\u016fvodce <topics-install>`,\r\nkter\u00fd popisuje v\u0161echny mo\u017enosti instalace; tento pr\u016fvodce v\u00e1s provede\r\njednoduchou, minim\u00e1ln\u00ed instalac\u00ed, kter\u00e1 v\u00e1m bude sta\u010dit k sezn\u00e1men\u00ed se\r\ns Djangem.\r\n\r\nInstalace Pythonu\r\n-----------------\r\n\r\nProto\u017ee Django je framework napsan\u00fd v Pythonu, pot\u0159ebuje m\u00edt nainstalovan\u00fd Python.\r\nDjango si rozum\u00ed s verzemi 2.4 a\u017e 2.7 (kv\u016fli zp\u011btn\u00e9 nekompatibilit\u011b Pythonu 3.0 \r\nDjango v t\u00e9to verzi nefunguje; dal\u0161\u00ed podrobnosti o podpo\u0159e Pythonu a p\u0159echodu\r\nna trojkovou \u0159adu naleznete na str\u00e1nce s :ref:`\u010dast\u00fdmi dotazy <faq-install>`), ale doporu\u010dujeme v\u00e1m Python 2.5 \u010di\r\nnov\u011bj\u0161\u00ed. S touto verz\u00ed nebudete muset slo\u017eit\u011b nastavovat datab\u00e1zi -- Python\r\nod v. 2.5 obsahuje \"lehkoton\u00e1\u017en\u00ed\" datab\u00e1zi SQLite_.\r\n\r\n.. _sqlite: http://sqlite.org/\r\n\r\nPython z\u00edsk\u00e1te na adrese http://www.python.org. Pokud pou\u017e\u00edv\u00e1te Linux nebo Mac\r\nOS X, pravd\u011bpodobn\u011b jej ji\u017e m\u00e1te nainstalov\u00e1n.\r\n\r\n.. admonition:: Django v Jythonu\r\n\r\n    Pokud pou\u017e\u00edv\u00e1te Jython_ (implementaci Pythonu pro platformu Java),\r\n    budete muset prov\u00e9st n\u011bkolik zvl\u00e1\u0161tn\u00edch krok\u016f. Podrobnosti naleznete\r\n    v dokumentu :ref:`howto-jython`.\r\n\r\n.. _jython: http://jython.org/\r\n\r\n\u017de je Python nainstalovan\u00fd si m\u016f\u017eete ov\u011b\u0159it naps\u00e1n\u00edm ``python`` do va\u0161eho\r\nshellu; m\u011bli by jste vid\u011bt n\u011bco jako::\r\n\r\n    Python 2.5.1 (r251:54863, Jan 17 2008, 19:35:17)\r\n    [GCC 4.0.1 (Apple Inc. build 5465)] on darwin\r\n    Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n    >>>\r\n\r\nNastaven\u00ed datab\u00e1ze\r\n------------------\r\n\r\nPokud jste nainstalovali Python 2.5 nebo nov\u011bj\u0161\u00ed, m\u016f\u017eete tento krok\r\np\u0159esko\u010dit.\r\n\r\nPokud ne, nebo pokud chcete pracovat s \"velk\u00fdmi\" datab\u00e1zemi\r\njako je PostgreSQL, MySQL nebo Oracle, nahl\u00e9dn\u011bte do\r\n:ref:`informac\u00ed o instalaci datab\u00e1z\u00ed <database-installation>`.\r\n\r\nOdstran\u011bn\u00ed star\u00fdch verz\u00ed Djanga\r\n-------------------------------\r\n\r\nPokud m\u00e1te na po\u010d\u00edta\u010di nainstalov\u00e1nu star\u0161\u00ed verzi Djanga, mus\u00edte ji nejprve \r\n:ref:`odebrat <removing-old-versions-of-django>` a teprve pot\u00e9 se pustit do instalace nov\u011bj\u0161\u00ed verze.\r\n\r\nInstalace Djanga\r\n----------------\r\n\r\nExistuj\u00ed t\u0159i jednoduch\u00e9 mo\u017enosti, jak Django nainstalovat:\r\n\r\n    * Instalace Djanga, kter\u00e1 je :ref:`poskytov\u00e1na va\u0161\u00edm opera\u010dn\u00edm\r\n      syst\u00e9mem <misc-distributions>`. Toto je nejrychlej\u0161\u00ed mo\u017enost (za p\u0159edpokladu,\r\n      \u017ee pro v\u00e1\u0161 syst\u00e9m existuje bal\u00ed\u010dek s  Djangem).\r\n    \r\n    * :ref:`Instalace ofici\u00e1ln\u00ed verze <installing-official-release>`. Tato varianta je ide\u00e1ln\u00ed pro u\u017eivatele,\r\n      kte\u0159\u00ed cht\u011bj\u00ed stabiln\u00ed, ov\u011b\u0159enou verzi frameworku a nevad\u00ed jim, \u017ee nebudou m\u00edt dostupn\u00e9\r\n      \u017ehav\u00e9 novinky Djanga.\r\n\r\n    * :ref:`Instalace nejnov\u011bj\u0161\u00ed v\u00fdvojov\u00e9 verze\r\n      <installing-development-version>`. Ide\u00e1ln\u00ed cesta pro v\u00fdvoj\u00e1\u0159e, kte\u0159\u00ed pot\u0159ebuj\u00ed \r\n      nejnov\u011bj\u0161\u00ed funkce frameworku a neboj\u00ed se pou\u017e\u00edvat mladi\u010dk\u00fd k\u00f3d.\r\n\r\n.. warning::\r\n\r\n    Pokud jste se rozhodli pro n\u011bkterou z prvn\u00edch dvou mo\u017enost\u00ed, hl\u00eddejte si\r\n    \u010d\u00e1sti dokumentace ozna\u010den\u00e9 **nov\u00e9 ve v\u00fdvojov\u00e9 verzi** (v anglick\u00fdch \u010d\u00e1stech\r\n    dokumentace ozna\u010deno jako **new in development version**). Tato fr\u00e1ze\r\n    ozna\u010duje funkce, kter\u00e9 jsou obsa\u017eeny pouze ve v\u00fdvojov\u00fdch verz\u00edch Djanga. \r\n    V ofici\u00e1ln\u00ed verzi v\u00e1m s velkou pravd\u011bpodobnost\u00ed nebudou fungovat.\r\n\r\nM\u0148o, a je to!\r\n-------------\r\n\r\nHotovo -- te\u010f se kone\u010dn\u011b m\u016f\u017eete :ref:`p\u0159esunout k uk\u00e1zkov\u00e9 aplikaci <intro-tutorial01>`.", 
            "revision": 13423
        }
    }, 
    {
        "pk": 1, 
        "model": "translations.translation", 
        "fields": {
            "flat_page": null, 
            "updated": "2009-07-13 16:03:02", 
            "created": "2008-11-23 14:33:07", 
            "source_path": "/home/michal/projects/www/djangoproject.cz/docs/intro/overview.txt", 
            "content": ".. _intro-overview:\r\n\r\n====================\r\nMrkn\u011bme se na Django\r\n====================\r\n\r\nDjango bylo vyvinuto v novin\u00e1\u0159sk\u00e9m prost\u0159ed\u00ed, pro kter\u00e9 bylo d\u016fle\u017eit\u00e9, \r\naby \u00fakony spojen\u00e9 s webem byly prov\u00e1d\u011bny rychle a jednodu\u0161e. Na t\u00e9to str\u00e1nce\r\nv\u00e1m bude demonstrov\u00e1no nasazen\u00ed Djanga p\u0159i realizaci jednoduch\u00e9, datab\u00e1z\u00ed\r\n\u0159\u00edzen\u00e9 webov\u00e9 aplikace.\r\n\r\nC\u00edlem tohoto dokumentu je poskytnout \u00fam\u011brn\u00e9 mno\u017estv\u00ed informac\u00ed, s pomoc\u00ed\r\nkter\u00fdch dok\u00e1\u017eete pochopit, jak Django funguje. A\u017e budete p\u0159ipraveni za\u010d\u00edt\r\nsv\u016fj vlastn\u00ed projekt, m\u016f\u017eete :ref:`p\u0159ej\u00edt k demonstra\u010dn\u00ed aplikaci <intro-tutorial01>`,\r\nnebo se :ref:`za\u010d\u00edst do detailn\u011bj\u0161\u00ed dokumentace <topics-index>`.\r\n\r\nNavrhn\u011bte sv\u016fj model\r\n====================\r\n\r\nI kdy\u017e va\u0161e aplikace m\u016f\u017ee pracovat i bez pou\u017eit\u00ed datab\u00e1ze, Django p\u0159ich\u00e1z\u00ed se sv\u00fdm\r\nobjektov\u011b-rela\u010dn\u00edm mapova\u010dem, kter\u00fd je zprost\u0159edkovatelem mezi datov\u00fdm \r\nmodelem (definovan\u00fdm jako t\u0159\u00edda Pythonu) a rela\u010dn\u00ed datab\u00e1z\u00ed.\r\n\r\n:ref:`Syntaxe datov\u00e9ho modelu <topics-db-models>` nab\u00edz\u00ed spoustu\r\nzp\u016fsob\u016f, jak modely reprezentovat. Zde je rychl\u00fd p\u0159\u00edklad::\r\n\r\n    class Reporter(models.Model):\r\n        full_name = models.CharField(max_length=70)\r\n\r\n        def __unicode__(self):\r\n            return self.full_name\r\n\r\n    class Article(models.Model):\r\n        pub_date = models.DateTimeField()\r\n        headline = models.CharField(max_length=200)\r\n        content = models.TextField()\r\n        reporter = models.ForeignKey(Reporter)\r\n\r\n        def __unicode__(self):\r\n            return self.headline\r\n\r\nNainstalujte jej\r\n================\r\n\r\nSpus\u0165te n\u00e1sleduj\u00edc\u00ed p\u0159\u00edkaz. Django s jeho pomoc\u00ed automaticky vytvo\u0159\u00ed datab\u00e1zov\u00e9 tabulky:\r\n\r\n.. code-block:: bash\r\n\r\n    manage.py syncdb\r\n\r\nP\u0159\u00edkaz :djadmin:`syncdb` projde v\u0161echny dostupn\u00e9 modely a\r\nvytvo\u0159\u00ed pro n\u011b tabulky v datab\u00e1zi (pokud je\u0161t\u011b neexistuj\u00ed).\r\n\r\nU\u017e\u00edvejte si API rozhran\u00ed\r\n========================\r\n\r\nTak. Te\u010f, kdy\u017e m\u00e1me definovan\u00fd model, a vytvo\u0159eny v\u0161echny d\u016fle\u017eit\u00e9\r\ntabulky v datab\u00e1zi, m\u016f\u017eeme se pustit do objevov\u00e1n\u00ed rozs\u00e1hl\u00e9ho :ref:`Python API\r\n<topics-db-queries>` pro p\u0159\u00edstup k ulo\u017een\u00fdm dat\u016fm. API je vytv\u00e1\u0159eno za\r\nchodu, nen\u00ed t\u0159eba pro n\u011bj generovat \u017e\u00e1dn\u00fd k\u00f3d::\r\n\r\n    >>> from mysite.models import Reporter, Article\r\n\r\n    # V systemu jeste nejsou zadni novinari.\r\n    >>> Reporter.objects.all()\r\n    []\r\n\r\n    # Vytvorime prvniho novinare.\r\n    >>> r = Reporter(full_name='John Smith')\r\n\r\n    # Ulozime objekt do databaze. P\u0159\u00edkaz save() musime volat explicitne.\r\n    >>> r.save()\r\n\r\n    # Ted ma ID.\r\n    >>> r.id\r\n    1\r\n\r\n    # A novinar uz je v databazi.\r\n    >>> Reporter.objects.all()\r\n    [<Reporter: John Smith>]\r\n\r\n    # Pole modelu jsou reprezentovana jako atributy Python objektu.\r\n    >>> r.full_name\r\n    'John Smith'\r\n\r\n    # Django nabizi rozsahle API pro dotazovani databaze.\r\n    >>> Reporter.objects.get(id=1)\r\n    <Reporter: John Smith>\r\n    >>> Reporter.objects.get(full_name__startswith='John')\r\n    <Reporter: John Smith>\r\n    >>> Reporter.objects.get(full_name__contains='mith')\r\n    <Reporter: John Smith>\r\n    >>> Reporter.objects.get(id=2)\r\n    Traceback (most recent call last):\r\n        ...\r\n    DoesNotExist: Reporter matching query does not exist.\r\n\r\n    # Vytvorime clanek.\r\n    >>> from datetime import datetime\r\n    >>> a = Article(pub_date=datetime.now(), headline='Django is cool',\r\n    ...     content='Yeah.', reporter=r)\r\n    >>> a.save()\r\n\r\n    # Clanek je v databazi.\r\n    >>> Article.objects.all()\r\n    [<Article: Django is cool>]\r\n\r\n    # Objekty clanku maji pristup pres API k souvisejicim novinarum.\r\n    >>> r = a.reporter\r\n    >>> r.full_name\r\n    'John Smith'\r\n\r\n    # A naopak: objekty novinaru maji pres API pristup k clankum.\r\n    >>> r.article_set.all()\r\n    [<Article: Django is cool>]\r\n\r\n    # API sleduje relace mezi objekty, nezbytne spojovani tabulek (JOINy)\r\n    # provadi efektivne za vas.\r\n    # Tento prikaz najde vsechny clanky novinare, jehoz jmeno zacina na \"John\".\r\n    >>> Article.objects.filter(reporter__full_name__startswith=\"John\")\r\n    [<Article: Django is cool>]\r\n\r\n    # Upravime objekt zmenou jeho atributu a pak zavolame save().\r\n    >>> r.full_name = 'Billy Goat'\r\n    >>> r.save()\r\n\r\n    # Objekt smazeme pouzitim delete().\r\n    >>> r.delete()\r\n\r\nDynamick\u00e9 administra\u010dn\u00ed rozhran\u00ed: nen\u00ed to jenom le\u0161en\u00ed (scaffolding) -- je to cel\u00fd d\u016fm\r\n======================================================================================\r\n\r\nJakmile m\u00e1te sv\u00e9 modely navr\u017eeny, Django pro n\u011b m\u016f\u017ee automaticky vytvo\u0159it profesion\u00e1ln\u00ed\r\n:ref:`administra\u010dn\u00ed rozhran\u00ed <ref-contrib-admin>` p\u0159ipraven\u00e9 k nasazen\u00ed na produk\u010dn\u00ed\r\nserver. Na webov\u00fdch str\u00e1nk\u00e1ch, kter\u00e9 jsou p\u0159\u00edstupn\u00e9 pouze autorizovan\u00fdm u\u017eivatel\u016fm,\r\nbudete schopni p\u0159id\u00e1vat, upravovat a mazat definovan\u00e9 objekty. Nasazen\u00ed administrace je \r\nvelmi jednoduch\u00e9::\r\n\r\n    # V souboru models.py...\r\n\r\n    from django.db import models\r\n\r\n    class Article(models.Model):\r\n        pub_date = models.DateTimeField()\r\n        headline = models.CharField(max_length=200)\r\n        content = models.TextField()\r\n        reporter = models.ForeignKey(Reporter)\r\n\r\n\r\n    # V souboru admin.py ve stejnem adresari...\r\n\r\n    import models\r\n    from django.contrib import admin\r\n\r\n    admin.site.register(models.Article)\r\n\r\nFilozofie administra\u010dn\u00edho rozhran\u00ed spo\u010d\u00edv\u00e1 v tom, \u017ee web je upravov\u00e1n zam\u011bstnanci, klientem,\r\nnebo mo\u017en\u00e1 p\u0159\u00edmo v\u00e1mi -- a vy se nechcete zdr\u017eovat s vytv\u00e1\u0159en\u00edm rozhran\u00ed pro spr\u00e1vu jeho obsahu.\r\n\r\nJeden z typick\u00fdch p\u0159\u00edstup\u016f:\r\n\r\n    * co nejd\u0159\u00edve vytvo\u0159it modely a rozjet administra\u010dn\u00ed rozhran\u00ed\r\n\r\n    * za\u010d\u00edt web plnit daty (ze strany zam\u011bstnanc\u016f \u010di klient\u016f)\r\n\r\nA zat\u00edm co se nal\u00e9vaj\u00ed dal\u0161\u00ed a dal\u0161\u00ed data, vy se za\u010d\u00edn\u00e1te v\u011bnovat zp\u016fsobu, jak\u00fdm\r\nbudete data nav\u0161t\u011bvn\u00edk\u016fm webu prezentovat.\r\n\r\nVytvo\u0159te URL adresy\r\n===================\r\n\r\n\u010cist\u00e9 a elegantn\u00ed URL adresy jsou d\u016fle\u017eit\u00fd detail kvalitn\u00ed webov\u00e9\r\naplikace. Django takov\u00fdto n\u00e1vrh adres podporuje. S ohavnostmi typu ``.php`` nebo ``.asp``\r\nse nadobro rozlu\u010dte.\r\n\r\nURL adresy se definuj\u00ed v Python modulu :ref:`URLconf\r\n<topics-http-urls>`. V n\u011bm se provede namapov\u00e1n\u00ed URL \u0161ablon na \r\nPython callback funkce. URLconf tak\u00e9 odd\u011bluje adresy a k\u00f3d va\u0161\u00ed aplikace.\r\n\r\nTakhle n\u011bjak by mohl vypadat URLconf pro p\u0159\u00edklad s ``Reporter``/``Article`` \r\nuveden\u00fd v\u00fd\u0161e::\r\n\r\n    from django.conf.urls.defaults import *\r\n\r\n    urlpatterns = patterns('',\r\n        (r'^articles/(\\d{4})/$', 'mysite.views.year_archive'),\r\n        (r'^articles/(\\d{4})/(\\d{2})/$', 'mysite.views.month_archive'),\r\n        (r'^articles/(\\d{4})/(\\d{2})/(\\d+)/$', 'mysite.views.article_detail'),\r\n    )\r\n\r\nTento k\u00f3d mapuje URL adresy ve form\u011b regul\u00e1rn\u00edch v\u00fdraz\u016f na Python\r\ncallback funkce (pohledy, z anglick\u00e9ho \"views\"). Regul\u00e1rn\u00ed v\u00fdrazy pou\u017e\u00edvaj\u00ed z\u00e1vorky pro\r\n\"zachycen\u00ed\" hodnot z URL adresy. Kdy\u017e si u\u017eivatel vy\u017e\u00e1d\u00e1 str\u00e1nku, Django\r\nprojde ka\u017ed\u00fd regul\u00e1rn\u00ed v\u00fdraz v zadan\u00e9m po\u0159ad\u00ed, a zastav\u00ed se na prvn\u00edm, kter\u00fd se shoduje\r\ns po\u017eadovanou adresou. (Pokud se \u017e\u00e1dn\u00e1 neshoduje, Django vol\u00e1 speci\u00e1ln\u00ed\r\npohled 404.) Cel\u00fd tento proces je velmi rychl\u00fd, proto\u017ee regul\u00e1rn\u00ed v\u00fdrazy\r\njsou zkompilov\u00e1ny p\u0159i prvn\u00edm spust\u011bn\u00ed aplikace.\r\n\r\nKdy\u017e se jeden z regul\u00e1rn\u00edch v\u00fdraz\u016f shoduje s URL, Django naimportuje a spust\u00ed zadan\u00fd pohled (view), co\u017e\r\nnen\u00ed nic jin\u00e9ho, ne\u017e jednoduch\u00e1 Python funkce. Ka\u017ed\u00e9mu pohledu je p\u0159ed\u00e1n\r\nrequest objekt -- obsahuj\u00edc\u00ed metadata po\u017eadavku -- a hodnoty\r\nzachycen\u00e9 ve v\u00fdrazu.\r\n\r\nNap\u0159. pokud si u\u017eivatel vy\u017e\u00e1d\u00e1 URL \"/articles/2005/05/39323/\", Django \r\nzavol\u00e1 funkci ``mysite.views.article_detail(request, '2005', '05',\r\n'39323')``.\r\n\r\nNapi\u0161te sv\u00e9 pohledy (views)\r\n===========================\r\n\r\nKa\u017ed\u00fd z pohled\u016f je zodpov\u011bdn\u00fd za proveden\u00ed jedn\u00e9 ze dvou v\u011bc\u00ed: bu\u010fto vr\u00e1t\u00ed objekt\r\n:class:`~django.http.HttpResponse`, kter\u00fd obsahuje samotn\u00fd obsah\r\nvy\u017e\u00e1dan\u00e9 str\u00e1nky, nebo vyvol\u00e1 v\u00fdjimku jako je nap\u0159.\r\n:class:`~django.http.Http404`. Zbytek je na v\u00e1s.\r\n\r\nObecn\u00fd postup je takov\u00fd, \u017ee pohled vyt\u00e1hne data podle dodan\u00fdch parametr\u016f, na\u010dte\r\n\u0161ablonu a napln\u00ed ji daty. Uk\u00e1zkov\u00fd pohled ``year_archive`` z p\u0159\u00edkladu v\u00fd\u0161e::\r\n\r\n    def year_archive(request, year):\r\n        a_list = Article.objects.filter(pub_date__year=year)\r\n        return render_to_response('news/year_archive.html', {'year': year, 'article_list': a_list})\r\n\r\nTento p\u0159\u00edklad pou\u017e\u00edv\u00e1 :ref:`\u0161ablonovac\u00ed syst\u00e9m <topics-templates>` Djanga,\r\nkter\u00fd obsahuje dostatek siln\u00fdch vlastnost\u00ed, ale p\u0159itom se sna\u017e\u00ed z\u016fstat\r\nsrozumiteln\u00fd i pro neprogram\u00e1tory.\r\n\r\nVytvo\u0159te \u0161ablony\r\n================\r\n\r\nK\u00f3d uveden\u00fd v\u00fd\u0161e na\u010dte \u0161ablonu ``news/year_archive.html``.\r\n\r\nDjango se pokus\u00ed \u0161ablonu nal\u00e9zt v n\u011bkter\u00e9m ze zadan\u00fdch adres\u00e1\u0159\u016f (definovan\u00fdch v souboru settings.py).\r\nPokud nen\u00ed nalezena v prvn\u00edm adres\u00e1\u0159i, hled\u00e1 se ve druh\u00e9m, atd. T\u00edmto zp\u016fsobem\r\nje mo\u017en\u00e9 efektivn\u011b sn\u00ed\u017eit nadbyte\u010dnost mezi \u0161ablonami.\r\n\r\n\u0158ekn\u011bme, \u017ee byla nalezena \u0161ablona ``news/article_detail.html``. Takhle\r\nn\u011bjak by mohla vypadat:\r\n\r\n.. code-block:: html+django\r\n\r\n    {% extends \"base.html\" %}\r\n\r\n    {% block title %}Clanky za rok {{ year }}{% endblock %}\r\n\r\n    {% block content %}\r\n    <h1>Clanky za rok {{ year }}</h1>\r\n\r\n    {% for article in article_list %}\r\n    <p>{{ article.headline }}</p>\r\n    <p>Autor {{ article.reporter.full_name }}</p>\r\n    <p>Publikovano dne {{ article.pub_date|date:\"F j, Y\" }}</p>\r\n    {% endfor %}\r\n    {% endblock %}\r\n\r\nProm\u011bnn\u00e9 jsou uzav\u0159eny do dvojit\u00fdch slo\u017een\u00fdch z\u00e1vorek. V\u00fdraz ``{{\r\narticle.headline }}`` znamen\u00e1: \"Vypi\u0161 hodnotu atributu headline objektu article\".\r\nTe\u010dky ve v\u00fdrazu ale neslou\u017e\u00ed pouze pro specifikov\u00e1n\u00ed atribut\u016f:\r\ns jejich pomoc\u00ed m\u016f\u017eeme podle kl\u00ed\u010de vytahovat hodnoty ze slovn\u00edku, adresovat\r\nprvky seznamu nebo volat funkce.\r\n\r\nPozn\u00e1mka: ``{{ article.pub_date|date:\"F j, Y\" }}`` pou\u017e\u00edv\u00e1 Unixovskou\r\n\"rouru\" (znak \"|\"). V Djangu tento v\u00fdraz ozna\u010dujeme jako \"filtr\".\r\nV na\u0161\u00ed uk\u00e1zce filtr date form\u00e1tuje Python objekt datetime do zadan\u00e9ho tvaru\r\n(je to podobn\u00e9 jako v PHP funkci date; ano, i v PHP je plno dobr\u00fdch my\u0161lenek).\r\n\r\nM\u016f\u017eete d\u00e1t za sebe tolik filtr\u016f, kolik chcete. M\u016f\u017eete ps\u00e1t vlastn\u00ed\r\nfiltry. M\u016f\u017eete napsat vlastn\u00ed \u0161ablonov\u00e9 tagy, kter\u00e9 spust\u00ed libovoln\u00fd\r\nPython k\u00f3d.\r\n\r\nDjango vyu\u017e\u00edv\u00e1 koncept \"\u0161ablonov\u00e9 d\u011bdi\u010dnosti\": k tomuto \u00fa\u010delu existuje tag ``{% extends\r\n\"base.html\" %}``. Jeho funkce by se dala popsat takto: \"Nejprve na\u010dti \u0161ablonu s n\u00e1zvem 'base',\r\nkter\u00e1 m\u00e1 nadefinovanou skupinu blok\u016f, a tyto bloky napl\u0148 n\u00e1sleduj\u00edc\u00edmi\r\nbloky.\" T\u00edmto zp\u016fsobem dramaticky sn\u00ed\u017e\u00edte zmatek v \u0161ablon\u00e1ch: ka\u017ed\u00e1\r\n\u0161ablona definuje pouze to, co je pro ni specifick\u00e9.\r\n\r\nP\u0159\u00edklad, jak by \"base.html\" mohl vypadat:\r\n\r\n.. code-block:: html+django\r\n\r\n    <html>\r\n    <head>\r\n        <title>{% block title %}{% endblock %}</title>\r\n    </head>\r\n    <body>\r\n        <img src=\"sitelogo.gif\" alt=\"Logo\" />\r\n        {% block content %}{% endblock %}\r\n    </body>\r\n    </html>\r\n\r\nZjednodu\u0161en\u011b \u0159e\u010deno, tato \u0161ablona vytv\u00e1\u0159\u00ed vzhled str\u00e1nky, \r\na nab\u00edz\u00ed \"d\u00edry\" pro napln\u011bn\u00ed pod\u0159azenou \u0161ablonu. Pokud budete cht\u00edt\r\nzm\u011bnit design cel\u00e9ho webu, sta\u010d\u00ed upravit jedin\u00fd soubor -- z\u00e1kladn\u00ed\r\n\u0161ablonu.\r\n\r\nTento koncept umo\u017e\u0148uje vytv\u00e1\u0159et r\u016fzn\u00e9 verze webu, za pou\u017eit\u00ed stejn\u00fdch\r\npod\u0159azen\u00fdch \u0161ablon. Tv\u016frci Djanga tuto funkci vyu\u017eili p\u0159i vytvo\u0159en\u00ed\r\nzcela odli\u0161n\u00e9 varianty webu pro mobiln\u00ed telefony a p\u0159i tom\r\nop\u011bt sta\u010dilo zm\u011bnit pouze z\u00e1kladn\u00ed \u0161ablonu.\r\n\r\nPozn\u00e1mka: Pokud up\u0159ednost\u0148ujete jin\u00fd \u0161ablonovac\u00ed syst\u00e9m, nemus\u00edte \u0161ablony Djanga pou\u017e\u00edvat.\r\nZe stejn\u00e9ho d\u016fvodu nemus\u00edte pou\u017e\u00edvat ani poskytovan\u00e9 datab\u00e1zov\u00e9 API.\r\nM\u016f\u017eete vyu\u017e\u00edt jinou datab\u00e1zovou vrstvu, m\u016f\u017eete \u010d\u00edst XML\r\nsoubory, m\u016f\u017eete na\u010d\u00edtat soubory z disku nebo cokoli jin\u00e9ho. Ka\u017ed\u00e1 \u010d\u00e1st\r\nDjanga -- modely, \u0161ablony, pohledy -- je od ostatn\u00edch odd\u011blena.\r\n\r\nTohle je jen za\u010d\u00e1tek\r\n====================\r\n\r\nPr\u00e1v\u011b jste se sezn\u00e1mili se z\u00e1kladn\u00edmi vlastnostmi frameworku. \r\nDjango v\u00e1m ale nab\u00edz\u00ed mnohem v\u00edc, nap\u0159.:\r\n\r\n    * :ref:`Cache framework <topics-cache>` integrovan\u00fd s \r\n      memcached nebo jin\u00fdmi backendy.\r\n\r\n    * :ref:`Syndika\u010dn\u00ed framework <ref-contrib-syndication>`, kter\u00fd pro\r\n      vytvo\u0159en\u00ed RSS nebo Atom kan\u00e1l\u016f pot\u0159ebuje nadefinovat pouze jednu malou\r\n      Python t\u0159\u00eddu.\r\n\r\n    * Kopu dal\u0161\u00edch funkc\u00ed do automaticky generovan\u00e9ho administra\u010dn\u00edho rozhran\u00ed -- tento\r\n      p\u0159ehled uk\u00e1zal pouze to nejd\u016fle\u017eit\u011bj\u0161\u00ed.\r\n\r\nCo te\u010f? `St\u00e1hn\u011bte si Django`_, pod\u00edvejte se na :ref:`uk\u00e1zkovou aplikaci\r\n<intro-tutorial01>` a p\u0159ipojte se do `komunity`_. D\u011bkujeme za v\u00e1\u0161 z\u00e1jem!\r\n\r\n.. _St\u00e1hn\u011bte si Django: http://www.djangoproject.cz/download/\r\n.. _komunity: /dokumentace/", 
            "revision": 11044
        }
    }, 
    {
        "pk": 3, 
        "model": "translations.translation", 
        "fields": {
            "flat_page": null, 
            "updated": "2010-08-16 22:32:58", 
            "created": "2008-11-23 14:34:24", 
            "source_path": "/home/michal/projects/www/djangoproject.cz/docs/intro/tutorial01.txt", 
            "content": ".. _intro-tutorial01:\r\n\r\n===============================\r\nPrvn\u00ed aplikace v Djangu, \u010d\u00e1st 1\r\n===============================\r\n\r\nV tomto n\u00e1vodu si uk\u00e1\u017eeme, jak vytvo\u0159it jednoduchou anketn\u00ed aplikaci.\r\n\r\nBude se skl\u00e1dat ze dvou \u010d\u00e1st\u00ed:\r\n\r\n    * Ve\u0159ejn\u00e1 str\u00e1nka, na kter\u00e9 bude mo\u017en\u00e9 prohl\u00ed\u017eet anketn\u00ed ot\u00e1zky a\r\n      hlasovat v nich.\r\n    * Administr\u00e1torsk\u00e1 \u010d\u00e1st, na kter\u00e9 bude mo\u017en\u00e9 p\u0159id\u00e1vat, upravovat \r\n      a mazat ankety.\r\n\r\nP\u0159edpokl\u00e1dejme, \u017ee m\u00e1te Django ji\u017e :ref:`nainstalovan\u00e9 <intro-install>`.\r\nM\u016f\u017eete to zjistit spu\u0161t\u011bn\u00edm interaktivn\u00edho interpretera Pythonu a\r\nnaps\u00e1n\u00edm ``import django``. Pokud p\u0159\u00edkaz prob\u011bhne bez chyb, Django\r\nje nainstalov\u00e1no.\r\n\r\n.. admonition:: Kde hledat pomoc:\r\n\r\n    Pokud naraz\u00edte na n\u011bjak\u00e9 pot\u00ed\u017ee, po\u0161lete dotaz do:\r\n\r\n    * ofici\u00e1ln\u00edho mailing listu `Django users`__ (v angli\u010dtin\u011b)\r\n    * `\u010desk\u00e9ho mailing listu`__\r\n    * nebo zkuste IRC `#django na serveru irc.freenode.net`__ \r\n      (v angli\u010dtin\u011b)\r\n\r\n__ http://groups.google.com/group/django-users\r\n__ http://groups.google.com/group/django-cs\r\n__ irc://irc.freenode.net/django\r\n\r\nVytv\u00e1\u0159en\u00ed projektu\r\n==================\r\n\r\nPokud s Djangem za\u010d\u00edn\u00e1te, budete se muset postarat o n\u011bkter\u00e1 po\u010d\u00e1te\u010dn\u00ed\r\nnastaven\u00ed. P\u0159esn\u011bji, nech\u00e1te si vygenerovat k\u00f3d, kter\u00fd zalo\u017e\u00ed nov\u00fd\r\n:term:`project` (projekt).\r\n\r\nNa p\u0159\u00edkazov\u00e9 \u0159\u00e1dce se p\u0159esu\u0148te do adres\u00e1\u0159e (``cd``), kde chcete m\u00edt\r\nulo\u017een\u00fd sv\u016fj zdrojov\u00fd k\u00f3d a potom spus\u0165te p\u0159\u00edkaz ``django-admin.py\r\nstartproject mysite``. T\u00edmto zp\u016fsobem se v aktu\u00e1ln\u00edm adres\u00e1\u0159i vytvo\u0159\u00ed\r\nadres\u00e1\u0159 ``mysite``.\r\n\r\n.. admonition:: Pr\u00e1va v syst\u00e9mu Mac OS X\r\n   \r\n   Pokud pou\u017e\u00edv\u00e1te Mac OS X, m\u016f\u017eete se setkat p\u0159i spu\u0161t\u011bn\u00ed p\u0159\u00edkazu\r\n   ``django-admin.py startproject`` se zpr\u00e1vou \"permission denied\"\r\n   (\"p\u0159\u00edstup odep\u0159en\"). To proto, \u017ee v syst\u00e9mech zalo\u017een\u00fdch na Unixu\r\n   (tj. i na Mac OS X), mus\u00ed b\u00fdt soubor ozna\u010den jako \"spustiteln\u00fd\", aby\r\n   jej bylo mo\u017eno spustit jako program. Otev\u0159ete si Terminal.app, pomoc\u00ed\r\n   p\u0159\u00edkazu ``cd``  se dosta\u0148te do adres\u00e1\u0159e, kde je nainstalov\u00e1n\r\n   :ref:`django-admin.py <ref-django-admin>` a spus\u0165te p\u0159\u00edkaz ``chmod +x\r\n   django-admin.py``.\r\n\r\n.. admonition:: Pozn\u00e1mka\r\n\r\n    Projekt\u016fm nesm\u00edte d\u00e1vat stejn\u00e9 n\u00e1zvy, jak\u00e9 maj\u00ed vestav\u011bn\u00e9 (built-in)\r\n    komponenty Pythonu nebo Djanga. Nap\u0159\u00edklad nem\u016f\u017eete pou\u017e\u00edt jm\u00e9no\r\n    ``django`` (kter\u00e9 by vytv\u00e1\u0159elo konflikt s Djangem samotn\u00fdm), nebo\r\n    ``test`` (kter\u00e9 by vytv\u00e1\u0159elo konflikt s vestav\u011bnou Python knihovnou).\r\n\r\nPokud jste Django instalovali pomoc\u00ed p\u0159\u00edkazu ``python setup.py``, m\u011bl by\r\nse :ref:`django-admin.py <ref-django-admin>` nach\u00e1zet na va\u0161\u00ed syst\u00e9mov\u00e9\r\ncest\u011b. Jestli\u017ee tam nen\u00ed, najdete jej v ``site-packages/django/bin``,\r\np\u0159i\u010dem\u017e ``site-packages`` je adres\u00e1\u0159 ve va\u0161\u00ed instalaci Pythonu.\r\nV p\u0159\u00edpad\u011b, \u017ee v\u00e1\u0161 syst\u00e9m p\u0159\u00edkaz :ref:`django-admin.py <ref-django-admin>`\r\nnenajde, vytvo\u0159te na n\u011bj symbolick\u00fd odkaz z n\u011bjak\u00e9ho m\u00edsta, kter\u00e9 le\u017e\u00ed\r\nna syst\u00e9mov\u00e9 cest\u011b, nap\u0159 :file:`/usr/local/bin`, apod.\r\n\r\n.. admonition:: Kde by m\u011bl b\u00fdt samotn\u00fd k\u00f3d?\r\n\r\n    Pokud pou\u017e\u00edv\u00e1te PHP, asi jste zvykl\u00ed ukl\u00e1dat k\u00f3d do ko\u0159enov\u00e9ho\r\n    adres\u00e1\u0159e web serveru (jako t\u0159eba ``/var/www``). U Djanga se to\r\n    ned\u011bl\u00e1. Ukl\u00e1dat jak\u00fdkoli k\u00f3d psan\u00fd v Pythonu do ko\u0159enov\u00e9ho adres\u00e1\u0159e\r\n    web serveru nen\u00ed dobr\u00fd n\u00e1pad, proto\u017ee by pak kdokoliv mohl\r\n    \u010d\u00edst v\u00e1\u0161 zdrojov\u00fd k\u00f3d p\u0159es internet (a to by jste necht\u011bli, \u017ee ne?).\r\n    \r\n    Ukl\u00e1dejte v\u00e1\u0161 k\u00f3d n\u011bkam **mimo** ko\u0159enov\u00fd adres\u00e1\u0159, t\u0159eba do adres\u00e1\u0159e\r\n    :file:``/home/mycode``.\r\n\r\nPod\u00edvejme se, co p\u0159\u00edkaz :djadmin:`startproject` vytvo\u0159il::\r\n\r\n    mysite/\r\n        __init__.py\r\n        manage.py\r\n        settings.py\r\n        urls.py\r\n\r\nPopi\u0161me si v\u00fdznam jednotliv\u00fdch soubor\u016f:\r\n\r\n    * :file:`__init__.py`: Pr\u00e1zdn\u00fd soubor, kter\u00fd \u0159\u00edk\u00e1 Pythonu, \u017ee tento\r\n      adres\u00e1\u0159 m\u00e1 b\u00fdt pova\u017eov\u00e1n za Python bal\u00ed\u010dek. (Pokud s Pythonem\r\n      za\u010d\u00edn\u00e1te, p\u0159e\u010dt\u011bte si `v\u00edce o bal\u00ed\u010dc\u00edch`_ v ofici\u00e1ln\u00ed dokumentaci).\r\n      \r\n    * :file:`manage.py`: Utilita pro p\u0159\u00edkazov\u00fd \u0159\u00e1dek, kter\u00e1 v\u00e1m umo\u017e\u0148uje\r\n      projekt spravovat. Podrobnosti naleznete v\r\n      :ref:`ref-django-admin`.\r\n      \r\n    * :file:`settings.py`: Nastaven\u00ed/konfigurace pro v\u00e1\u0161 Django projekt.\r\n      Na str\u00e1nce :ref:`topics-settings` se dozv\u00edte v\u0161e podstatn\u00e9.\r\n    \r\n    * :file:`urls.py`: Deklarace URL adres pro v\u00e1\u0161 Django projekt;\r\n      \"rejst\u0159\u00edk\" va\u0161eho webu. Podrobnosti viz :ref:`topics-http-urls`.\r\n\r\n.. _v\u00edce o bal\u00ed\u010dc\u00edch: http://docs.python.org/tutorial/modules.html#packages\r\n\r\n\r\nV\u00fdvojov\u00fd server\r\n---------------\r\n\r\nOv\u011b\u0159me si, jestli v\u00fd\u0161e uveden\u00fd p\u0159\u00edkaz spr\u00e1vn\u011b zafungoval. P\u0159esu\u0148te se do\r\nadres\u00e1\u0159e :file:`mysite` (pokud tam je\u0161t\u011b nejste) a spus\u0165te p\u0159\u00edkaz ``python\r\nmanage.py runserver``. Na p\u0159\u00edkazov\u00e9 \u0159\u00e1dce uvid\u00edte n\u00e1sleduj\u00edc\u00ed v\u00fdstup::\r\n\r\n    Validating models...\r\n    0 errors found.\r\n\r\n    Django version 1.0, using settings 'mysite.settings'\r\n    Development server is running at http://127.0.0.1:8000/\r\n    Quit the server with CONTROL-C.\r\n\r\nPr\u00e1v\u011b jste spustili v\u00fdvojov\u00fd server Djanga, odleh\u010den\u00fd web server,\r\nnapsan\u00fd \u010dist\u011b v Pythonu. Zahrnuli jsme jej v Djangu, tak\u017ee d\u00edky n\u011bmu\r\nm\u016f\u017eete okam\u017eit\u011b vyv\u00edjet a nemus\u00edte se starat o konfiguraci produk\u010dn\u00edho\r\nserveru -- jako je nap\u0159. Apache -- dokud nebudete p\u0159ipraveni va\u0161e\r\nstr\u00e1nky zve\u0159ejnit.\r\n\r\nZde je dobr\u00e9 poznamenat: V\u00fdvojov\u00fd server **nepou\u017e\u00edvejte** v ostr\u00e9m\r\nprovozu -- tento server je ur\u010den pouze pro v\u00fdvoj (vyr\u00e1b\u00edme frameworky,\r\nne web servery).\r\n\r\nTe\u010f, kdy\u017e n\u00e1m server b\u011b\u017e\u00ed, nav\u0161tivte ve va\u0161em prohl\u00ed\u017ee\u010di adresu\r\nhttp://127.0.0.1:8000/. Uvid\u00edte str\u00e1nku \"Welcome to Django\" ve velmi\r\np\u0159\u00edtuln\u00e9, sv\u011btle modr\u00e9 barv\u011b. Fach\u00e1 to!\r\n\r\n.. admonition:: Zm\u011bna portu\r\n\r\n    Standardn\u011b p\u0159\u00edkaz :djadmin:`runserver` spou\u0161t\u00ed v\u00fdvojov\u00fd server na\r\n    intern\u00ed IP a portu 8000.\r\n\r\n    Pokud chcete zm\u011bnit port serveru, napi\u0161te jej jako\r\n    parametr p\u0159\u00edkazu. Nap\u0159. tento p\u0159\u00edkaz spust\u00ed server na portu 8080:\r\n    \r\n    .. code-block:: bash\r\n\r\n        python manage.py runserver 8080\r\n\r\n    Pokud chcete zm\u011bnit IP adresu, na kter\u00e9 bude server pov\u011b\u0161en\u00fd, zadejte\r\n    ji spole\u010dn\u011b s \u010d\u00edslem portu. Jednoduch\u00fdm zp\u016fsobem je mo\u017en\u00e9 za\u0159\u00eddit,\r\n    aby server poslouchal na v\u0161ech ve\u0159ejn\u00fdch IP adres\u00e1ch (m\u016f\u017ee se hodit\r\n    v p\u0159\u00edpadech, kdy chcete sv\u00e9 d\u00edlo uk\u00e1zat na ostatn\u00edch po\u010d\u00edta\u010d\u00edch v s\u00edti):\r\n\r\n    .. code-block:: bash \r\n\r\n        python manage.py runserver 0.0.0.0:8080\r\n\r\n    Kompletn\u00ed dokumentaci k v\u00fdvojov\u00e9mu serveru m\u016f\u017eete naj\u00edt v\r\n    referenci k p\u0159\u00edkazu :djadmin:`runserver`.\r\n\r\nNastaven\u00ed datab\u00e1ze\r\n------------------\r\n\r\nJe na \u010dase upravit soubor `settings.py`. Soubor `settings.py` je\r\noby\u010dejn\u00fd Python modul s prom\u011bnn\u00fdmi, kter\u00fdmi se konfiguruje Django.\r\nZm\u011bnte n\u00e1sleduj\u00edc\u00ed kl\u00ed\u010de u z\u00e1znamu :setting:`DATABASES` ``'default'``\r\ntak, aby vyhovovaly parametr\u016fm va\u0161\u00ed datab\u00e1ze:\r\n\r\n    * :setting:`ENGINE` -- Vyberte\r\n      ``'django.db.backends.postgresql_psycopg2'``, \r\n      ``'django.db.backends.mysql'`` nebo\r\n      ``'django.db.backends.sqlite3'``. \r\n      Django podporuje i :setting:`dal\u0161\u00ed datab\u00e1zov\u00e9\r\n      backendy <ENGINE>`.\r\n\r\n    * :setting:`NAME` -- Jm\u00e9no va\u0161\u00ed datab\u00e1ze. Pokud pou\u017e\u00edv\u00e1te\r\n      SQLite, uve\u010fte zde absolutn\u00ed cestu (v\u010detn\u011b jm\u00e9na souboru) k\r\n      datab\u00e1zov\u00e9mu souboru (v p\u0159\u00edpad\u011b, \u017ee soubor neexistuje, bude\r\n      vytvo\u0159en p\u0159i prvn\u00ed synchronizaci, viz n\u00ed\u017ee).\r\n \r\n      P\u0159i uv\u00e1d\u011bn\u00ed cesty v\u017edy pou\u017e\u00edvejte dop\u0159edn\u00e9 lom\u00edtka (/), a to i v\r\n      syst\u00e9mu Windows (nap\u0159. ``C:/homes/user/mysite/sqlite3.db``).\r\n\r\n    * :setting:`USER` -- Va\u0161e datab\u00e1zov\u00e9 u\u017eivatelsk\u00e9 jm\u00e9no (u\r\n      SQLite se nepou\u017e\u00edv\u00e1).\r\n\r\n    * :setting:`PASSWORD` -- Va\u0161e datab\u00e1zov\u00e9 heslo (u SQLite se\r\n      nepou\u017e\u00edv\u00e1).\r\n\r\n    * :setting:`HOST` -- Po\u010d\u00edta\u010d, na kter\u00e9m jede datab\u00e1ze.\r\n      Pokud je na stejn\u00e9m po\u010d\u00edta\u010di jako Django, nechte \u0159et\u011bzec pr\u00e1zdn\u00fd.\r\n      (u SQLite se nepou\u017e\u00edv\u00e1)\r\n\r\nJestli\u017ee se v datab\u00e1z\u00edch neorientujete, vyberte si SQLite (tj. nastavte\r\n:setting:`ENGINE` na ``'sqlite3'``). SQLite je sou\u010d\u00e1st\u00ed Pythonu\r\nod verze 2.5, tak\u017ee se nemus\u00ed nic instalovat.\r\n\r\n.. admonition:: Pozn\u00e1mka\r\n\r\n    Pokud pou\u017e\u00edv\u00e1te PostgreSQL nebo MySQL, ujist\u011bte se, \u017ee datab\u00e1ze ji\u017e\r\n    existuje. Pokud ne, vytvo\u0159\u00edte ji p\u0159\u00edkazem \"``CREATE DATABASE\r\n    jmeno_databaze;``\" v interaktivn\u00ed datab\u00e1zov\u00e9 p\u0159\u00edkazov\u00e9 \u0159\u00e1dce.\r\n\r\n    Pokud pou\u017e\u00edv\u00e1te SQLite, nemus\u00edte d\u011blat nic -- datab\u00e1zov\u00fd soubor bude\r\n    automaticky vytvo\u0159en a\u017e bude t\u0159eba.\r\n\r\nKdy\u017e u\u017e editujete :file:`settings.py`, v\u0161imn\u011bte si prom\u011bnn\u00e9\r\n:setting:`INSTALLED_APPS` ve spodn\u00ed \u010d\u00e1sti souboru. Tato prom\u011bnn\u00e1 udr\u017euje\r\ninformace o v\u0161ech aktivn\u00edch aplikac\u00edch pro tuto instanci Djanga.\r\nAplikace mohou b\u00fdt pou\u017eity ve v\u00edce projektech, m\u016f\u017eete vytv\u00e1\u0159et jejich\r\nbal\u00ed\u010dky a nab\u00edzet je ostatn\u00edm vyvoj\u00e1\u0159\u016fm (kte\u0159\u00ed je pak za\u010dle\u0148uj\u00ed do \r\nsv\u00fdch projekt\u016f).\r\n\r\nStandardn\u011b :setting:`INSTALLED_APPS` obsahuje tyto aplikace:\r\n\r\n    * :mod:`django.contrib.auth` -- Autentifika\u010dn\u00ed syst\u00e9m.\r\n\r\n    * :mod:`django.contrib.contenttypes` -- Framework pro typy obsahu.\t\r\n\r\n    * :mod:`django.contrib.sessions` -- Framework pro sessions (sezen\u00ed).\r\n\r\n    * :mod:`django.contrib.sites` -- Framework pro spravov\u00e1n\u00ed n\u011bkolika\r\n      samostatn\u00fdch web\u016f v jedn\u00e9 instanci Djanga.\r\n\r\nUveden\u00e9 aplikace jsou sou\u010d\u00e1st\u00ed Djanga, proto\u017ee jde o b\u011b\u017en\u011b pou\u017e\u00edvan\u00e9 \r\nkomponenty p\u0159i v\u00fdvoji web\u016f.\r\n\r\nKa\u017ed\u00e1 z uveden\u00fdch aplikac\u00ed pou\u017e\u00edv\u00e1 alespo\u0148 jednu datab\u00e1zovou tabulku. Ne\u017e\r\nje za\u010dneme pou\u017e\u00edvat, mus\u00edme pro n\u011b v datab\u00e1zi tabulky vytvo\u0159it:\r\n\r\n.. code-block:: bash\r\n\r\n    python manage.py syncdb\r\n\r\nP\u0159\u00edkaz :djadmin:`syncdb` \u010dte prom\u011bnnou :setting:`INSTALLED_APPS`  a\r\nvytvo\u0159\u00ed v datab\u00e1zi v\u0161echny pot\u0159ebn\u00e9 tabulky. Po jeho spu\u0161t\u011bn\u00ed uvid\u00edte\r\nzpr\u00e1vu o vytvo\u0159en\u00ed ka\u017ed\u00e9 z tabulek a dotaz, jestli chcete vytvo\u0159it \u00fa\u010det\r\nsuperu\u017eivatele pro autentifika\u010dn\u00ed syst\u00e9m (odpov\u011bzte \"yes\" a \u00fa\u010det\r\nvytvo\u0159te).\r\n\r\nPokud v\u00e1s zaj\u00edm\u00e1, jak\u00e9 tabulky Django vytvo\u0159ilo, spus\u0165te interaktivn\u00ed\r\ndatab\u00e1zovou p\u0159\u00edkazovou \u0159\u00e1dku a napi\u0161te ``\\dt`` (PostgreSQL), ``SHOW\r\nTABLES;`` (MySQL), nebo ``.schema`` (SQLite).\r\n\r\n.. admonition:: Pozn\u00e1mka pro minimalisty (a nihilisty)\r\n\r\n    Jak u\u017e bylo \u0159e\u010deno, Django obsahuje sadu standardn\u00edch aplikac\u00ed, ale\r\n    ne v\u0161ichni je pot\u0159ebuj\u00ed (nap\u0159. nihilisti). Pokud si mysl\u00edte, \u017ee jsou\r\n    v\u00e1m na nic, s klidem zakomentujte nebo vyma\u017ete pat\u0159i\u010dn\u00fd \u0159\u00e1dek z\r\n    prom\u011bnn\u00e9 :setting:`INSTALLED_APPS` ne\u017e pou\u017eijete p\u0159\u00edkaz\r\n    :djadmin:`syncdb`. P\u0159\u00edkaz :djadmin:`syncdb` vytvo\u0159\u00ed tabulky pouze\r\n    pro aplikace uveden\u00e9 v :setting:`INSTALLED_APPS`.\r\n\r\n.. _creating-models:\r\n\r\nVytv\u00e1\u0159en\u00ed model\u016f\r\n================\r\n\r\nTak. Kone\u010dn\u011b m\u00e1me v\u0161e ponastavov\u00e1no -- \"projekt\" -- a m\u016f\u017eem za\u010d\u00edt\r\nd\u011blat n\u011bco kloudn\u00e9ho.\r\n\r\nKa\u017ed\u00e1 aplikace, kterou v Djangu nap\u00ed\u0161ete, se skl\u00e1d\u00e1 z Python bal\u00ed\u010dku\r\num\u00edst\u011bn\u00e9ho na n\u011bkter\u00e9 z `cest v PYTHONPATH`_. Django obsahuje utilitu,\r\nkter\u00e1 v\u00e1m pom\u016f\u017ee vygenerovat z\u00e1kladn\u00ed adres\u00e1\u0159ovou strukturu nov\u00e9\r\naplikace.\r\n\r\n.. admonition:: Projekty kontra aplikace\r\n\r\n    Jak\u00fd je rozd\u00edl mezi projektem a aplikac\u00ed? Aplikace je webov\u00fd k\u00f3d,\r\n    kter\u00fd n\u011bco d\u011bl\u00e1 -- nap\u0159. blogovac\u00ed syst\u00e9m, datab\u00e1ze ve\u0159ejn\u00fdch\r\n    z\u00e1znam\u016f nebo jednoduch\u00e1 anketa. Projekt je soubor aplikac\u00ed\r\n    a nastaven\u00ed, kter\u00fd funguje na konkr\u00e9tn\u00ed dom\u00e9n\u011b. Projekt m\u016f\u017ee\r\n    obsahovat v\u00edce aplikac\u00ed. Aplikace m\u016f\u017ee b\u00fdt ve v\u00edce projektech.\r\n\r\nV tomto n\u00e1vodu vytvo\u0159\u00edme anketn\u00ed aplikaci, kterou pro zjednodu\u0161en\u00ed\r\num\u00edst\u00edme p\u0159\u00edmo do adres\u00e1\u0159e :file:`mysite`. D\u016fsledkem tohoto zjednodu\u0161en\u00ed\r\nbude vz\u00e1jemn\u00e9 propojen\u00ed aplikace a projektu -- tj. Python k\u00f3d se v\r\nanketn\u00ed aplikaci bude odkazovat na adres\u00e1\u0159 ``mysite.polls``. Pozd\u011bji\r\nsi uk\u00e1\u017eeme, jak aplikaci od projektu odd\u011blit a umo\u017enit jeho distribuci.\r\n\r\nPro vytvo\u0159en\u00ed aplikace se ujist\u011bte, \u017ee se nach\u00e1z\u00edte v adres\u00e1\u0159i\r\n:file:`mysite` a zadejte tento p\u0159\u00edkaz:\r\n\r\n.. code-block:: bash\r\n\r\n    python manage.py startapp polls\r\n\r\nVytvo\u0159\u00ed se adres\u00e1\u0159 :file:`polls` s n\u00e1sleduj\u00edc\u00ed strukturou::\r\n\r\n    polls/\r\n        __init__.py\r\n        models.py\r\n        views.py\r\n\r\nTato struktura se stane domovem na\u0161\u00ed anketn\u00ed aplikace.\r\n\r\nPrvn\u00edm krokem p\u0159i vytv\u00e1\u0159en\u00ed datab\u00e1zov\u00e9 Django aplikace je definice\r\nmodel\u016f -- tj. struktury datab\u00e1ze s dodate\u010dn\u00fdmi metadaty.\r\n\r\n.. admonition:: Filozofie\r\n\r\n    Model je jedine\u010dn\u00fdm popisem va\u0161ich dat. Obsahuje v\u0161echna\r\n    nezbytn\u00e1 pole a chov\u00e1n\u00ed ukl\u00e1dan\u00fdch dat. Django ct\u00ed\r\n    :ref:`DRY princip <dry>` (Dont Repeat Yourself -- neopakuj se).\r\n    C\u00edlem je definovat datov\u00fd model na jedin\u00e9m m\u00edst\u011b a ostatn\u00ed v\u011bci z\r\n    n\u011bj odvozovat automaticky.\r\n\r\nV na\u0161\u00ed jednoduch\u00e9 anketn\u00ed aplikaci si vytvo\u0159\u00edme dva modely -- ankety a\r\njej\u00ed volby. Anketa bude slo\u017eena z ot\u00e1zky a data zve\u0159ejn\u011bn\u00ed. Volba bude\r\nm\u00edt dv\u011b pole: textov\u00fd popis a z\u00e1znam hlasov\u00e1n\u00ed. Ka\u017ed\u00e1 volba bude spojena\r\ns anketou.\r\n\r\nNyn\u00ed si slovn\u00ed popis na\u0161\u00ed aplikace p\u0159ep\u00ed\u0161eme do jednoduch\u00fdch Python\r\nt\u0159\u00edd. Upravte soubor :file:`polls/models.py`, aby vypadal takto::\r\n\r\n    from django.db import models\r\n\r\n    class Poll(models.Model):\r\n        question = models.CharField(max_length=200)\r\n        pub_date = models.DateTimeField('date published')\r\n\r\n    class Choice(models.Model):\r\n        poll = models.ForeignKey(Poll)\r\n        choice = models.CharField(max_length=200)\r\n        votes = models.IntegerField()\r\n\r\nUveden\u00fd k\u00f3d je pom\u011brn\u011b p\u0159\u00edmo\u010dar\u00fd. Ka\u017ed\u00fd model je potomkem t\u0159\u00eddy\r\n:class:`django.db.models.Model` a jeho prom\u011bnn\u00e9 definuj\u00ed jednotliv\u00e1\r\ndatab\u00e1zov\u00e1 pole.\r\n\r\nKa\u017ed\u00e9 pole je reprezentov\u00e1no instanc\u00ed t\u0159\u00eddy\r\n:class:`~django.db.models.Field` -- nap\u0159.,\r\n:class:`~django.db.models.CharField` pro znakov\u00e1 pole a\r\n:class:`~django.db.models.DateTimeField` pro datum a \u010das. \r\n\r\nPojmenov\u00e1n\u00edm jednotliv\u00fdch pol\u00ed :class:`~django.db.models.Field` (nap\u0159.\r\n``question`` nebo ``pub_date``) se definuje tzv. \"strojov\u00e9\"\r\n(machine-friendly) jm\u00e9no. P\u0159es n\u011b budete v Pythonu p\u0159istupovat k\r\nhodnot\u011b pole a v datab\u00e1zi bude vyu\u017eito pro pojmenov\u00e1n\u00ed sloupce.\r\n\r\nPokud chcete, m\u016f\u017eete pomoc\u00ed prvn\u00edho argumentu v\r\n:class:`~django.db.models.Field` vytvo\u0159it \"lidsky \u010diteln\u00e9\"\r\n(human-readable) jm\u00e9no. Pokud jej nezad\u00e1te, Django si ho odvod\u00ed ze\r\nstrojov\u00e9ho jm\u00e9na. V na\u0161em p\u0159\u00edklad\u011b jsme \"lidsk\u00e9\" jm\u00e9no definovali pouze\r\npro pole ``Poll.pub_date``.\r\n\r\nN\u011bkter\u00e9 :class:`~django.db.models.Field` t\u0159\u00eddy maj\u00ed povinn\u00e9 parametry.\r\nNap\u0159. :class:`~django.db.models.CharField` vy\u017eaduje specifikaci\r\n:attr:`~django.db.models.Field.max_length` (maxim\u00e1ln\u00ed d\u00e9lka \u0159et\u011bzce).\r\nZadan\u00e1 hodnota se pou\u017eije b\u011bhem vytv\u00e1\u0159en\u00ed datab\u00e1zov\u00e9 tabulky, ale jak si\r\nbrzy uk\u00e1\u017eeme, poslou\u017e\u00ed stejn\u011b dob\u0159e i pro validaci hodnoty.\r\n\r\nNakonec si v\u0161imn\u011bte definice vztahu s pomoc\u00ed v\u00fdrazu\r\n:class:`~django.db.models.ForeignKey`. Ten Djangu \u0159\u00edk\u00e1, \u017ee ka\u017ed\u00e1 volba\r\nse vztahuje k jedn\u00e9 anket\u011b. Django podporuje v\u0161echny obvykl\u00e9 datab\u00e1zov\u00e9\r\nrelace: M:N (many-to-many), 1:N (many-to-one) a 1:1 (one-to-one).\r\n\r\n.. _`cest v PYTHONPATH`: http://docs.python.org/tutorial/modules.html#the-module-search-path \r\n\r\n\r\nAktivace model\u016f\r\n===============\r\n\r\nUveden\u00fd kousek k\u00f3du poskytuje Djangu spoustu informac\u00ed o modelu. D\u00edky\r\nn\u011bmu Django m\u016f\u017ee:\r\n\r\n    * Vytvo\u0159it datab\u00e1zov\u00e9 sch\u00e9ma (v\u00fdrazy ``CREATE TABLE``) pro na\u0161i\r\n      aplikaci.\r\n    * Vytvo\u0159it datab\u00e1zov\u00e9 API v Pythonu pro p\u0159\u00edstup k objekt\u016fm Poll\r\n      (anketa) a Choice (volba).\r\n\r\nAle nejprve mus\u00edme na\u0161emu projektu \u0159\u00edct, \u017ee aplikace ``polls`` je\r\nnainstalov\u00e1na.\r\n\r\n.. admonition:: Filozofie\r\n\r\n    Django aplikace jsou \"z\u00e1suvn\u00e9\": aplikace m\u016f\u017ee b\u00fdt pou\u017eita ve v\u00edce\r\n    projektech a aplikace mohou b\u00fdt distribuov\u00e1ny.\r\n\r\nZnovu upravte soubor :file:`settings.py` a zm\u011b\u0148te nastaven\u00ed\r\n:setting:`INSTALLED_APPS` tak, aby obsahovalo \u0159et\u011bzec ``'mysite.polls'``.\r\nTak\u017ee bude vypadat n\u00e1sledovn\u011b::\r\n\r\n    INSTALLED_APPS = (\r\n        'django.contrib.auth',\r\n        'django.contrib.contenttypes',\r\n        'django.contrib.sessions',\r\n        'django.contrib.sites',\r\n        'mysite.polls'\r\n    )\r\n\r\nDjango te\u010f v\u00ed, \u017ee ``mysite`` obsahuje aplikaci ``polls``. Spus\u0165me dal\u0161\u00ed\r\np\u0159\u00edkaz:\r\n\r\n.. code-block:: bash\r\n\r\n    python manage.py sql polls\r\n\r\nM\u011bli by jste vid\u011bt n\u011bco podobn\u00e9ho (SQL p\u0159\u00edkazy ``CREATE TABLE`` pro\r\nna\u0161i anketn\u00ed aplikaci):\r\n\r\n.. code-block:: sql\r\n\r\n    BEGIN;\r\n    CREATE TABLE \"polls_poll\" (\r\n        \"id\" serial NOT NULL PRIMARY KEY,\r\n        \"question\" varchar(200) NOT NULL,\r\n        \"pub_date\" timestamp with time zone NOT NULL\r\n    );\r\n    CREATE TABLE \"polls_choice\" (\r\n        \"id\" serial NOT NULL PRIMARY KEY,\r\n        \"poll_id\" integer NOT NULL REFERENCES \"polls_poll\" (\"id\"),\r\n        \"choice\" varchar(200) NOT NULL,\r\n        \"votes\" integer NOT NULL\r\n    );\r\n    COMMIT;\r\n\r\nM\u011bjte na pam\u011bti:\r\n\r\n    * P\u0159esn\u00fd v\u00fdstup se bude li\u0161it podle pou\u017eit\u00e9 datab\u00e1ze.\r\n\r\n    * Jm\u00e9na tabulek jsou automaticky generov\u00e1na ze jm\u00e9na aplikace\r\n      (``polls``) a jm\u00e9na modelu -- ``poll`` a ``choice``. (Toto chov\u00e1n\u00ed\r\n      m\u016f\u017eete zm\u011bnit.)\r\n\r\n    * Prim\u00e1rn\u00ed kl\u00ed\u010de (ID) jsou p\u0159id\u00e1ny automaticky. (Tak\u00e9 lze zm\u011bnit.)\r\n\r\n    * Django samo od sebe p\u0159ilepuje suffix ``\"_id\"`` ke jm\u00e9n\u016fm pol\u00ed s\r\n      ciz\u00edmi kl\u00ed\u010di (foreign keys). I toto m\u016f\u017eete zm\u011bnit.\r\n\r\n    * Relace foreign key je vytvo\u0159ena explicitn\u00edm v\u00fdrazem ``REFERENCES``.\r\n\r\n    * V\u00fdstup je p\u0159izp\u016fsoben pou\u017eit\u00e9 datab\u00e1zi, tak\u017ee typy pol\u00ed specifick\u00e9\r\n      pro datab\u00e1ze, jako ``auto_increment`` (MySQL), ``serial``\r\n      (PostgreSQL), nebo ``integer primary key`` (SQLite) jsou\r\n      automaticky zpracov\u00e1ny. To sam\u00e9 plat\u00ed i o ohrani\u010dov\u00e1n\u00ed jmen pol\u00ed\r\n      do uvozovek -- dvojit\u00fdch nebo jednoduch\u00fdch. Autor tohoto n\u00e1vodu\r\n      pou\u017e\u00edv\u00e1 PostgreSQL, tak\u017ee v\u00fdstup je ps\u00e1n v syntaxi PostgreSQL.\r\n\r\n    * P\u0159\u00edkaz :djadmin:`sql` nespou\u0161t\u00ed SQL v datab\u00e1zi -- pouze je vyp\u00ed\u0161e\r\n      na obrazovku, tak\u017ee m\u016f\u017eete zkontrolovat, co se Django chyst\u00e1\r\n      ud\u011blat. Pokud chcete, m\u016f\u017eete SQL p\u0159\u00edkazy zkop\u00edrovat do datab\u00e1zov\u00e9ho\r\n      interpreteru a nechat prov\u00e9st. Jak ale pozd\u011bji uvid\u00edme, existuje\r\n      pohodln\u011bj\u0161\u00ed varianta...\r\n\r\nPro zaj\u00edmavost zadejte n\u00e1sleduj\u00edc\u00ed p\u0159\u00edkazy:\r\n\r\n    * :djadmin:`python manage.py validate <validate>` -- Hled\u00e1 jak\u00e9koli\r\n      chyby v definici modelu.\r\n\r\n    * :djadmin:`python manage.py sqlcustom polls <sqlcustom>` -- Vyp\u00ed\u0161e\r\n      v\u0161echny :ref:`u\u017eivatelsk\u00e9 SQL p\u0159\u00edkazy <initial-sql>` (jako jsou\r\n      modifikace nebo omezen\u00ed tabulek) definovan\u00e9 pro tuto aplikaci.\r\n\r\n    * :djadmin:`python manage.py sqlclear polls <sqlclear>` -- Vyp\u00ed\u0161e\r\n      v\u0161echny ``DROP TABLE`` p\u0159\u00edkazy pro zadanou aplikaci (ale pouze\r\n      pro ty, kter\u00e9 v datab\u00e1zi skute\u010dn\u011b existuj\u00ed).\r\n\r\n    * :djadmin:`python manage.py sqlindexes polls <sqlindexes>` --\r\n      Vyp\u00ed\u0161e ``CREATE INDEX`` p\u0159\u00edkazy pro tuto aplikaci.\r\n\r\n    * :djadmin:`python manage.py sqlall polls <sqlall>` -- Kombinace\r\n      v\u0161ech SQL dohromady, tj. :djadmin:`sql`, :djadmin:`sqlcustom`, a\r\n      :djadmin:`sqlindexes`.\r\n\r\nKdy\u017e si prostudujete jednotliv\u00e9 v\u00fdstupy, pom\u016f\u017ee v\u00e1m to pochopit co se\r\nd\u011bje pod pokli\u010dkou.\r\n\r\nTe\u010f op\u011bt spus\u0165te p\u0159\u00edkaz :djadmin:`syncdb`, aby se n\u00e1m vytvo\u0159ily pot\u0159ebn\u00e9\r\ntabulky model\u016f v datab\u00e1zi:\r\n\r\n.. code-block:: bash\r\n\r\n    python manage.py syncdb\r\n\r\nP\u0159\u00edkaz :djadmin:`syncdb` spust\u00ed ve va\u0161\u00ed datab\u00e1zi SQL p\u0159\u00edkazy z v\u00fdstupu\r\n'sqlall' pro v\u0161echny aplikace uveden\u00e9 v :setting:`INSTALLED_APPS`.\r\nVytvo\u0159\u00ed tabulky, indexy a napln\u00ed je po\u010d\u00e1te\u010dn\u00edmi daty -- ale pouze pro\r\nty aplikace, kter\u00e9 jste do sv\u00e9ho projektu p\u0159idali od posledn\u00edho spu\u0161t\u011bn\u00ed\r\nsyncdb. :djadmin:`syncdb` m\u016f\u017eete volat jak \u010dasto chcete, a v\u017edy budou\r\nvytvo\u0159eny jen ty tabulky, kter\u00e9 v datab\u00e1zi je\u0161t\u011b neexistuj\u00ed.\r\n\r\nDal\u0161\u00ed podrobnosti a p\u0159\u00edkazy utility ``manage.py`` na\u010dtete v \r\n:ref:`dokumentaci pro django-admin.py <ref-django-admin>`.\r\n\r\nHrajeme si s API\r\n================\r\n\r\nTak. Hupsn\u011bme pro zm\u011bnu do interaktivn\u00edho shellu Pythonu a pohrajme si s\r\nAPI, kter\u00e9 n\u00e1m Django automaticky vytvo\u0159ilo. Pro spu\u0161t\u011bn\u00ed interpreteru\r\npou\u017eijte n\u00e1sleduj\u00edc\u00ed p\u0159\u00edkaz:\r\n\r\n.. code-block:: bash\r\n\r\n    python manage.py shell\r\n\r\nM\u00edsto jednoduch\u00e9ho \"python\" pou\u017e\u00edv\u00e1me tento p\u0159\u00edkaz, proto\u017ee\r\n``manage.py`` nastav\u00ed nezbytn\u00e9 prost\u0159ed\u00ed projektu. \"Nastavov\u00e1n\u00ed\"\r\nzahrnuje dv\u011b v\u011bci:\r\n\r\n    * Vlo\u017e\u00ed ``mysite`` do ``sys.path``. D\u00edky tomu se Django m\u016f\u017ee\r\n      \"dote\u010dkovat\" k na\u0161emu projektu (nap\u0159. ``'mysite.polls.models'``).\r\n      Aby to fungovalo, bal\u00ed\u010dek ``mysite`` mus\u00ed le\u017eet na cest\u011b\r\n      ``sys.path``.\r\n      \r\n      Podobnou notaci jsme u\u017e vid\u011bli: nastaven\u00ed\r\n      :setting:`INSTALLED_APPS` je vlastn\u011b seznam bal\u00ed\u010dk\u016f v te\u010dkovan\u00e9m\r\n      z\u00e1pisu cest.\r\n\r\n    * Nastaven\u00ed prom\u011bnn\u00e9 prost\u0159ed\u00ed ``DJANGO_SETTINGS_MODULE``, kter\u00e9\r\n      Djangu uk\u00e1\u017ee cestu k souboru ``settings.py``.\r\n\r\n.. admonition:: Obch\u00e1zen\u00ed manage.py\r\n\r\n    Pokud nechcete pou\u017e\u00edvat ``manage.py``, nemus\u00edte. Ujist\u011bte se v\u0161ak,\r\n    \u017ee ``mysite`` le\u017e\u00ed na PYTHONPATH (tj. p\u0159\u00edkaz ``import mysite`` bude\r\n    fungovat) a nastavte prom\u011bnnou prost\u0159ed\u00ed ``DJANGO_SETTINGS_MODULE``\r\n    na ``mysite.settings``.\r\n\r\n    Pro v\u00edce informac\u00ed nahl\u00e9dn\u011bte do dokumentace :ref:`django-admin.py\r\n    <ref-django-admin>`.\r\n\r\nJakmile budete v konzoli, vyzkou\u0161ejte si :ref:`datab\u00e1zov\u00e9 API\r\n<topics-db-queries>`::\r\n\r\n    >>> from mysite.polls.models import Poll, Choice # Naimportuje modelove tridy, ktere jsme pred chvili napsali.\r\n\r\n    # V systemu jeste nejsou zadne ankety.\r\n    >>> Poll.objects.all()\r\n    []\r\n\r\n    # Vytvorime novou anketu.\r\n    >>> import datetime\r\n    >>> p = Poll(question=\"What's up?\", pub_date=datetime.datetime.now())\r\n\r\n    # Ulozime objekt do databaze. Prikaz save() se musi volat explicitne.\r\n    >>> p.save()\r\n\r\n    # Ted ma anketa ID. Python muze vratit \"1L\" misto \"1\" v zavislosti na\r\n    # pouzite databazi.\r\n    >>> p.id\r\n    1\r\n\r\n    # Hodnoty jednotlivych poli jsou zpristupneny pres atributy objektu.\r\n    >>> p.question\r\n    \"What's up?\"\r\n    >>> p.pub_date\r\n    datetime.datetime(2007, 7, 15, 12, 00, 53)\r\n\r\n    # Upravte hodnoty zmenou atributu a potom zavolejte save().\r\n    >>> p.pub_date = datetime.datetime(2007, 4, 1, 0, 0)\r\n    >>> p.save()\r\n\r\n    # objects.all() zobrazi vsechny ankety v databazi.\r\n    >>> Poll.objects.all()\r\n    [<Poll: Poll object>]\r\n\r\n\r\nPo\u010dkat. Reprezentace objektu v\u00fdrazem ``<Poll: Poll object>`` je p\u0159inejmen\u0161\u00edm\r\nnicne\u0159\u00edkaj\u00edc\u00ed. Naprav\u00edme to \u00fapravou modelu anket (v souboru\r\n``polls/models.py``) p\u0159id\u00e1n\u00edm metody\r\n:meth:`~django.db.models.Model.__unicode__` k ``Poll`` i ``Choice``::\r\n\r\n    class Poll(models.Model):\r\n        # ...\r\n        def __unicode__(self):\r\n            return self.question\r\n\r\n    class Choice(models.Model):\r\n        # ...\r\n        def __unicode__(self):\r\n            return self.choice\r\n\r\n.. admonition:: Kdy\u017e :meth:`~django.db.models.Model.__unicode__` nefunguje\r\n\r\n    Pokud jste k va\u0161im model\u016fm p\u0159idali metodu\r\n    :meth:`~django.db.models.Model.__unicode__` a nevid\u00edte \u017e\u00e1dnou zm\u011bnu ve\r\n    zp\u016fsobu jejich reprezentace, nejsp\u00ed\u0161 pou\u017e\u00edv\u00e1te starou verzi Djanga. (Tato\r\n    verze n\u00e1vodu je naps\u00e1na pro nejnov\u011bj\u0161\u00ed v\u00fdvojovou verzi Djanga.) \r\n\r\n    Pokud chcete pracovat se star\u0161\u00ed verz\u00ed Djanga, m\u011bli by jste p\u0159ej\u00edt k\r\n    `n\u00e1vodu pro Django 0.96`_, proto\u017ee tento n\u00e1vod popisuje n\u011bkter\u00e9\r\n    funkce, kter\u00e9 jsou obsa\u017eeny pouze ve v\u00fdvojov\u00e9 verzi.\r\n\r\n.. _n\u00e1vodu pro Django 0.96: http://www.djangoproject.com/documentation/0.96/tutorial01/\r\n\r\nMetoda :meth:`~django.db.models.Model.__unicode__` je d\u016fle\u017eit\u00e1 nejen kv\u016fli\r\np\u0159ehlednosti p\u0159i pr\u00e1ci v interaktivn\u00edm re\u017eimu, ale tak\u00e9 proto, \u017ee reprezentace\r\nobjekt\u016f jsou pou\u017eity v automaticky generovan\u00e9m administra\u010dn\u00edm rozhran\u00ed.\r\n\r\n.. admonition:: Pro\u010d :meth:`~django.db.models.Model.__unicode__` a ne\r\n                :meth:`~django.db.models.Model.__str__`?\r\n\r\n    Pokud zn\u00e1te Python, asi jste si zvykli p\u0159id\u00e1vat k va\u0161\u00edm t\u0159\u00edd\u00e1m metody\r\n    :meth:`django.db.models.Model.__str__` a ne\r\n    :meth:`~django.db.models.Model.__unicode__`. Pou\u017e\u00edv\u00e1me\r\n    :meth:`~django.db.models.Model.__unicode__`, proto\u017ee Django modely\r\n    standartn\u011b pracuj\u00ed s Unicode. V\u0161echna data ve va\u0161\u00ed datab\u00e1zi jsou p\u0159i\r\n    \u010dten\u00ed p\u0159ev\u00e1d\u011bna do Unicode.\r\n\r\n    Django modely maj\u00ed p\u0159ednastavenou metodu\r\n    :meth:`~django.db.models.Model.__str__`, kter\u00e1 vol\u00e1\r\n    :meth:`~django.db.models.Model.__unicode__` a ta p\u0159ev\u00e1d\u00ed v\u00fdsledky do UTF-8\r\n    bytestringu.  Jin\u00fdmi slovy, vol\u00e1n\u00ed ``unicode(p)`` vr\u00e1t\u00ed Unicode \u0159et\u011bzec, a\r\n    ``str(p)`` vr\u00e1t\u00ed norm\u00e1ln\u00ed \u0159et\u011bzec se znaky k\u00f3dovan\u00fdmi jako UTF-8.\r\n\r\n    Pokud je pro v\u00e1s v\u00fd\u0161e uveden\u00e9 \u0161pan\u011blskou vesnic\u00ed, zapamatujte si\r\n    jedin\u00e9 -- ke ka\u017ed\u00e9mu modelu p\u0159id\u00e1vejte  metodu\r\n    :meth:`~django.db.models.Model.__unicode__`.\r\n\r\nJe t\u0159eba zd\u016fraznit, \u017ee se celou dobu bav\u00edme o norm\u00e1ln\u00edch metod\u00e1ch\r\nPythonu. Pro uk\u00e1zku si p\u0159id\u00e1me je\u0161t\u011b jednu vlastn\u00ed metodu::\r\n\r\n    import datetime\r\n    # ...\r\n    class Poll(models.Model):\r\n        # ...\r\n        def was_published_today(self):\r\n            return self.pub_date.date() == datetime.date.today()\r\n\r\nPozn\u00e1mka: ``import datetime`` nat\u00e1hne standardn\u00ed Python\u00ed modul ``datetime``.\r\n\r\nUlo\u017ete tyto zm\u011bny a nastartujte nov\u00fd interaktivn\u00ed shell Pythonu spu\u0161t\u011bn\u00edm ``python manage.py\r\nshell``::\r\n\r\n    >>> from mysite.polls.models import Poll, Choice\r\n\r\n    # Ujisteme se, ze pridani __unicode__() funguje\r\n    >>> Poll.objects.all()\r\n    [<Poll: What's up?>]\r\n\r\n    # Django nabizi rozsahle API pro vyhledavani v databazich\r\n    # prostrednictvim keyword argumentu\r\n    >>> Poll.objects.filter(id=1)\r\n    [<Poll: What's up?>]\r\n    >>> Poll.objects.filter(question__startswith='What')\r\n    [<Poll: What's up?>]\r\n\r\n    # Najdi anketu publikovanou v roce 2007.\r\n    >>> Poll.objects.get(pub_date__year=2007)\r\n    <Poll: What's up?>\r\n\r\n    >>> Poll.objects.get(id=2)\r\n    Traceback (most recent call last):\r\n        ...\r\n    DoesNotExist: Poll matching query does not exist.\r\n\r\n    # Vyhledavani podle primarniho klice se pouziva pomerne casto,\r\n    # proto Django nabizi zkratku.\r\n    # Nasledujici prikaz je stejny jako Poll.objects.get(id=1).\r\n    >>> Poll.objects.get(pk=1)\r\n    <Poll: What's up?>\r\n\r\n    # Ujisteme se, ze nami definovana metoda funguje.\r\n    >>> p = Poll.objects.get(pk=1)\r\n    >>> p.was_published_today()\r\n    False\r\n\r\n    # Definujme ankete nekolik voleb. Volani create vytvori novy objekt choice,\r\n    # provede SQL prikaz INSERT, prida volbu do sady voleb a vrati vysledny\r\n    # objekt Choice (volba). Django automaticky vytvori sadu objektu a API\r\n    # rozhrani pro pristup k objektum z opacne strany vazby FK (v tomto\r\n    # pripade volby ankety).\r\n    >>> p = Poll.objects.get(pk=1)\r\n\r\n    # Zobrazme si volby, ktere jsou propojeny s anketou -- zatim nic.\r\n    >>> p.choice_set.all() \r\n    [] \r\n\r\n    # Nyni vytvorme 3 volby.\r\n    >>> p.choice_set.create(choice='Not much', votes=0)\r\n    <Choice: Not much>\r\n    >>> p.choice_set.create(choice='The sky', votes=0)\r\n    <Choice: The sky>\r\n    >>> c = p.choice_set.create(choice='Just hacking again', votes=0)\r\n\r\n    # Objekty voleb maji pres API pristup k souvisejicim objektum anket.\r\n    >>> c.poll\r\n    <Poll: What's up?>\r\n\r\n    # A naopak: objekty anket maji pristup ke svym volbam.\r\n    >>> p.choice_set.all()\r\n    [<Choice: Not much>, <Choice: The sky>, <Choice: Just hacking again>]\r\n    >>> p.choice_set.count()\r\n    3\r\n\r\n    # API automaticky sleduje relace tak, jak potrebujete.\r\n    # Pouzijte dvojite podtrzitka pro oddeleni jednotlivych vztahu.\r\n    # Toto funguje tolik urovni do hloubky, kolik chcete; bez omezeni.\r\n    # Najdi vsechny volby pro jakoukoli anketu, ktera byla publikovana\r\n    # v roce 2007.\r\n    >>> Choice.objects.filter(poll__pub_date__year=2007)\r\n    [<Choice: Not much>, <Choice: The sky>, <Choice: Just hacking again>]\r\n\r\n    # Smazme jednu z voleb s pouzitim delete().\r\n    >>> c = p.choice_set.filter(choice__startswith='Just hacking')\r\n    >>> c.delete()\r\n\r\nVe\u0161ker\u00e9 podrobnosti o :ref:`vazb\u00e1ch mezi modely <ref-models-relations>` a\r\n:ref:`datab\u00e1zov\u00e9m API <topics-db-queries>` naleznete na samostatn\u00fdch str\u00e1nk\u00e1ch.\r\n\r\nA\u017e si zvyknete na API, p\u0159ejd\u011bte k :ref:`druh\u00e9 \u010d\u00e1sti tohoto n\u00e1vodu\r\n<intro-tutorial02>`, kde zprovozn\u00edme automatick\u00e9 administra\u010dn\u00ed rozhran\u00ed\r\nDjanga.", 
            "revision": 12711
        }
    }, 
    {
        "pk": 4, 
        "model": "translations.translation", 
        "fields": {
            "flat_page": null, 
            "updated": "2010-08-16 22:33:18", 
            "created": "2008-12-05 21:37:04", 
            "source_path": "/home/michal/projects/www/djangoproject.cz/docs/intro/tutorial02.txt", 
            "content": ".. _intro-tutorial02:\r\n\r\n===============================\r\nPrvn\u00ed aplikace v Djangu, \u010d\u00e1st 2\r\n===============================\r\n\r\nTento n\u00e1vod za\u010d\u00edn\u00e1 tam, kde skon\u010dila :ref:`prvn\u00ed \u010d\u00e1st uk\u00e1zkov\u00e9 aplikace\r\n<intro-tutorial01>`. Budeme pokra\u010dovat v na\u0161\u00ed webov\u00e9 anketn\u00ed aplikaci a\r\nzam\u011b\u0159\u00edme se na automaticky generovan\u00e9 administrativn\u00ed rozhran\u00ed Djanga.\r\n\r\n.. admonition:: Filozofie\r\n\r\n    Vytv\u00e1\u0159en\u00ed administra\u010dn\u00edch str\u00e1nek pro b\u011b\u017enou spr\u00e1vu obsahu je \u00fanavn\u00e1\r\n    a nudn\u00e1 pr\u00e1ce, kter\u00e1 nevy\u017eaduje p\u0159\u00edli\u0161 mnoho kreativity. Django\r\n    p\u0159ich\u00e1z\u00ed s mo\u017enost\u00ed automatick\u00e9ho vytvo\u0159en\u00ed administra\u010dn\u00edho rozhran\u00ed\r\n    pro definovan\u00e9 modely.\r\n\r\n    Django bylo naps\u00e1no v novin\u00e1\u0159sk\u00e9m prost\u0159ed\u00ed, kde byl jasn\u011b vymezen\r\n    rozd\u00edl mezi t\u011bmi kdo tvo\u0159\u00ed obsah, a t\u011bmi kdo jej konzumuj\u00ed.\r\n    Spr\u00e1vci str\u00e1nek pou\u017e\u00edvaj\u00ed administra\u010dn\u00ed syst\u00e9m pro p\u0159id\u00e1v\u00e1n\u00ed zpr\u00e1v,\r\n    ud\u00e1lost\u00ed, sportovn\u00edch v\u00fdsledk\u016f atd., a tento obsah je zve\u0159ej\u0148ov\u00e1n.\r\n    Django \u0159e\u0161\u00ed probl\u00e9m vytv\u00e1\u0159en\u00ed jednotn\u00e9ho rozhran\u00ed pro v\u0161echny\r\n    tv\u016frce obsahu.\r\n\r\n    S administra\u010dn\u00edm rozhran\u00edm se b\u011b\u017en\u00fd n\u00e1v\u0161t\u011bvn\u00edk str\u00e1nek nemus\u00ed v\u016fbec\r\n    potkat -- je pouze pro ty, kte\u0159\u00ed web spravuj\u00ed.\r\n\r\nAktivace administra\u010dn\u00edho rozhran\u00ed\r\n=================================\r\n\r\nAdministra\u010dn\u00ed rozhran\u00ed Djanga nen\u00ed ve v\u00fdchoz\u00ed konfiguraci zapnuto --\r\nmus\u00edte je sami aktivovat. Sta\u010d\u00ed prov\u00e9st tyto t\u0159i \u00fakony:\r\n\r\n    * P\u0159idejte ``\"django.contrib.admin\"`` do seznamu v\r\n      :setting:`INSTALLED_APPS`.\r\n\r\n    * Spus\u0165te ``python manage.py syncdb``. Proto\u017ee jste p\u0159idali do\r\n      :setting:`INSTALLED_APPS` novou aplikaci, je t\u0159eba vytvo\u0159it \r\n      v\u0161echny nov\u00e9 datab\u00e1zov\u00e9 tabulky.\r\n\r\n    * Upravte soubor ``mysite/urls.py`` a odkomentujte t\u0159i \u0159\u00e1dky, kter\u00e9 \r\n      se odkazuj\u00ed na administraci (admin). Soubor urls.py obsahuje\r\n      v\u00fdrazy, kter\u00e9 mapuj\u00ed URL adresy na konkr\u00e9tn\u00ed aplikace. V dal\u0161\u00ed\r\n      \u010d\u00e1sti n\u00e1vodu se na URLconf pod\u00edvame podrobn\u011bji, pro tentokr\u00e1t v\u00edce\r\n      v\u011bd\u011bt nepot\u0159ebujete. V\u00fdsledek va\u0161ich \u00faprav by m\u011bl vypadat asi\r\n      takto:\r\n\r\n      **Zm\u011bna ve v\u00fdvojov\u00e9 verzi:** Metoda kter\u00e1 do pravidel p\u0159id\u00e1v\u00e1 administr\u00e1torsk\u00e9 URL adresy se v Djangu od verze 1.1 zm\u011bn\u00ed.\r\n\r\n      .. parsed-literal::\r\n\r\n          from django.conf.urls.defaults import *\r\n\r\n          # Uncomment the next two lines to enable the admin:\r\n          **from django.contrib import admin**\r\n          **admin.autodiscover()**\r\n\r\n          urlpatterns = patterns('',\r\n              # Example:\r\n              # (r'^mysite/', include('mysite.foo.urls')),\r\n\r\n              # Uncomment the admin/doc line below and add 'django.contrib.admindocs'\r\n              # to INSTALLED_APPS to enable admin documentation:\r\n              # (r'^admin/doc/', include('django.contrib.admindocs.urls')),\r\n\r\n              # Uncomment the next line to enable the admin:\r\n              **(r'^admin/', include(admin.site.urls)),** \r\n          )\r\n\r\n      (Tu\u010dn\u011b zv\u00fdrazn\u011bn\u00e9 \u0159\u00e1dky nesm\u00ed b\u00fdt zakomentov\u00e1ny.)\r\n\r\nSpou\u0161t\u00edme v\u00fdvojov\u00fd server\r\n=========================\r\n\r\nSpus\u0165te v\u00fdvojov\u00fd server a poj\u010fme se pod\u00edvat, jak admnistra\u010dn\u00ed rozhran\u00ed\r\nvypad\u00e1.\r\n\r\nVzpome\u0148te si na prvn\u00ed d\u00edl tohoto pr\u016fvodce. V\u00fdvojov\u00fd server se spou\u0161t\u00ed\r\np\u0159\u00edkazem:\r\n\r\n.. code-block:: bash\r\n\r\n    python manage.py runserver\r\n\r\nNastartujte prohl\u00ed\u017ee\u010d a p\u0159ejd\u011bte na \"/admin/\" na va\u0161em localhostu -- nap\u0159.,\r\nhttp://127.0.0.1:8000/admin/. M\u011bli by jste vid\u011bt p\u0159ihla\u0161ovac\u00ed str\u00e1nku:\r\n\r\n.. image:: _images/admin01.png\r\n   :alt: P\u0159ihla\u0161ovac\u00ed obrazovka administra\u010dn\u00edho rozhran\u00ed\r\n\r\nUvnit\u0159 administrace\r\n===================\r\n\r\nTe\u010f se zkuste p\u0159ihl\u00e1sit. (V prvn\u00ed \u010d\u00e1sti na\u0161eho n\u00e1vodu jsme vytv\u00e1\u0159eli\r\n\u00fa\u010det pro superu\u017eivatele, vzpom\u00edn\u00e1te si? Pokud jste si jej nevytvo\u0159ili,\r\nnebo jste zapomn\u011bli heslo, m\u016f\u017eete si \r\n:ref:`vytvo\u0159it nov\u00fd <topics-auth-creating-superusers>`.) M\u011bli by jste \r\nvid\u011bt hlavn\u00ed str\u00e1nku administrace:\r\n\r\n.. image:: _images/admin02t.png\r\n   :alt: Hlavn\u00ed str\u00e1nka administra\u010dn\u00edho rozhran\u00ed\r\n\r\nUvid\u00edte \u0159\u00e1dky se skupinami, u\u017eivateli a weby, tj. z\u00e1kladn\u00edmi aplikacemi,\r\nkter\u00e9 p\u0159ich\u00e1z\u00ed spole\u010dn\u011b s Djangem.\r\n\r\nAdministrace anketn\u00ed aplikace\r\n=============================\r\n\r\nAle kdepak je na\u0161e anketn\u00ed aplikace? Na hlavn\u00ed str\u00e1nce nen\u00ed zobrazena...\r\n\r\nSta\u010d\u00ed ud\u011blat jedin\u00e9: \u0159\u00edct Django administraci, \u017ee m\u00e1 spravovat i objekty\r\n``Poll``. Vytvo\u0159te soubor s n\u00e1zvem ``admin.py`` ve va\u0161em adres\u00e1\u0159i\r\n``polls`` a upravte ho, aby vypadal asi takhle::\r\n\r\n    from mysite.polls.models import Poll\r\n    from django.contrib import admin\r\n\r\n    admin.site.register(Poll)\r\n\r\nRestartujte v\u00fdvojov\u00fd server, aby se zm\u011bny projevily. Oby\u010dejn\u011b server\r\nzm\u011bn\u011bn\u00fd k\u00f3d na\u010dte automaticky, ale vytvo\u0159en\u00ed nov\u00e9ho souboru tuto akci\r\nnevyvol\u00e1.\r\n\r\nProhl\u00eddka administrace\r\n======================\r\n\r\nTe\u010f, kdy\u017e jsme ``Poll`` zaregistrovali, Django aplikaci zobraz\u00ed na\r\nhlavn\u00ed str\u00e1nce administrace:\r\n\r\n.. image:: _images/admin03t.png\r\n   :alt: Hlavn\u00ed admin str\u00e1nka u\u017e zobrazuje i na\u0161i anketu\r\n\r\nKlikn\u011bte na \"Polls.\" Zobraz\u00ed se v\u00e1m seznam anket z datab\u00e1ze. Moment\u00e1ln\u011b\r\nm\u00e1me v datab\u00e1zi pouze anketu \"What's up?\", kterou jsme vytvo\u0159ili b\u011bhem\r\nprvn\u00ed \u010d\u00e1sti pr\u016fvodce:\r\n\r\n.. image:: _images/admin04t.png\r\n   :alt: Seznam anket, moment\u00e1ln\u011b s jedinou polo\u017ekou\r\n\r\nPokus\u00edme se anketu zm\u011bnit. Klikn\u011bte na \u0159\u00e1dek \"What's up?\":\r\n\r\n.. image:: _images/admin05t.png\r\n   :alt: Zm\u011bnov\u00fd formul\u00e1\u0159 pro objekt ankety\r\n\r\nZde si v\u0161imn\u011bte:\r\n\r\n    * Formul\u00e1\u0159 je automaticky vygenerov\u00e1n podle modelu.\r\n\r\n    * Jednotliv\u00e9 typy modelov\u00fdch pol\u00ed\r\n      (:class:`~django.db.models.DateTimeField`,\r\n      :class:`~django.db.models.CharField`) jsou p\u0159i\u0159azeny ke spr\u00e1vn\u00e9mu\r\n      HTML widgetu. Ka\u017ed\u00e9 pole v\u00ed, jak se m\u00e1 v administraci zobrazit.\r\n\r\n    * U ka\u017ed\u00e9ho pole typu :class:`~django.db.models.DateTimeField` se\r\n      zobraz\u00ed JavaScriptov\u00ed pomocn\u00edci: vedle pol\u00ed\u010dka s datumem se objev\u00ed\r\n      odkaz \"Today\" a kalend\u00e1\u0159, vedle \u010dasu odkaz \"Now\" se seznamem\r\n      nej\u010dast\u011bji zad\u00e1van\u00fdch \u010das\u016f.\r\n\r\nVe spodn\u00ed \u010d\u00e1sti str\u00e1nky je zobrazeno n\u011bkolik tla\u010d\u00edtek:\r\n\r\n    * Save (Ulo\u017eit) -- Ulo\u017e\u00ed zm\u011bny a vr\u00e1t\u00ed se na str\u00e1nku s p\u0159ehledem pro\r\n      tento typ objektu.\r\n\r\n    * Save and continue editing (Ulo\u017eit a pokra\u010dovat v \u00faprav\u00e1ch) --\r\n      Ulo\u017e\u00ed zm\u011bny a znovu na\u010dte administra\u010dn\u00ed str\u00e1nku pro \u00fapravy tohoto\r\n      objektu.\r\n\r\n    * Save and add another (Ulo\u017eit a p\u0159idat dal\u0161\u00ed) -- Ulo\u017e\u00ed zm\u011bny a\r\n      na\u010dte nov\u00fd, pr\u00e1zdn\u00fd formul\u00e1\u0159 pro tento typ objektu.\r\n\r\n    * Delete (Smazat) -- Zobraz\u00ed potvrzovac\u00ed str\u00e1nku pro smaz\u00e1n\u00ed.\r\n\r\nZm\u011b\u0148te hodnotu pole \"Date published\" kliknut\u00edm na odkazy \"Today\" a\r\n\"Now\". Pak objekt s pomoc\u00ed \"Save and continue editing\" ulo\u017ete. Klikn\u011bte\r\nna \"History\" vpravo naho\u0159e. Uvid\u00edte str\u00e1nku se seznamem v\u0161ech zm\u011bn\r\nproveden\u00fdch na tomto objektu prost\u0159ednictv\u00edm administra\u010dn\u00edho rozhran\u00ed,\r\nv\u010detn\u011b informace o \u010dase a u\u017eivateli:\r\n\r\n.. image:: _images/admin06t.png\r\n   :alt: Str\u00e1nka historie pro objekt ankety\r\n\r\n\u00daprava vzhledu administra\u010dn\u00edch formul\u00e1\u0159\u016f\r\n========================================\r\n\r\nNen\u00ed to b\u00e1je\u010dn\u00e9? Prost\u00fdm zavol\u00e1n\u00edm ``admin.site.register(Poll)`` Django\r\ndok\u00e1zalo zprovoznit zm\u011bnov\u00fd formul\u00e1\u0159 pro editaci objektu. Dok\u00e1\u017eete si\r\np\u0159edstavit tu hromadu k\u00f3du, kterou jste nemuseli ps\u00e1t? Vzhled\r\nformul\u00e1\u0159e Django odvodilo z definice modelu. Je ale docela mo\u017en\u00e9, \u017ee v\u00e1m\r\njeho podoba nevyhovuje. Na\u0161t\u011bst\u00ed m\u00e1me po ruce mechanismy, kter\u00fdmi m\u016f\u017eeme\r\nzobrazen\u00ed administra\u010dn\u00edch formul\u00e1\u0159u ovliv\u0148ovat.\r\n\r\nUka\u017eme si to na konkr\u00e9tn\u00edm p\u0159\u00edpad\u011b -- v edita\u010dn\u00edm formul\u00e1\u0159i prohod\u00edme\r\npo\u0159ad\u00ed pol\u00ed\u010dek. B\u011bhem registrace objektu nahrad\u00edme vol\u00e1n\u00ed\r\n``admin.site.register(Poll)`` za tyto \u0159\u00e1dky::\r\n\r\n    class PollAdmin(admin.ModelAdmin):\r\n        fields = ['pub_date', 'question']\r\n\r\n    admin.site.register(Poll, PollAdmin)\r\n\r\nPostup je jednoduch\u00fd -- vytvo\u0159\u00edme administr\u00e1torsk\u00fd objekt a p\u0159ed\u00e1me jej\r\njako druh\u00fd parametr p\u0159i vol\u00e1n\u00ed ``admin.site.register()``.\r\n\r\nUveden\u00e1 zm\u011bna se projev\u00ed prohozen\u00edm po\u0159ad\u00ed pol\u00ed \"Date published\" a\r\n\"Question\":\r\n\r\n.. image:: _images/admin07.png\r\n   :alt: Pole byla p\u0159ehozena\r\n\r\nTe\u010f to mo\u017en\u00e1 p\u016fsob\u00ed sm\u011b\u0161n\u011b (prohazovat dv\u011b pol\u00ed\u010dka), ale u model\u016f s\r\ndes\u00edtkami polo\u017eek je zm\u011bna po\u0159ad\u00ed d\u016fle\u017eit\u00fdm detailem z hlediska\r\npou\u017eitelnosti va\u0161\u00ed aplikace.\r\n\r\nA kdy\u017e u\u017e mluv\u00edme o formul\u00e1\u0159\u00edch s tucty pol\u00ed, mo\u017en\u00e1 budete cht\u00edt\r\nrozd\u011blit formul\u00e1\u0159 na n\u011bkolik skupin::\r\n\r\n    class PollAdmin(admin.ModelAdmin):\r\n        fieldsets = [\r\n            (None,               {'fields': ['question']}),\r\n            ('Date information', {'fields': ['pub_date']}),\r\n        ]\r\n\r\n    admin.site.register(Poll, PollAdmin)\r\n\r\nPrvn\u00ed prvek ka\u017ed\u00e9 n-tice ve ``fieldsets`` je titulek skupiny. Takhle\r\nbude v\u00e1\u0161 formul\u00e1\u0159 po zm\u011bn\u011b vypadat:\r\n\r\n.. image:: _images/admin08t.png\r\n   :alt: Formul\u00e1\u0159 m\u00e1 nyn\u00ed skupiny pol\u00ed\r\n\r\nKe ka\u017ed\u00e9mu poli m\u016f\u017eete p\u0159i\u0159adit libovolnou HTML t\u0159\u00eddu (class). Django\r\nnab\u00edz\u00ed t\u0159\u00eddu ``\"collapse\"``, kter\u00e1 ur\u010denou skupinu pol\u00ed zobraz\u00ed\r\nsbalenou. To se hod\u00ed v p\u0159\u00edpadech, kdy m\u00e1te dlouh\u00fd formul\u00e1\u0159 s v\u011bt\u0161\u00edm\r\npo\u010dtem pol\u00ed, kter\u00e9 se \u010dasto nepou\u017e\u00edvaj\u00ed::\r\n\r\n        class PollAdmin(admin.ModelAdmin):\r\n            fieldsets = [\r\n                (None,               {'fields': ['question']}),\r\n                ('Date information', {'fields': ['pub_date'], 'classes': ['collapse']}),\r\n            ]\r\n\r\n.. image:: _images/admin09.png\r\n   :alt: Skupina pol\u00ed je sbalen\u00e1\r\n\r\nP\u0159id\u00e1v\u00e1n\u00ed souvisej\u00edc\u00edch objekt\u016f\r\n===============================\r\n\r\nTak, administra\u010dn\u00ed rozhran\u00ed pro ``Anketu`` (``Poll``) m\u00e1me hotov\u00e9. Ale\r\nka\u017ed\u00e1 ``Anketa`` je slo\u017eena z n\u011bkolika ``Voleb`` (``Choices``) a ty se\r\nn\u00e1m v administra\u010dn\u00edm rozhran\u00ed je\u0161t\u011b nezobrazuj\u00ed.\r\n\r\nZat\u00edm.\r\n\r\nTento probl\u00e9m lze vy\u0159e\u0161it dv\u011bma zp\u016fsoby. Bu\u010f ``Volby`` zaregistrujeme\r\npodobn\u011b, jako jsme to ud\u011blali u ``Ankety``. \u0158e\u0161en\u00ed je jednoduch\u00e9::\r\n\r\n    from mysite.polls.models import Choice\r\n\r\n    admin.site.register(Choice)\r\n\r\nTe\u010f budou \"Volby\" dal\u0161\u00ed polo\u017ekou v administra\u010dn\u00edm rozhran\u00ed. Formul\u00e1\u0159 \"Add\r\nchoice\" bude vypadat asi takhle:\r\n\r\n.. image:: _images/admin10.png\r\n   :alt: Administra\u010dn\u00ed str\u00e1nka pro mo\u017enosti (Choices)\r\n\r\nV tomto formul\u00e1\u0159i je pole \"Poll\" zobrazeno jako \"selekt\u00edtko\". Django v\u00ed,\r\n\u017ee :class:`~django.db.models.ForeignKey` m\u00e1 b\u00fdt v administraci zobrazen\r\njako ``<select>`` box. Po rozbalen\u00ed zjist\u00edte, \u017ee m\u00e1me zat\u00edm definovanou\r\npouze jednu anketu.\r\n\r\nTak\u00e9 si v\u0161imn\u011bte zelen\u00e9ho symbolu plus (\"Add Another\", \u010desky \"P\u0159idat\r\ndal\u0161\u00ed\") vedle pol\u00ed\u010dka \"Poll\". Ka\u017ed\u00fd objekt, kter\u00fd se prost\u0159ednictv\u00edm\r\nvztahu ``ForeignKey`` odkazuje na jin\u00fd, dostane v administra\u010dn\u00edm\r\nrozhran\u00ed tuto volbu automaticky. Kdy\u017e na symbol kliknete, vysko\u010d\u00ed v\u00e1m\r\nokno s formul\u00e1\u0159em \"Add poll\". Pokud v tomto okn\u011b p\u0159id\u00e1te anketu a znovu\r\nkliknete na \"Save,\" Django ulo\u017e\u00ed anketu do datab\u00e1ze a dynamicky ji\r\nnastav\u00ed jako vybranou mo\u017enost ve formul\u00e1\u0159i \"Add choice\", na kter\u00fd se\r\npr\u00e1v\u011b d\u00edvate.\r\n\r\nP\u0159id\u00e1v\u00e1n\u00ed voleb \"Choices\" jde ale zrealizovat i efektivn\u011bji, u\u017e ve \r\nchv\u00edli vytv\u00e1\u0159en\u00ed ankety.\r\n\r\nOdstra\u0148te vol\u00e1n\u00ed ``register()`` pro model \"Choices\". Upravte registra\u010dn\u00ed\r\nk\u00f3d pro ``Poll``, aby vypadal takto::\r\n\r\n    class ChoiceInline(admin.StackedInline):\r\n        model = Choice\r\n        extra = 3\r\n\r\n    class PollAdmin(admin.ModelAdmin):\r\n        fieldsets = [\r\n            (None,               {'fields': ['question']}),\r\n            ('Date information', {'fields': ['pub_date'], 'classes': ['collapse']}),\r\n        ]\r\n        inlines = [ChoiceInline]\r\n\r\n    admin.site.register(Poll, PollAdmin)\r\n\r\nTento k\u00f3d Djangu \u0159\u00edk\u00e1: \"Volby (Choices) budou spravov\u00e1ny v administraci\r\npro Ankety (Poll). Pro spr\u00e1vu voleb zobraz 3 pole.\"\r\n\r\nNa\u010dt\u011bte si str\u00e1nku \"Add poll\" a pod\u00edvejte se, jak te\u010f vypad\u00e1:\r\n\r\n.. image:: _images/admin11t.png\r\n   :alt: Str\u00e1nka pro p\u0159id\u00e1n\u00ed ankety te\u010f obsahuje i volby (Choices)\r\n\r\nFunguje to n\u00e1sledovn\u011b: Na str\u00e1nce s anketou budou v\u017edy zobrazeny\r\n3 bloky pro zad\u00e1n\u00ed voleb (co\u017e je specifikov\u00e1no pomoc\u00ed ``extra``).\r\nPoka\u017ed\u00e9, kdy\u017e si zobraz\u00edte str\u00e1nku s editac\u00ed existuj\u00edc\u00edho objektu, budou\r\nna v\u00e1s \u010dekat t\u0159i nov\u00e1 pole pro zad\u00e1n\u00ed dal\u0161\u00edch voleb (i p\u0159esto, \u017ee anketa u\u017e\r\nn\u011bjak\u00e9 volby definov\u00e1ny m\u00e1).\r\n\r\nM\u00e1 to ale mal\u00fd h\u00e1\u010dek. Zobrazen\u00ed v\u0161ech pol\u00ed zabere na str\u00e1nce hodn\u011b\r\nm\u00edsta. Pro souvisej\u00edc\u00ed objekty Django na\u0161t\u011bst\u00ed nab\u00edz\u00ed i tabulkov\u00e9\r\nzobrazen\u00ed; sta\u010d\u00ed zm\u011bnit deklaraci ``ChoiceInline`` aby vypadala takhle::\r\n\r\n    class ChoiceInline(admin.TabularInline):\r\n        #...\r\n\r\nS pou\u017eit\u00edm ``TabularInline`` (nam\u00edsto ``StackedInline``), budou\r\nsouvisej\u00edc\u00ed objekty zobrazeny v kompaktn\u011bj\u0161\u00edm tabulkov\u00e9m form\u00e1tu:\r\n\r\n.. image:: _images/admin12.png\r\n   :alt: Str\u00e1nka pro p\u0159id\u00e1v\u00e1n\u00ed ankety je te\u010f kompaktn\u011bj\u0161\u00ed\r\n\r\nUpravte si v\u00fdpis objekt\u016f\r\n========================\r\n\r\nTe\u010f, kdy\u017e u\u017e administra\u010dn\u00ed str\u00e1nka pro ankety vypad\u00e1 dob\u0159e, poj\u010fme\r\nvyladit v\u00fdpis \"change list\" -- ten zobrazuje v\u0161echny ankety v syst\u00e9mu.\r\n\r\nJeho sou\u010dasn\u00e1 podoba je n\u00e1sleduj\u00edc\u00ed:\r\n\r\n.. image:: _images/admin04t.png\r\n   :alt: V\u00fdpis 'Change list' pro ankety\r\n\r\nVe v\u00fdchoz\u00edm nastaven\u00ed Django zobrazuje ``str()`` ka\u017ed\u00e9ho objektu.  N\u011bkdy\r\nby se ale hodilo, kdybychom vid\u011bli jednotliv\u00e1 pole modelu. Pro tento\r\n\u00fa\u010del pou\u017eijte mo\u017enost ``list_display`` se seznamem pol\u00ed,\r\nkter\u00e9 chcete ve sloupc\u00edch zobrazit::\r\n\r\n    class PollAdmin(admin.ModelAdmin):\r\n        # ...\r\n        list_display = ('question', 'pub_date')\r\n\r\nA je\u0161t\u011b jedna fajnovost -- p\u0159idejme u\u017eivatelskou metodu\r\n``was_published_today`` z prvn\u00ed \u010d\u00e1sti tohoto pr\u016fvodce::\r\n\r\n    class PollAdmin(admin.ModelAdmin):\r\n        # ...\r\n        list_display = ('question', 'pub_date', 'was_published_today')\r\n\r\nPo v\u0161ech t\u011bchto \u00faprav\u00e1ch bude v\u00fdpis change list pro ankety vypadat\r\ntakto:\r\n\r\n.. image:: _images/admin13t.png\r\n   :alt: Aktualizovan\u00fd Change list pro ankety\r\n\r\nKliknut\u00edm na z\u00e1hlav\u00ed sloupce se\u0159ad\u00edte objekty podle hodnot ve sloupci --\r\nkrom\u011b z\u00e1hlav\u00ed ``was_published_today``, proto\u017ee \u0159azen\u00ed podle v\u00fdstupu\r\nlibovoln\u00e9 metody nen\u00ed podporov\u00e1no. Tak\u00e9 si v\u0161imn\u011bte, \u017ee z\u00e1hlav\u00ed sloupce\r\n``was_published_today`` m\u00e1 ve v\u00fdchoz\u00edm nastaven\u00ed stejn\u00fd n\u00e1zev jako je\r\njm\u00e9no metody (podtr\u017e\u00edtka jsou nahrazena mezerami). Tohle m\u016f\u017eete zm\u011bnit\r\np\u0159id\u00e1n\u00edm atributu ``short_description`` (v souboru ``models.py``)::\r\n\r\n    def was_published_today(self):\r\n        return self.pub_date.date() == datetime.date.today()\r\n    was_published_today.short_description = 'Published today?'\r\n\r\nP\u0159idejme do change listu dal\u0161\u00ed vylep\u0161en\u00ed: filtry. Dopi\u0161te n\u00e1sleduj\u00edc\u00ed\r\n\u0159\u00e1dek do t\u0159\u00eddy ``PollAdmin``::\r\n\r\n    list_filter = ['pub_date']\r\n\r\nTato volba p\u0159id\u00e1 postran\u00ed li\u0161tu \"Filter\", kter\u00e1 umo\u017e\u0148uje filtrovat\r\nv\u00fdpis Change list podle hodnot pole ``pub_date``:\r\n\r\n.. image:: _images/admin14t.png\r\n   :alt: V\u00fdpis Change list pro ankety, tentokr\u00e1t v\u010detn\u011b filtru\r\n\r\nTyp zobrazen\u00e9ho filtru z\u00e1vis\u00ed na poli, podle kter\u00e9ho se m\u00e1 filtrovat.\r\nProto\u017ee ``pub_date`` je DateTimeField, Django v\u00ed, \u017ee m\u00e1 zobrazit volby\r\npro pole DateTimeField: \"Any date\" (Jak\u00e9koliv datum), \"Today\" (Dnes),\r\n\"Past 7 days\" (Posledn\u00edch 7 dn\u00ed),  \"This month\" (Tento m\u011bs\u00edc) a \"This\r\nyear\" (Tento rok).\r\n\r\nU\u017e se n\u00e1m ten admin za\u010d\u00edn\u00e1 p\u011bkn\u011b r\u00fdsovat, \u017ee? A to st\u00e1le nen\u00ed v\u0161e --\r\np\u0159idejme nyn\u00ed mo\u017enost vyhled\u00e1v\u00e1n\u00ed::\r\n\r\n    search_fields = ['question']\r\n\r\nUveden\u00e1 formule p\u0159id\u00e1 vyhled\u00e1vac\u00ed pol\u00ed\u010dko na za\u010d\u00e1tek str\u00e1nky. Kdy\u017e\r\nu\u017eivatel zad\u00e1 n\u011bjakou hodnotu, Django prohled\u00e1 pole ``question``. M\u016f\u017eete\r\npou\u017e\u00edt tolik pol\u00ed, kolik chcete -- i kdy\u017e, proto\u017ee se pro vyhled\u00e1v\u00e1n\u00ed\r\npou\u017e\u00edv\u00e1 dotaz ``LIKE``, zkuste to nep\u0159eh\u00e1n\u011bt, aby to va\u0161e datab\u00e1ze\r\nvydr\u017eela.\r\n\r\nA jsme u posledn\u00edho vylep\u0161en\u00ed: proto\u017ee objekty anket obsahuj\u00ed pole s\r\ndatumem, bude p\u011bkn\u00e9, kdy\u017e budeme moci ankety proch\u00e1zet podle data (nap\u0159.\r\n\"zobraz v\u0161echny ankety publikovan\u00e9 v listopadu 2008\"). Dopi\u0161te tento\r\n\u0159\u00e1dek::\r\n\r\n    date_hierarchy = 'pub_date'\r\n\r\nT\u00edmto zp\u016fsobem se na za\u010d\u00e1tek str\u00e1nky p\u0159id\u00e1 hierarchick\u00e1 navigace podle\r\ndata. Nejvy\u0161\u0161\u00ed \u00farove\u0148 zobrazuje v\u0161echny dostupn\u00e9 roky, v ni\u017e\u0161\u00edch pak\r\nm\u011bs\u00edce a jejich dny.\r\n\r\nNa konec je dobr\u00e9 poznamenat, \u017ee m\u016f\u017eete ovlivnit i str\u00e1nkov\u00e1n\u00ed v\u00fdpisu.\r\nV\u00fdchoz\u00ed nastaven\u00ed zobrazuje 50 objekt\u016f na jedn\u00e9 str\u00e1nce.\r\n\r\nUpravte si kompletn\u00ed vzhled prost\u0159ed\u00ed\r\n=====================================\r\n\r\nJe jasn\u00e9, \u017ee zobrazen\u00ed nadpisu \"Django administration\" na ka\u017ed\u00e9 str\u00e1nce\r\nadministra\u010dn\u00edho rozhran\u00ed je hrozn\u00e9. Tento text p\u0159\u00edmo vol\u00e1 po zm\u011bn\u011b.\r\n\r\nN\u00e1prava se d\u00e1 prov\u00e9st pom\u011brn\u011b jednodu\u0161e -- zm\u011bnou konkr\u00e9tn\u00ed \u0161ablony.\r\n\r\nOtev\u0159ete v\u00e1\u0161 soubor s nastaven\u00edm (``mysite/settings.py``, vzpom\u00edn\u00e1te?) a\r\npod\u00edvejte se na prom\u011bnnou :setting:`TEMPLATE_DIRS`.\r\n:setting:`TEMPLATE_DIRS` je seznam adres\u00e1\u0159\u016f, kter\u00e9 se p\u0159i na\u010d\u00edt\u00e1n\u00ed\r\n\u0161ablonov\u00e9ho syst\u00e9mu postupn\u011b proch\u00e1z\u00ed. Je to vyhled\u00e1vac\u00ed cesta.\r\n\r\nVe v\u00fdchoz\u00edm nastaven\u00ed je :setting:`TEMPLATE_DIRS` pr\u00e1zdn\u00e9. P\u0159idejme\r\ntam \u0159\u00e1dek, aby Django v\u011bd\u011blo, kde hledat na\u0161e \u0161ablony::\r\n\r\n    TEMPLATE_DIRS = (\r\n        \"/home/my_username/mytemplates\", # Nastavte na svuj adresar.\r\n    )\r\n\r\n\r\nZkop\u00edrujte \u0161ablonu ``admin/base_site.html`` ze zdrojov\u00fdch k\u00f3d\u016f Djanga\r\n(``django/contrib/admin/templates``) do podadres\u00e1\u0159e ``admin`` slo\u017eky,\r\nkterou jste nastavili ve volb\u011b :setting:`TEMPLATE_DIRS`. Nap\u0159\u00edklad,\r\npokud :setting:`TEMPLATE_DIRS` obsahuje\r\n``\"/home/my_username/mytemplates\"``, jak je uvedeno v\u00fd\u0161e, zkop\u00edrujte\r\n``django/contrib/admin/templates/admin/base_site.html`` do\r\n``/home/my_username/mytemplates/admin/base_site.html``. Nezapome\u0148te na\r\nten podadres\u00e1\u0159 ``admin``!\r\n\r\nPak u\u017e jenom upravte soubor a nahra\u010fte standardn\u00ed text n\u011b\u010d\u00edm, co se v\u00e1m\r\ntam hod\u00ed.\r\n\r\n\u0160ablona obsahuje spoustu na prvn\u00ed pohled mo\u017en\u00e1 nep\u0159ehledn\u00fdch v\u00fdraz\u016f. T\u0159eba\r\n`{% block branding %}`` nebo ``{{ title }}. V\u00fdrazy ``{%`` a ``{{`` jsou\r\nsou\u010d\u00e1st\u00ed \u0161ablonov\u00e9ho syst\u00e9mu, kter\u00e9 Django v tu pravou chv\u00edli p\u0159etav\u00ed do\r\nfin\u00e1ln\u00edho HTML k\u00f3du. Podrobnosti probereme v t\u0159et\u00ed \u010d\u00e1sti n\u00e1vodu.\r\n\r\nJak\u00e1koli v\u00fdchoz\u00ed \u0161ablona administra\u010dn\u00edho rozhran\u00ed m\u016f\u017ee b\u00fdt nahrazena.\r\nBudete postupovat stejn\u011b, jako tomu bylo u souboru ``base_site.html`` --\r\nzkop\u00edrujte \u0161ablonu z v\u00fdchoz\u00edho adres\u00e1\u0159e do va\u0161eho vlastn\u00edho adres\u00e1\u0159e a\r\ntam ji upravte dle libosti.\r\n\r\nMazan\u00ed \u010dten\u00e1\u0159i se zeptaj\u00ed: Ale pokud nastaven\u00ed :setting:`TEMPLATE_DIRS`\r\nbylo na za\u010d\u00e1tku pr\u00e1zdn\u00e9, jak Django na\u0161lo \u0161ablony? Odpov\u011bd je, \u017ee Django\r\nsi standardn\u011b ov\u011b\u0159\u00ed existenci podadres\u00e1\u0159e ``templates/`` v adres\u00e1\u0159i\r\nka\u017ed\u00e9 aplikace, pro p\u0159\u00edpad, kdyby u\u017eivatel \u017e\u00e1dn\u00e9 cesty k \u0161ablon\u00e1m\r\nnedefinoval. Dal\u0161\u00ed podrobnosti naleznete v :ref:`dokumentaci pro\r\ntemplate loader <template-loaders>`.\r\n\r\nUpravte si hlavn\u00ed str\u00e1nku administrace\r\n======================================\r\n\r\nKdy\u017e u\u017e jsme u toho, asi si budete cht\u00edt zm\u011bnit tak\u00e9 vzhled hlavn\u00ed\r\nstr\u00e1nky administrace.\r\n\r\nVe v\u00fdchoz\u00edm nastaven\u00ed zobrazuje v abecedn\u00edm po\u0159ad\u00ed v\u0161echny aplikace z\r\nprom\u011bnn\u00e9 :setting:`INSTALLED_APPS`, kter\u00e9 byly zaregistrovany do\r\nadministra\u010dn\u00edho rozhran\u00ed.  Mo\u017en\u00e1 budete cht\u00edt ud\u011blat v rozlo\u017een\u00ed str\u00e1nky\r\nv\u00fdznamn\u00e9 zm\u011bny. Hlavn\u00ed str\u00e1nka je p\u0159eci jen jednou z nejd\u016fle\u017eit\u011bj\u0161\u00edch a\r\nm\u011bla by se d\u00e1t jednodu\u0161e pou\u017e\u00edvat.\r\n\r\n\u0160ablona t\u00e9to str\u00e1nky je schovan\u00e1 v ``admin/index.html``.  (D\u011blejte to\r\nsam\u00e9 jako s ``admin/base_site.html`` v p\u0159edchoz\u00ed \u010d\u00e1sti -- zkop\u00edrujte ji\r\nz v\u00fdchoz\u00edho adres\u00e1\u0159e do u\u017eivatelsk\u00e9ho adres\u00e1\u0159e). Prozkoum\u00e1n\u00edm t\u00e9to\r\n\u0161ablony zjist\u00edte, \u017ee pou\u017e\u00edv\u00e1 \u0161ablonovou prom\u011bnnou ``app_list``.  Tato\r\nprom\u011bnn\u00e1 obsahuje ka\u017edou nainstalovanou Django aplikaci. M\u00edsto t\u00e9to\r\nprom\u011bnn\u00e9 m\u016f\u017eete ve sv\u00e9 \u0161ablon\u011b vytvo\u0159it \"tvrd\u00e9\" odkazy na administra\u010dn\u00ed\r\nstr\u00e1nky pro jednotliv\u00e9 objekty -- prost\u011b tak, jak v\u00e1m to bude vyhovovat.\r\nPokud nerozum\u00edte, nezoufejte. Jak u\u017e bylo zm\u00edn\u011bno, podrobnosti probereme v\r\nt\u0159et\u00ed \u010d\u00e1sti n\u00e1vodu.\r\n\r\nA\u017e budete se sv\u00fdm administra\u010dn\u00edm rozhran\u00edm spokojeni, p\u0159e\u010dt\u011bte si\r\n:ref:`t\u0159et\u00ed \u010d\u00e1st tohoto n\u00e1vodu <intro-tutorial03>` a za\u010dn\u011bte pracovat na\r\nve\u0159ejn\u00fdch views (pohledech) pro ankety.", 
            "revision": 12710
        }
    }, 
    {
        "pk": 6, 
        "model": "translations.translation", 
        "fields": {
            "flat_page": null, 
            "updated": "2010-08-16 22:33:35", 
            "created": "2008-12-30 08:38:18", 
            "source_path": "/home/michal/projects/www/djangoproject.cz/docs/intro/tutorial03.txt", 
            "content": ".. _intro-tutorial03:\r\n\r\n===============================\r\nPrvn\u00ed aplikace v Djangu, \u010d\u00e1st 3\r\n===============================\r\n\r\nTento n\u00e1vod za\u010d\u00edn\u00e1 tam, kde kde skon\u010dila :ref:`druh\u00e1 \u010d\u00e1st uk\u00e1zkov\u00e9\r\naplikace <intro-tutorial02>`. Budeme pokra\u010dovat v na\u0161\u00ed webov\u00e9 anketn\u00ed\r\naplikaci a zam\u011b\u0159\u00edme se na jej\u00ed ve\u0159ejnou \u010d\u00e1st -- \"views\" (pohledy).\r\n\r\nFilozofie\r\n=========\r\n\r\nView je \"druh\" webov\u00e9 str\u00e1nky, kter\u00e1 m\u00e1 ve va\u0161\u00ed aplikaci ur\u010dit\u00fd \u00fakol a\r\nv\u00fdsledek sv\u00e9 \u010dinnosti prezentuje prost\u0159ednictv\u00edm \u0161ablony. Nap\u0159\u00edklad, v\r\nblogovac\u00ed aplikaci by jste mohli naj\u00edt tato views:\r\n\r\n    * \u00davodn\u00ed str\u00e1nka blogu -- zobrazuje n\u011bkolik posledn\u00edch z\u00e1znam\u016f.\r\n    \r\n    * Str\u00e1nka s detailem z\u00e1znamu  -- str\u00e1nka s pevnou adresou\r\n      (permalinkem) pro konkr\u00e9tn\u00ed z\u00e1znam.\r\n    \r\n    * Archiv pro rok -- zobraz\u00ed v\u0161echny m\u011bs\u00edce roku s po\u010dtem z\u00e1znam\u016f pro\r\n      ka\u017ed\u00fd z nich.\r\n      \r\n    * Archiv pro m\u011bs\u00edc -- zobraz\u00ed v\u0161echny dny m\u011bs\u00edce s po\u010dty z\u00e1znam\u016f pro\r\n      ka\u017ed\u00fd z nich.\r\n      \r\n    * Archiv pro den -- zobraz\u00ed v\u0161echny z\u00e1znamy pro zadan\u00fd den.\r\n    \r\n    * Koment\u00e1\u0159 -- zpracuje odesl\u00e1n\u00ed koment\u00e1\u0159e ke konkr\u00e9tn\u00edmu z\u00e1znamu.\r\n\r\nV na\u0161\u00ed anketn\u00ed aplikaci budeme m\u00edt tyto \u010dty\u0159i views:\r\n\r\n    * Archiv anket -- zobraz\u00ed n\u011bkolik posledn\u00edch anket.\r\n    \r\n    * Detail ankety -- zobraz\u00ed anketn\u00ed ot\u00e1zku bez v\u00fdsledk\u016f, ale s\r\n      formul\u00e1\u0159em pro hlasov\u00e1n\u00ed.\r\n    \r\n    * Str\u00e1nka s v\u00fdsledky -- zobraz\u00ed v\u00fdsledky pro ur\u010ditou anketu.\r\n    \r\n    * Hlasov\u00e1n\u00ed -- zpracuje hlasov\u00e1n\u00ed pro konkr\u00e9tn\u00ed volbu v anket\u011b.\r\n\r\nV Djangu je ka\u017ed\u00e9 view zrealizov\u00e1no jednoduchou funkc\u00ed v Pythonu.\r\n\r\nVytvo\u0159te si svoje URL\r\n=====================\r\n\r\nPrvn\u00ed krokem p\u0159i psan\u00ed views je definov\u00e1n\u00ed struktury URL adres. Toho\r\ndoc\u00edl\u00edme vytvo\u0159en\u00edm jednoduch\u00e9ho Python modulu naz\u00fdvan\u00e9ho URLconf.\r\nSoubory URLconf se staraj\u00ed o p\u0159i\u0159azen\u00ed URL adresy k ur\u010dit\u00e9mu k\u00f3du.\r\n\r\nKdy\u017e si u\u017eivatel vy\u017e\u00e1d\u00e1 konkr\u00e9tn\u00ed str\u00e1nku, Django se pod\u00edv\u00e1 do nastaven\u00ed\r\n:setting:`ROOT_URLCONF`, kter\u00e9 obsahuje \u0159et\u011bzec zapsan\u00fd v te\u010dkovan\u00e9\r\nsyntaxi Pythonu. Django tento modul na\u010dte a hled\u00e1 v n\u011bm prom\u011bnnou\r\n``urlpatterns``, co\u017e je sekvence n-tic ve form\u00e1tu::\r\n\r\n    (regul\u00e1rn\u00ed v\u00fdraz, Python callback funkce [, nepovinn\u00fd slovn\u00edk])\r\n\r\nDjango za\u010dne s prvn\u00edm regul\u00e1rn\u00edm v\u00fdrazem a postupn\u011b porovn\u00e1v\u00e1 vy\u017e\u00e1danou\r\nURL adresu se v\u0161emi dal\u0161\u00edmi v\u00fdrazy v seznamu, dokud nenajde shodu.\r\n\r\nKdy\u017e je shoda nalezena, Django zavol\u00e1 Python callback funkci, a jako\r\nprvn\u00ed argument p\u0159ed\u00e1 objekt :class:`~django.http.HttpRequest`. Ve\u0161ker\u00e9\r\n\"zachycen\u00e9\" hodnoty z regul\u00e1rn\u00edho v\u00fdrazu p\u0159ed\u00e1 jako jako keyword\r\nargumenty (spole\u010dn\u011b s prom\u011bnn\u00fdmi z nepovinn\u00e9ho slovn\u00edku -- pokud byly\r\nn\u011bjak\u00e9 definov\u00e1ny; viz t\u0159et\u00ed polo\u017eka v urlpatterns).\r\n\r\nPodrobn\u011bj\u0161\u00ed informace o objektech :class:`~django.http.HttpRequest`\r\nnaleznete v :ref:`ref-request-response`, detaily o souborech\r\nURLconf v :ref:`topics-http-urls`.\r\n\r\nKdy\u017e jste na za\u010d\u00e1tku prvn\u00edho n\u00e1vodu spou\u0161t\u011bli ``django-admin.py\r\nstartproject mysite``, vytvo\u0159il se v\u00fdchoz\u00ed URLconf v ``mysite/urls.py``.\r\nVolba :setting:`ROOT_URLCONF` (v ``settings.py``) byla automaticky\r\nnastavena tak, aby ukazovala pr\u00e1v\u011b na tento soubor::\r\n\r\n    ROOT_URLCONF = 'mysite.urls'\r\n\r\nUpravte nyn\u00ed ``mysite/urls.py``::\r\n\r\n    from django.conf.urls.defaults import *\r\n\r\n    from django.contrib import admin \r\n \tadmin.autodiscover() \r\n\r\n    urlpatterns = patterns('',\r\n        (r'^polls/$', 'mysite.polls.views.index'),\r\n        (r'^polls/(?P<poll_id>\\d+)/$', 'mysite.polls.views.detail'),\r\n        (r'^polls/(?P<poll_id>\\d+)/results/$', 'mysite.polls.views.results'),\r\n        (r'^polls/(?P<poll_id>\\d+)/vote/$', 'mysite.polls.views.vote'),\r\n        (r'^admin/', include(admin.site.urls)), \r\n    )\r\n\r\nRozeberme si \u00fapravu podrobn\u011bji. Kdy\u017e si n\u011bkdo vy\u017e\u00e1d\u00e1 va\u0161i str\u00e1nku\r\n-- \u0159ekn\u011bme \"/polls/23/\", Django na\u010dte tento modul, proto\u017ee na n\u011bj\r\nukazuje volba :setting:`ROOT_URLCONF`. Hled\u00e1 prom\u011bnnou s n\u00e1zvem\r\n``urlpatterns`` a proch\u00e1z\u00ed po po\u0159\u00e1dku regul\u00e1rn\u00ed v\u00fdrazy. Kdy\u017e najde\r\nshoduj\u00edc\u00ed se regul\u00e1rn\u00ed v\u00fdraz -- ``r'^polls/(?P<poll_id>\\d+)/$'`` --\r\ntak na\u010dte p\u0159i\u0159azen\u00fd bal\u00ed\u010dek/modul: ``mysite.polls.views.detail``. To\r\nodpov\u00edd\u00e1 funkci ``detail()`` v ``mysite/polls/views.py``. Nakonec funkci\r\n``detail()`` zavol\u00e1 t\u00edmto zp\u016fsobem::\r\n\r\n    detail(request=<HttpRequest object>, poll_id='23')\r\n\r\n\u010c\u00e1st ``poll_id='23'`` p\u0159ich\u00e1z\u00ed z pravidla ``(?P<poll_id>\\d+)``. Kulat\u00e9\r\nz\u00e1vorky \"zachyt\u00ed\" text ze shoduj\u00edc\u00edho se v\u00fdrazu a po\u0161lou jej jako\r\nargument do view funkce; ``?P<poll_id>`` definuje n\u00e1zev, kter\u00fdm se\r\nzachycen\u00e1 \u010d\u00e1st pojmenuje; a ``\\d+`` je regul\u00e1rn\u00ed v\u00fdraz pro sekvenci\r\n\u010d\u00edslic (\u010d\u00edslo).\r\n\r\nProto\u017ee URL pravidla jsou definov\u00e1na za pomoc\u00ed regul\u00e1rn\u00edch v\u00fdraz\u016f,\r\nm\u016f\u017eete s jejich pomoc\u00ed d\u011blat t\u00e9m\u011b\u0159 cokoliv. S klidem zapome\u0148te\r\nna ty hromady adres kon\u010d\u00edc\u00edch v\u00fdrazem ``.php`` -- pokud ov\u0161em nem\u00e1te\r\n\u0161patn\u00fd smysl pro humor; v tom p\u0159\u00edpad\u011b by jste mohli napsat n\u011bco jako::\r\n\r\n    (r'^polls/latest\\.php$', 'mysite.polls.views.index'),\r\n\r\nAle ned\u011blejte to. Je to hloup\u00e9.\r\n\r\nPamatujte, \u017ee tyto regul\u00e1rn\u00ed v\u00fdrazy neprohled\u00e1vaj\u00ed parametry GET, POST,\r\na ani n\u00e1zvy dom\u00e9n. Nap\u0159\u00edklad, p\u0159i po\u017eadavku na\r\n``http://www.example.com/myapp/``, bude URLconf hledat pravidlo pro\r\n``myapp/``. P\u0159i po\u017eadavku na ``http://www.example.com/myapp/?page=3``,\r\nbude op\u011bt hledat ``myapp/``.\r\n\r\nPokud pot\u0159ebujete pomoc s regul\u00e1rn\u00edmi v\u00fdrazy, pod\u00edvejte se do\r\n`Wikipedie`_ a `dokumentace Pythonu`_. Tak\u00e9 kniha O'Reilly \"Mastering\r\nRegular Expressions\" od Jeffreyho Friedla je fantastick\u00e1.\r\n\r\nNakonec pozn\u00e1mka k v\u00fdkonu: regul\u00e1rn\u00ed v\u00fdrazy jsou kompilov\u00e1ny pouze p\u0159i\r\nprvn\u00edm spu\u0161t\u011bn\u00ed URLconf. Jsou b\u00e1je\u010dn\u011b rychl\u00e9.\r\n\r\n.. _Wikipedie: http://en.wikipedia.org/wiki/Regular_expression\r\n.. _dokumentace Pythonu: http://docs.python.org/library/re.html\r\n\r\nNapi\u0161te sv\u00e9 prvn\u00ed view\r\n======================\r\n\r\nZat\u00edm jsme \u017e\u00e1dn\u00e9 view nevytvo\u0159ili -- definovali jsme pouze seznam \r\npravidel v souboru URLconf. Poj\u010fme se p\u0159esv\u011bd\u010dit, \u017ee Django \r\nna obsah souboru URLconf spr\u00e1vn\u011b reaguje.\r\n\r\nSpus\u0165te v\u00fdvojov\u00fd server Djanga:\r\n\r\n.. code-block:: bash\r\n\r\n    python manage.py runserver\r\n\r\nVe va\u0161em webov\u00e9m prohl\u00ed\u017ee\u010di nav\u0161tivte adresu\r\n\"http://localhost:8000/polls/\". M\u011bla by se V\u00e1m zobrazit p\u0159\u00edtuln\u011b\r\nnamodral\u00e1 chybov\u00e1 str\u00e1nka s n\u00e1sleduj\u00edc\u00ed zpr\u00e1vou::\r\n\r\n    ViewDoesNotExist at /polls/\r\n\r\n    Tried index in module mysite.polls.views. Error was: 'module'\r\n    object has no attribute 'index'\r\n\r\nUveden\u00e1 chyba nastala kv\u016fli tomu, \u017ee jsme je\u0161t\u011b nevytvo\u0159ili funkci\r\n``index()`` v modulu ``mysite/polls/views.py``.\r\n\r\nZkuste nav\u0161\u00edvit i adresy \"/polls/23/\", \"/polls/23/results/\" a\r\n\"/polls/23/vote/\". Chybov\u00e9 zpr\u00e1vy v\u00e1m \u0159eknou, kter\u00e9 views se Django\r\npoukou\u0161elo naj\u00edt (a nena\u0161lo, proto\u017ee je\u0161t\u011b nejsou naps\u00e1ny).\r\n\r\nJe na \u010dase napsat prvn\u00ed view. Otev\u0159ete soubor ``mysite/polls/views.py``\r\na vlo\u017ete do n\u011bj n\u00e1sleduj\u00edc\u00ed Python k\u00f3d::\r\n\r\n    from django.http import HttpResponse\r\n\r\n    def index(request):\r\n        return HttpResponse(\"Hello, world. You're at the poll index.\")\r\n\r\nToto je nejjednodu\u0161\u0161\u00ed mo\u017en\u00e9 view. Nav\u0161tivte v prohl\u00ed\u017ee\u010di adresu\r\n\"/polls/\" a m\u011bli by jste uvid\u011bt v\u00fd\u0161e uveden\u00fd text.\r\n\r\nPoj\u010fme napsat dal\u0161\u00ed views. Jsou tro\u0161ku jin\u00e1, proto\u017ee p\u0159ij\u00edmaj\u00ed argument\r\n(kter\u00fd je p\u0159ijat z adresy pomoc\u00ed regul\u00e1rn\u00edho v\u00fdrazu definovan\u00e9ho v\r\nsouboru URLconf)::\r\n\r\n    def detail(request, poll_id): \r\n        return HttpResponse(\"You're looking at poll %s.\" % poll_id) \r\n                                                                                    \r\n    def results(request, poll_id): \r\n        return HttpResponse(\"You're looking at the results of poll %s.\" % poll_id) \r\n \r\n    def vote(request, poll_id): \r\n        return HttpResponse(\"You're voting on poll %s.\" % poll_id) \r\n\r\nPod\u00edvejte se na \"/polls/34/\". Na str\u00e1nce se v\u00e1m zobraz\u00ed takov\u00e9 ID, jak\u00e9\r\n\r\n\r\nPod\u00edvejte se na \"/polls/34/\". Nav\u0161t\u00edven\u00edm t\u00e9to adresy dojde ke spu\u0161t\u011bn\u00ed\r\nfunkce `detail()` a zobrazen\u00ed ID, kter\u00e9 zad\u00e1te v URL. Zkuste nav\u0161t\u00edvit\r\ni dal\u0161\u00ed adresy \"/polls/34/results/\" a \"/polls/34/vote/\" -- uk\u00e1\u017eou se \r\nv\u00e1m str\u00e1nky s v\u00fdsledky a hlasov\u00e1n\u00edm.\r\n\r\nNapi\u0161te views, kter\u00e9 opravdu n\u011bco d\u011blaj\u00ed\r\n========================================\r\n\r\nKa\u017ed\u00e9 view je zodpov\u011bdn\u00e9 za jednu ze dvou v\u011bc\u00ed: vr\u00e1cen\u00ed objektu\r\n:class:`~django.http.HttpResponse` obsahuj\u00edc\u00edho vy\u017e\u00e1danou str\u00e1nku, nebo\r\nvyvol\u00e1n\u00ed vyj\u00edmky, nap\u0159. :exc:`~django.http.Http404`. Zbytek je na v\u00e1s.\r\n\r\nVa\u0161e view m\u016f\u017ee \u010d\u00edst z\u00e1znamy z datab\u00e1ze, nebo tak\u00e9 ne. M\u016f\u017ee pou\u017e\u00edvat\r\n\u0161ablonov\u00fd syst\u00e9m Djanga -- nebo \u0161ablonov\u00fd syst\u00e9m t\u0159et\u00edch stran napsan\u00fd v\r\nPythonu -- nebo tak\u00e9 nemus\u00ed pou\u017e\u00edvat \u017e\u00e1dn\u00fd. M\u016f\u017ee vytv\u00e1\u0159et PDF soubor,\r\nvypisovat XML, vytv\u00e1\u0159et za chodu soubory ZIP, cokoli budete cht\u00edt, za\r\npou\u017eit\u00ed jak\u00fdchkoliv Python knihoven.\r\n\r\nJedin\u00e9, co Django chce, je :class:`~django.http.HttpResponse`. Nebo\r\nvyj\u00edmku.\r\n\r\nProto\u017ee jde o b\u011b\u017enou praxi, vyu\u017eijeme nyn\u00ed datab\u00e1zov\u00e9 API Djanga, kter\u00e9\r\njsme probrali v :ref:`prvn\u00ed \u010d\u00e1sti  <intro-tutorial01>`. N\u00e1sleduj\u00edc\u00ed view\r\n``index()`` zobraz\u00ed posledn\u00edch p\u011bt ot\u00e1zek z anket, odd\u011blen\u00fdch \u010d\u00e1rkami a\r\nse\u0159azen\u00fdch podle data publikov\u00e1n\u00ed::\r\n\r\n    from mysite.polls.models import Poll\r\n    from django.http import HttpResponse\r\n\r\n    def index(request):\r\n        latest_poll_list = Poll.objects.all().order_by('-pub_date')[:5]\r\n        output = ', '.join([p.question for p in latest_poll_list])\r\n        return HttpResponse(output)\r\n\r\nToto \u0159e\u0161en\u00ed m\u00e1 ale jeden probl\u00e9m: Vzhled str\u00e1nky je \"zadr\u00e1tovan\u00fd\" p\u0159\u00edmo\r\ndo k\u00f3du view. Kdy\u017e budete cht\u00edt zm\u011bnit podobu str\u00e1nky, budete muset\r\nupravovat Python k\u00f3d. Lep\u0161\u00edm \u0159e\u0161en\u00edm je odd\u011blit vzhled od\r\nk\u00f3du s pomoc\u00ed \u0161ablonov\u00e9ho syst\u00e9mu Djanga::\r\n\r\n    from django.template import Context, loader\r\n    from mysite.polls.models import Poll\r\n    from django.http import HttpResponse\r\n\r\n    def index(request):\r\n        latest_poll_list = Poll.objects.all().order_by('-pub_date')[:5]\r\n        t = loader.get_template('polls/index.html')\r\n        c = Context({\r\n            'latest_poll_list': latest_poll_list,\r\n        })\r\n        return HttpResponse(t.render(c))\r\n\r\nTento k\u00f3d na\u010dte \u0161ablonu nazvanou \"polls/index.html\" a p\u0159ed\u00e1 j\u00ed kontext,\r\nco\u017e je slovn\u00edk, kter\u00fd mapuje \u0161ablonov\u00e9 prom\u011bnn\u00e9 na objekty Pythonu.\r\n\r\nZnovu ve sv\u00e9m prohl\u00ed\u017ee\u010di na\u010dt\u011bte str\u00e1nku. Chybov\u00e1 hl\u00e1\u0161ka se zm\u011bn\u00ed::\r\n\r\n    TemplateDoesNotExist at /polls/\r\n    polls/index.html\r\n\r\nAha. Je\u0161t\u011b jsme nenapsali \u0161ablonu! Poj\u010fme tedy na to. Nejprve vytvo\u0159te\r\nadres\u00e1\u0159, kam bude m\u00edt Django p\u0159\u00edstup. (Django b\u011b\u017e\u00ed pod u\u017eivatelsk\u00fdm\r\njm\u00e9nem va\u0161eho serveru.) Ned\u00e1vejte jej ale p\u0159\u00edmo pod ko\u0159enov\u00fd adres\u00e1\u0159\r\nwebov\u00e9ho serveru. Nen\u00ed dobr\u00e9 zp\u0159\u00edstup\u0148ovat \u0161ablony ve\u0159ejnosti. Kdy\u017e u\u017e\r\npro nic jin\u00e9ho, tak pro pocit v\u011bt\u0161\u00ed bezpe\u010dnosti va\u0161\u00ed aplikace. Upravte\r\n:setting:`TEMPLATE_DIRS` v souboru ``settings.py`` tak, aby Django\r\nv\u011bd\u011blo, kde m\u00e1 hledat \u0161ablony -- stejn\u011b jako jste to ud\u011blali v druh\u00e9\r\n\u010d\u00e1sti n\u00e1vodu (viz kapitola \"Upravte si kompletn\u00ed vzhled prost\u0159ed\u00ed\").\r\n\r\nD\u00e1le vytvo\u0159te podadres\u00e1\u0159 ``polls`` a um\u00edst\u011bte do n\u011bj soubor\r\n``index.html``. Pozn\u00e1mka: v\u00fd\u0161e uveden\u00fd k\u00f3d\r\n``loader.get_template('polls/index.html')`` je nasm\u011brov\u00e1n na\r\n\"[template_directory]/polls/index.html\".\r\n\r\nDo \u0161ablony vlo\u017ete n\u00e1sleduj\u00edc\u00ed:\r\n\r\n.. code-block:: html+django\r\n\r\n    {% if latest_poll_list %}\r\n        <ul>\r\n        {% for poll in latest_poll_list %}\r\n            <li><a href=\"/polls/{{ poll.id }}/\">{{ poll.question }}</a></li> \r\n        {% endfor %}\r\n        </ul>\r\n    {% else %}\r\n        <p>No polls are available.</p>\r\n    {% endif %}\r\n\r\nNa\u010dt\u011bte znovu str\u00e1nku ve sv\u00e9m prohl\u00ed\u017ee\u010di a uvid\u00edte seznam s\r\nodr\u00e1\u017ekami obsahuj\u00edc\u00ed anketu \"What's up\" z prvn\u00ed \u010d\u00e1sti n\u00e1vodu.\r\nJednotliv\u00e9 odkazy povedou na str\u00e1nku s detailem ankety.\r\n\r\n\r\nZjednodu\u0161en\u00ed: render_to_response()\r\n----------------------------------\r\n\r\nB\u011b\u017en\u00fd postup je na\u010d\u00edst \u0161ablonu, naplnit kontext a vr\u00e1tit objekt\r\n:class:`~django.http.HttpResponse` s vykreslen\u00fdm obsahem \u0161ablony. Django\r\npro tyto p\u0159\u00edpady nab\u00edz\u00ed praktickou zkratku::\r\n\r\n    from django.shortcuts import render_to_response\r\n    from mysite.polls.models import Poll\r\n\r\n    def index(request):\r\n        latest_poll_list = Poll.objects.all().order_by('-pub_date')[:5]\r\n        return render_to_response('polls/index.html', {'latest_poll_list': latest_poll_list})\r\n\r\nPozn\u00e1mka: Pokud takto uprav\u00edme v\u0161echna view, u\u017e nemus\u00edme importovat\r\n:mod:`~django.template.loader`, :class:`~django.template.Context` a\r\n:class:`~django.http.HttpResponse`.\r\n\r\nFunkce :func:`~django.shortcuts.render_to_response` p\u0159ij\u00edm\u00e1 jako prvn\u00ed\r\nargument jm\u00e9no \u0161ablony a jako druh\u00fd (nepovinn\u00fd) argument slovn\u00edk.\r\nV\u00fdstupem z funkce je objekt :class:`~django.http.HttpResponse` s\r\n\u0161ablonou vykreslenou podle dodan\u00fdch kontextov\u00fdch prom\u011bnn\u00fdch.\r\n\r\nVyvol\u00e1n\u00ed 404\r\n============\r\n\r\nTe\u010f se pod\u00edv\u00e1me na view pro detail ankety -- str\u00e1nku, kter\u00e1 zobrazuje\r\not\u00e1zku dan\u00e9 ankety::\r\n\r\n    from django.http import Http404\r\n    # ...\r\n    def detail(request, poll_id):\r\n        try:\r\n            p = Poll.objects.get(pk=poll_id)\r\n        except Poll.DoesNotExist:\r\n            raise Http404\r\n        return render_to_response('polls/detail.html', {'poll': p})\r\n\r\nTady je k\u00f3d zrealizov\u00e1n n\u00e1sledovn\u011b: view vyvol\u00e1 v\u00fdj\u00edmku\r\n:exc:`~django.http.Http404`, pokud anketa s po\u017eadovan\u00fdm ID neexistuje.\r\n\r\nZa chv\u00edli se budeme podrobn\u011bji v\u011bnovat tomu, \u010d\u00edm naplnit soubor\r\n``polls/detail.html``, aby na\u0161e view p\u011bkn\u011b fungovalo. Pokud jej ale\r\nchcete rychle zprovoznit, vlo\u017ete do n\u011bj::\r\n\r\n    {{ poll }} \r\n\r\n(pro tentokr\u00e1t to sta\u010d\u00ed).\r\n\r\nZkratka: get_object_or_404()\r\n----------------------------\r\n\r\nB\u011b\u017en\u00fd postupem je vyt\u00e1hnout objekt z datab\u00e1ze pomoc\u00ed vol\u00e1n\u00ed\r\n:meth:`~django.db.models.QuerySet.get`, a v p\u0159\u00edpad\u011b \u017ee neexistuje\r\nvyvolat vyj\u00edmku :exc:`~django.http.Http404`. Django nab\u00edz\u00ed p\u0159\u00edjemnou\r\nzkratku::\r\n\r\n    from django.shortcuts import render_to_response, get_object_or_404\r\n    # ...\r\n    def detail(request, poll_id):\r\n        p = get_object_or_404(Poll, pk=poll_id)\r\n        return render_to_response('polls/detail.html', {'poll': p})\r\n\r\nFunkce :func:`~django.shortcuts.get_object_or_404` p\u0159ij\u00edm\u00e1 jako prvn\u00ed\r\nargument model Djanga, a na dal\u0161\u00edch pozic\u00edch libovoln\u00fd po\u010det argument\u016f ,\r\nkter\u00e9 se p\u0159edaj\u00ed funkci :meth:`~django.db.models.QuerySet.get`. Pokud se\r\npodle dodan\u00fdch parametr\u016f objekt nenalezne, vyvol\u00e1 se vyj\u00edmka\r\n:exc:`~django.http.Http404`.\r\n\r\n.. admonition:: Zamy\u0161len\u00ed\r\n\r\n    Pro\u010d pou\u017e\u00edv\u00e1me pomocnou funkci\r\n    :func:`~django.shortcuts.get_object_or_404` nam\u00edsto automatick\u00e9ho\r\n    zachyt\u00e1v\u00e1n\u00ed vyj\u00edmek\r\n    :exc:`~django.core.exceptions.ObjectDoesNotExist` na vy\u0161\u0161\u00ed \u00farovni,\r\n    anebo pro\u010d model rovnou nevyvol\u00e1 vyj\u00edmku :exc:`~django.http.Http404` \r\n    nam\u00edsto :exc:`~django.core.exceptions.ObjectDoesNotExist`?\r\n\r\n    Proto\u017ee by se vrstva modelu a pohledu (views) propojila vazbou.\r\n    Jedn\u00edm z hlavn\u00edch c\u00edl\u016f Djanga je udr\u017eovat podobn\u00e9 vazby co\r\n    nejslab\u0161\u00ed (proto\u017ee pak je mnohem snadn\u011bj\u0161\u00ed nahradit ur\u010ditou funk\u010dn\u00ed\r\n    \u010d\u00e1st jinou).\r\n\r\nExistuje tak\u00e9 funkce :func:`~django.shortcuts.get_list_or_404`, kter\u00e1\r\nfunguje stejn\u011b jako :func:`~django.shortcuts.get_object_or_404` -- s t\u00edm\r\nrozd\u00edlem, \u017ee pou\u017e\u00edv\u00e1 metodu :meth:`~django.db.models.QuerySet.filter`\r\nnam\u00edsto :meth:`~django.db.models.QuerySet.get`. Funkce\r\n:func:`~django.shortcuts.get_list_or_404` vyvol\u00e1 vyj\u00edmku\r\n:exc:`~django.http.Http404` pokud je seznam pr\u00e1zdn\u00fd.\r\n\r\nNapi\u0161te view pro 404 (str\u00e1nka nenalezena)\r\n=========================================\r\n\r\nKdy\u017e je vyvol\u00e1no :exc:`~django.http.Http404`, Django na\u010dte speci\u00e1ln\u00ed\r\nview ur\u010den\u00e9 pro zpracov\u00e1v\u00e1n\u00ed vyj\u00edmek 404. Toto view se hled\u00e1 v prom\u011bnn\u00e9\r\n``handler404``, co\u017e je \u0159et\u011bzec v te\u010dkovan\u00e9 syntaxi Pythonu -- ve stejn\u00e9m\r\nform\u00e1tu jak\u00fd pou\u017e\u00edvaj\u00ed URLconf callback funkce. Na view 404 nen\u00ed nic\r\nzvl\u00e1\u0161tn\u00edho: Je to prachoby\u010dejn\u00e9 view.\r\n\r\nPsan\u00edm view pro 404 se b\u011b\u017en\u011b nemus\u00edte zab\u00fdvat. Soubory URLconf standardn\u011b \r\nza\u010d\u00ednaj\u00ed \u0159\u00e1dkem::\r\n\r\n    from django.conf.urls.defaults import *\r\n\r\nT\u00edmto zp\u016fsobem dojde automaticky k nastaven\u00ed ``handler404``.  Jak se\r\nm\u016f\u017eete sami p\u0159esv\u011bd\u010dit, v souboru ``django/conf/urls/defaults.py`` je\r\n``handler404`` standardn\u011b nastaven na\r\n:func:`django.views.defaults.page_not_found`.\r\n\r\nPosledn\u00ed \u010dty\u0159i pozn\u00e1mky k view 404:\r\n\r\n    * Pokud je :setting:`DEBUG` nastaveno na ``True`` (v souboru ``settings.py``),\r\n      pak va\u0161e view 404 nebude nikdy pou\u017eito (a \u0161ablona ``404.html`` nebude nikdy\r\n      vykreslena). M\u00edsto n\u011bj se v\u00e1m uk\u00e1\u017ee \"traceback\".\r\n\r\n    * Pokud Django nenajde shodu s regul\u00e1rn\u00edmi v\u00fdrazy v souboru URLconf,\r\n      je vyvol\u00e1no view 404.\r\n      \r\n    * Pokud nedefinujete vlastn\u00ed view pro 404 -- a pou\u017eijete \r\n      v\u00fdchoz\u00ed (co\u017e se doporu\u010duje) -- stejn\u011b mus\u00edte ud\u011blat jednu v\u011bc:\r\n      Vytvo\u0159it \u0161ablonu ``404.html`` v ko\u0159enov\u00e9m adres\u00e1\u0159i \u0161ablon. V\u00fdchoz\u00ed\r\n      view 404 pou\u017eije tuto \u0161ablonu pro v\u0161echny chyby 404.\r\n      \r\n    * Pokud je volba :setting:`DEBUG` (v souboru ``settings.py``)\r\n      nastavena na ``False`` a nem\u00e1te vytvo\u0159enu \u0161ablonu ``404.html``, vyvol\u00e1\r\n      se vyj\u00edmka ``Http500``. Moudr\u00e9 v\u011bdmy proto rad\u00ed: nezapom\u011b\u0148te si vytvo\u0159it\r\n      \u0161ablonu ``404.html``!\r\n\r\nNapi\u0161te view 500 (chyba serveru)\r\n================================\r\n\r\nPodobn\u011b m\u016f\u017ee b\u00fdt v souborech URLconf definov\u00e1n ``handler500``, ukazuj\u00edc\u00ed\r\nna view, kter\u00e9 se vol\u00e1 v p\u0159\u00edpad\u011b chyby serveru. Chyby serveru mohou\r\nnastat, pokud se ve va\u0161em k\u00f3du objev\u00ed runtime chyby.\r\n\r\nPou\u017e\u00edvejte \u0161ablonov\u00fd syst\u00e9m\r\n===========================\r\n\r\nVra\u0165me se k view ``detail()`` z na\u0161\u00ed anketn\u00ed aplikace. S kontextovou\r\nprom\u011bnnou ``poll`` (obsahuj\u00edc\u00ed konkr\u00e9tn\u00ed objekt modelu Poll) by \r\n\u0161ablona \"polls/detail.html\" mohla nalo\u017eit nap\u0159\u00edklad takto:\r\n\r\n.. code-block:: html+django\r\n\r\n    <h1>{{ poll.question }}</h1>\r\n    <ul>\r\n    {% for choice in poll.choice_set.all %}\r\n        <li>{{ choice.choice }}</li>\r\n    {% endfor %}\r\n    </ul>\r\n\r\n\u0160ablonov\u00fd syst\u00e9m pou\u017e\u00edv\u00e1 \"te\u010dkovac\u00ed\" syntaxi pro p\u0159\u00edstup k prom\u011bnn\u00fdm\r\nobjektu. K v\u00fdrazu ``{{ poll.question }}`` Django nejprve p\u0159istoup\u00ed tak,\r\njako by se jednalo o slovn\u00edk, ve kter\u00e9m hled\u00e1 pat\u0159i\u010dn\u00fd kl\u00ed\u010d.  Pokud se\r\nmu to nepovede, pokus\u00ed se v objektu nal\u00e9zt atribut -- co\u017e v tomto\r\np\u0159\u00edpad\u011b funguje. Naposledy se pokus\u00ed zavolat metodu ``question()`` na\r\nobjektu poll.\r\n\r\nVol\u00e1n\u00ed metody se uskute\u010d\u0148uje ve smy\u010dce ``{% for %}``:\r\nv\u00fdraz ``poll.choice_set.all`` je br\u00e1n jako Python k\u00f3d\r\n``poll.choice_set.all()``. Ten vr\u00e1t\u00ed iter\u00e1tor nad objekty voleb\r\n(Choice), se kter\u00fdm n\u00e1sledn\u011b m\u016f\u017ee tag ``{% for %}`` bez probl\u00e9m\u016f pracovat. V\u00edce\r\ninformac\u00ed o \u0161ablon\u00e1ch naleznete v :ref:`jejich pr\u016fvodci\r\n<topics-templates>`.\r\n\r\nZjednodu\u0161en\u00ed soubor\u016f URLconf\r\n============================\r\n\r\nZkuste si te\u010f sami pohr\u00e1t s vytv\u00e1\u0159en\u00ed views a \u0161ablon, a\u0165 s jejich\r\npou\u017e\u00edv\u00e1n\u00ed dostanete cvik. B\u011bhem toho si mo\u017en\u00e1 v\u0161imnete, \u017ee v souboru\r\nURLconf se zbyte\u010dn\u011b opakuj\u00ed n\u011bkter\u00e9 shodn\u00e9 \u010d\u00e1sti::\r\n\r\n    urlpatterns = patterns('',\r\n        (r'^polls/$', 'mysite.polls.views.index'),\r\n        (r'^polls/(?P<poll_id>\\d+)/$', 'mysite.polls.views.detail'),\r\n        (r'^polls/(?P<poll_id>\\d+)/results/$', 'mysite.polls.views.results'),\r\n        (r'^polls/(?P<poll_id>\\d+)/vote/$', 'mysite.polls.views.vote'),\r\n    )\r\n\r\nAbychom byli p\u0159esn\u00ed, v ka\u017ed\u00e9m callbacku se objevuje\r\n``mysite.polls.views``.\r\n\r\nProto\u017ee jsou podobn\u00e9 situace docela b\u011b\u017en\u00e9, framework pro URLconf nab\u00edz\u00ed\r\npro neust\u00e1le se opakuj\u00edc\u00ed p\u0159edpony zjednodu\u0161en\u00ed. Shodn\u00e9 p\u0159edpony m\u016f\u017eete\r\nvyjmout a dosadit je jako prvn\u00ed argument ve funkci\r\n:func:`~django.conf.urls.defaults.patterns`. T\u0159eba takto::\r\n\r\n    urlpatterns = patterns('mysite.polls.views',\r\n        (r'^polls/$', 'index'),\r\n        (r'^polls/(?P<poll_id>\\d+)/$', 'detail'),\r\n        (r'^polls/(?P<poll_id>\\d+)/results/$', 'results'),\r\n        (r'^polls/(?P<poll_id>\\d+)/vote/$', 'vote'),\r\n    )\r\n\r\nZ funk\u010dn\u00edho hlediska jde o identick\u00fd k\u00f3d. Druh\u00fd zp\u016fsob je ale\r\np\u0159ehledn\u011bj\u0161\u00ed.\r\n\r\nOdd\u011blov\u00e1n\u00ed soubor\u016f URLconf\r\n==========================\r\n\r\nKdy\u017e u\u017e jsme u toho, m\u011bli bychom tak\u00e9 odd\u011blit URL adresy na\u0161\u00ed aplikace\r\nod konfigurace Django projektu. Django aplikace maj\u00ed b\u00fdt z\u00e1suvn\u00e9 -- co\u017e\r\nznamen\u00e1, \u017ee jak\u00e1koliv aplikace by se m\u011bla d\u00e1t p\u0159en\u00e9st do jin\u00e9\r\ninstalace Djanga s minim\u00e1ln\u00edmi komplikacemi.\r\n\r\nNa\u0161e aplikace je na dobr\u00e9 cest\u011b, d\u00edky striktn\u00ed adres\u00e1\u0159ov\u00e9 struktu\u0159e\r\nvytvo\u0159en\u00e9 pomoc\u00ed ``python manage.py startapp``, ale jedna jej\u00ed \u010d\u00e1st je\r\nnapevno spojena s nastaven\u00edm Djanga: URLconf.\r\n\r\nURL adresy jsme upravovali v souboru ``mysite/urls.py``, ale design URL\r\nadres by m\u011bl b\u00fdt specifick\u00fd pro aplikaci a ne pro celou Django instalaci\r\n-- tak\u017ee p\u0159esuneme URL adresy do adres\u00e1\u0159e s aplikac\u00ed.\r\n\r\nZkop\u00edrujte soubor ``mysite/urls.py`` do ``mysite/polls/urls.py``. Ze\r\nsouboru ``mysite/urls.py`` odstra\u0148te URL adresy specifick\u00e9 pro anketn\u00ed\r\naplikaci a vlo\u017ete m\u00edsto nich\r\n:func:`~django.conf.urls.defaults.include`::\r\n\r\n    # ... \r\n \turlpatterns = patterns('', \r\n \t    (r'^polls/', include('mysite.polls.urls')), \r\n \t    # ... \r\n\r\n:func:`~django.conf.urls.defaults.include` odkazuje na jin\u00fd URLconf.\r\nV\u0161imn\u011bte si, \u017ee regul\u00e1rn\u00ed v\u00fdraz nekon\u010d\u00ed znakem ``$`` (znak pro konec\r\n\u0159et\u011bzce), ale lom\u00edtkem. Kdy\u017e se Django setk\u00e1 s\r\n:func:`~django.conf.urls.defaults.include`, odd\u011bl\u00ed \u010d\u00e1st URL, kter\u00e1 se do\r\nt\u00e9 doby shodovala a zbytek ode\u0161le do odkazovan\u00e9ho souboru URLconf pro\r\ndal\u0161\u00ed zpracov\u00e1n\u00ed.\r\n\r\nKdyby u\u017eivatel zadal adresu \"/polls/34/\", stalo by se toto:\r\n\r\n    * Django najde shodu v ``'^polls/'``\r\n\r\n    * Pak vyjme shoduj\u00edc\u00ed se text (``\"polls/\"``) a ode\u0161le jeho zbytek\r\n      -- ``\"34/\"`` -- do souboru 'mysite.polls.urls' pro dal\u0161\u00ed\r\n      zpracov\u00e1n\u00ed.\r\n\r\nTe\u010f je\u0161t\u011b mus\u00edme odstranit \"polls/\" z ka\u017ed\u00e9ho \u0159\u00e1dku URLconf v souboru\r\n'mysite.polls.urls' a smazat \u0159\u00e1dky registruj\u00edc\u00ed administra\u010dn\u00ed rozhran\u00ed::\r\n\r\n    urlpatterns = patterns('mysite.polls.views',\r\n        (r'^$', 'index'),\r\n        (r'^(?P<poll_id>\\d+)/$', 'detail'),\r\n        (r'^(?P<poll_id>\\d+)/results/$', 'results'),\r\n        (r'^(?P<poll_id>\\d+)/vote/$', 'vote'),\r\n    )\r\n\r\nMy\u0161lenka rozdd\u011blen\u00ed souboru URLconf a pou\u017eit\u00ed\r\n:func:`~django.conf.urls.defaults.include` spo\u010d\u00edv\u00e1 tom, \u017ee zjednodu\u0161\u00ed\r\nzapojen\u00ed URL adres kdekoli. Te\u010f, kdy\u017e maj\u00ed ankety sv\u016fj vlastn\u00ed URLconf,\r\nmohou b\u00fdt um\u00edst\u011bny za \"/polls/\", nebo \"/fun_polls/\", nebo\r\n\"/content/polls/\", nebo za jak\u00fdkoli jin\u00fd URL prefix a aplikace bude\r\nst\u00e1le fungovat.\r\n\r\nAplikace se star\u00e1 jen o relativn\u00ed adresy a ne o absolutn\u00ed.\r\n\r\nA\u017e budete se sv\u00fdmi views spokojeni, p\u0159e\u010dt\u011bte si :ref:`\u010dtvrtou \u010d\u00e1st\r\ntohoto n\u00e1vodu <intro-tutorial04>`, kde se dozv\u00edte n\u011bco o zpracov\u00e1n\u00ed\r\njednoduch\u00fdch formul\u00e1\u0159\u016f a o generick\u00fdch views.", 
            "revision": 12588
        }
    }, 
    {
        "pk": 5, 
        "model": "translations.translation", 
        "fields": {
            "flat_page": null, 
            "updated": "2010-08-16 22:34:08", 
            "created": "2008-12-28 14:24:58", 
            "source_path": "/home/michal/projects/www/djangoproject.cz/docs/intro/tutorial04.txt", 
            "content": ".. _intro-tutorial04:\r\n\r\n===============================\r\nPrvn\u00ed aplikace v Djangu, \u010d\u00e1st 4\r\n===============================\r\n\r\nTento n\u00e1vod za\u010d\u00edn\u00e1 tam, kde skon\u010dila :ref:`t\u0159et\u00ed \u010d\u00e1st\r\n<intro-tutorial03>` uk\u00e1zkov\u00e9 aplikace. Budeme pokra\u010dovat v na\u0161\u00ed webov\u00e9\r\nanketn\u00ed aplikaci a zam\u011b\u0159\u00edme se na jednoduch\u00e9 zpracov\u00e1n\u00ed formul\u00e1\u0159\u016f a na\r\nmetody, kter\u00e9 povedou k ze\u0161t\u00edhlen\u00ed ji\u017e napsan\u00e9ho k\u00f3du.\r\n\r\nJednoduch\u00fd formul\u00e1\u0159\r\n===================\r\n\r\nOtev\u0159ete si \u0161ablonu s detailem ankety (\"polls/detail.html\"), kterou jsme\r\nvytvo\u0159ili v p\u0159edchoz\u00ed \u010d\u00e1sti tohoto n\u00e1vodu a vlo\u017eme do n\u00ed HTML formul\u00e1\u0159:\r\n\r\n.. code-block:: html+django\r\n\r\n    <h1>{{ poll.question }}</h1>\r\n\r\n    {% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}\r\n\r\n    <form action=\"/polls/{{ poll.id }}/vote/\" method=\"post\">\r\n    {% csrf_token %}\r\n    {% for choice in poll.choice_set.all %}\r\n        <input type=\"radio\" name=\"choice\" id=\"choice{{ forloop.counter }}\" value=\"{{ choice.id }}\" />\r\n        <label for=\"choice{{ forloop.counter }}\">{{ choice.choice }}</label><br />\r\n    {% endfor %}\r\n    <input type=\"submit\" value=\"Vote\" />\r\n    </form>\r\n\r\nStru\u010dn\u011b k funkci:\r\n\r\n    * D\u00edky proveden\u00e9 \u00faprav\u011b se na str\u00e1nce zobraz\u00ed sada radio buttonu.\r\n      Atribut ``value`` ka\u017ed\u00e9ho buttonu bude odpov\u00eddat konkr\u00e9tn\u00edmu ID\r\n      anketn\u00ed volby (ID z datab\u00e1zov\u00e9 tabulky).  Atribut ``name`` bude\r\n      nastaven na hodnotu ``\"choice\"``. Pokud n\u011bkdo ode\u0161le formul\u00e1\u0159,\r\n      doraz\u00ed do view POST data, nap\u0159. ``choice=3``.\r\n\r\n    * Akce formul\u00e1\u0159e (atribut ``action``) je nastavena na hodnotu\r\n      ``/polls/{{ poll.id }}/vote/``, metoda (atribut ``method``) na\r\n      ``\"post\"``. Pou\u017eit\u00ed ``method=\"post\"`` (nam\u00edsto ``method=\"get\"``)\r\n      je velmi d\u016fle\u017eit\u00e9, proto\u017ee data odeslan\u00e1 z formul\u00e1\u0159e zp\u016fsob\u00ed zm\u011bnu\r\n      dat na stran\u011b serveru. Kdykoliv budete \u0159e\u0161it podobnou situaci,\r\n      vyu\u017e\u00edvejte v\u00fdhradn\u011b ``method=\"post\"``. Nejde o specifikum\r\n      Djanga, tato rada plat\u00ed obecn\u011b pro v\u0161echny webov\u00e9 aplikace.\r\n\r\n    * V\u00fdraz ``forloop.counter`` vrac\u00ed \u010d\u00edselnou hodnotu odpov\u00eddaj\u00edc\u00ed \r\n      po\u010dtu proveden\u00fd cykl\u016f smy\u010dky :ttag:`for`.\r\n\r\n    * Proto\u017ee vytv\u00e1\u0159\u00edme POST formul\u00e1\u0159 (kter\u00fd m\u016f\u017ee na stran\u011b serveru vyvolat\r\n      modifikaci dat), nem\u011bli bychom zapomenout na CSRF (Cross Site Request\r\n      Forgeries). Django na\u0161t\u011bst\u00ed obsahuje syst\u00e9m, kter\u00fd n\u00e1s p\u0159ed t\u00edmto rizikem\r\n      dok\u00e1\u017ee ochr\u00e1nit -- sta\u010d\u00ed v\u0161echny POST formul\u00e1\u0159e vedouc\u00ed na intern\u00ed URL\r\n      vybavit tagem ``{% csrf_token %}``.\r\n\r\nTak. Formul\u00e1\u0159 jsme v \u0161ablon\u011b definovali, te\u010f je na \u010dase napsat view,\r\nkter\u00e9 se postar\u00e1 o zpracov\u00e1n\u00ed dat. Vzpome\u0148te si na :ref:`t\u0159et\u00ed \u010d\u00e1st\r\ntohoto n\u00e1vodu <intro-tutorial03>`, ve kter\u00e9m jsme definovali URL\r\npravidlo::\r\n\r\n    (r'^(?P<poll_id>\\d+)/vote/$', 'vote'),\r\n\r\nTehd\u00e1 jsme vytvo\u0159ili \"fale\u0161nou\" implementaci hlasov\u00e1n\u00ed -- funkci\r\n``vote()``. Poj\u010fme te\u010f napsat k\u00f3d, kter\u00fd bude opravdu n\u011bco d\u011blat.\r\nP\u0159idejte do souboru ``mysite/polls/views.py`` n\u00e1sleduj\u00edc\u00ed \u0159\u00e1dky:: \r\n\r\n\r\n    from django.shortcuts import get_object_or_404, render_to_response\r\n    from django.http import HttpResponseRedirect, HttpResponse\r\n    from django.core.urlresolvers import reverse\r\n    from django.template import RequestContext\r\n    from mysite.polls.models import Choice, Poll\r\n    # ...\r\n    def vote(request, poll_id):\r\n        p = get_object_or_404(Poll, pk=poll_id)\r\n        try:\r\n            selected_choice = p.choice_set.get(pk=request.POST['choice'])\r\n        except (KeyError, Choice.DoesNotExist):\r\n            # zobrazime formular znovu, tentokrat s chybovou hlaskou\r\n            return render_to_response('polls/detail.html', {\r\n                'poll': p,\r\n                'error_message': \"Nevybral(-a) jste zadnou anketni volbu.\",\r\n            }, context_instance=RequestContext(request))\r\n        else:\r\n            selected_choice.votes += 1\r\n            selected_choice.save()\r\n            # Po kazdem uspesnem zpracovani POST dat je treba vyvolat\r\n            # HttpResponseRedirect. Tato praktika zabrani dvojimu\r\n            # odeslani (a uzlozeni) dat z formulare v situacich, kdy\r\n            # uzivatel klikne na tlacitko \"Zpet\" ve svem webovem\r\n            # prohlizeci.\r\n            return HttpResponseRedirect(reverse('mysite.polls.views.results', args=(p.id,)))\r\n\r\nV k\u00f3du se n\u00e1m objevilo n\u011bkolik novinek:\r\n\r\n    * :attr:`request.POST <django.http.HttpRequest.POST>` je objekt\r\n      podobn\u00fd slovn\u00edku, ze kter\u00e9ho m\u016f\u017eeme vytahovat odeslan\u00e1 data s\r\n      pomoc\u00ed jejich jm\u00e9na. Nap\u0159. ``request.POST['choice']`` vr\u00e1t\u00ed ID\r\n      vybran\u00e9 volby ve form\u011b \u0159et\u011bzce. Hodnoty z :attr:`request.POST\r\n      <django.http.HttpRequest.POST>` se vrac\u00ed v\u017edy v podob\u011b \u0159et\u011bzce.\r\n\r\n      Pamatujte, \u017ee Django prost\u0159ednictv\u00edm :attr:`request.GET\r\n      <django.http.HttpRequest.GET>` zp\u0159\u00edstup\u0148uje rovn\u011b\u017e GET data -- v\r\n      na\u0161em uk\u00e1zkov\u00e9m k\u00f3du ale explicitn\u011b pou\u017e\u00edv\u00e1me :attr:`request.POST\r\n      <django.http.HttpRequest.POST>`, abychom m\u011bli jistotu, \u017ee data\r\n      p\u0159ich\u00e1z\u00ed skute\u010dn\u011b z POSTu.\r\n\r\n    * ``request.POST['choice']`` vyvol\u00e1 vyj\u00edmku :exc:`KeyError` v\r\n      p\u0159\u00edpad\u011b, \u017ee ``choice`` nebude v POST datech p\u0159\u00edtomno. N\u00e1\u0161 k\u00f3d tuto\r\n      situaci o\u0161et\u0159uje, a pokud by nastala, zobraz\u00ed formul\u00e1\u0159 znovu spolu s\r\n      chybovou hl\u00e1\u0161kou.\r\n\r\n    * Po zapo\u010d\u00edt\u00e1n\u00ed vybran\u00e9 volby vr\u00e1t\u00ed n\u00e1\u0161 k\u00f3d \r\n      :class:`~django.http.HttpResponseRedirect` (nam\u00edsto obvykl\u00e9ho\r\n      :class:`~django.http.HttpResponse`).\r\n      :class:`~django.http.HttpResponseRedirect` p\u0159ij\u00edm\u00e1 jedin\u00fd\r\n      argument: URL na kter\u00e9 bude u\u017eivatel p\u0159esm\u011brov\u00e1n (nep\u0159ehl\u00e9dn\u011bte\r\n      n\u00e1sleduj\u00edc\u00ed bod, ve kter\u00e9m se vysv\u011btluje zp\u016fsob konstrukce URL\r\n      adresy).\r\n\r\n      Jak ji\u017e zmi\u0148uje koment\u00e1\u0159 v k\u00f3du -- po ka\u017ed\u00e9m \u00fasp\u011b\u0161n\u00e9m zpracov\u00e1n\u00ed\r\n      POST dat by m\u011blo n\u00e1sledovat p\u0159esm\u011brov\u00e1n\u00ed s pomoc\u00ed\r\n      :class:`~django.http.HttpResponseRedirect`; jde o obecn\u011b platnou\r\n      radu, kterou uplatn\u00edte nejen v Djangu, ale p\u0159i jak\u00e9mkoliv v\u00fdvoji\r\n      webov\u00fdch aplikac\u00ed.\r\n\r\n    * Pro vytvo\u0159en\u00ed URL adresy (viz konstruktor\r\n      :class:`~django.http.HttpResponseRedirect`) jsme pou\u017eili funkci\r\n      :func:`~django.core.urlresolvers.reverse`. D\u00edky t\u00e9to funkci\r\n      nemus\u00edme do k\u00f3du \"zadr\u00e1tov\u00e1vat\" pevn\u00e1 URL, kter\u00e9 bychom v p\u0159\u00edpad\u011b\r\n      jejich zm\u011bny museli pracn\u011b hledat a opravovat. Funkci\r\n      :func:`~django.core.urlresolvers.reverse` p\u0159ed\u00e1me jm\u00e9no view, na\r\n      kter\u00e9 chceme p\u0159esm\u011brovat a data, kter\u00e1 odpov\u00eddaj\u00ed prom\u011bnn\u00fdm \u010d\u00e1stem\r\n      v URL pravidlu. V na\u0161em konkr\u00e9tn\u00edm p\u0159\u00edpad\u011b m\u016f\u017ee funkce\r\n      :func:`~django.core.urlresolvers.reverse` vr\u00e1tit nap\u0159.::\r\n\r\n        '/polls/3/results/'\r\n\r\n      ... kde ``3`` je hodnota ``p.id``. Po p\u0159esm\u011brov\u00e1n\u00ed bude zavol\u00e1no\r\n      view ``'results'``, kter\u00e9 zobraz\u00ed v\u00fdsledky ankety. V\u0161imn\u011bte si, \u017ee\r\n      jm\u00e9no view mus\u00edme definovat v pln\u00e9 form\u011b (v\u010detn\u011b prefix\u016f).\r\n\r\nJak u\u017e bylo v p\u0159edchoz\u00ed t\u0159et\u00ed \u010d\u00e1sti tohoto n\u00e1vodu zmi\u0148ov\u00e1no,\r\n``request`` je objekt :class:`~django.http.HttpRequest`. V\u00edce informac\u00ed\r\no jeho vlastnostech naleznete v dokumentaci :ref:`request a response\r\n<ref-request-response>`.\r\n\r\nPo proveden\u00ed hlasov\u00e1n\u00ed v anket\u011b, bude u\u017eivatel p\u0159esm\u011brov\u00e1n na fin\u00e1ln\u00ed\r\nstr\u00e1nku s v\u00fdsledky. Napi\u0161me pro ni view::\r\n\r\n    def results(request, poll_id):\r\n        p = get_object_or_404(Poll, pk=poll_id)\r\n        return render_to_response('polls/results.html', {'poll': p})\r\n\r\nP\u0159i pohledu na tento k\u00f3d si mo\u017en\u00e1 vzpomenete na view ``detail()`` \r\nz :ref:`t\u0159et\u00ed \u010d\u00e1sti n\u00e1vodu <intro-tutorial03>`. Oba k\u00f3dy jsou si velmi\r\npodobn\u00e9, rozd\u00edl je pouze v n\u00e1zvu \u0161ablony. Za chv\u00edli se t\u00e9to\r\nnadbyte\u010dnosti zbav\u00edme.\r\n\r\nVytvo\u0159me \u0161ablonu ``results.html``:\r\n\r\n.. code-block:: html+django\r\n\r\n    <h1>{{ poll.question }}</h1>\r\n\r\n    <ul>\r\n    {% for choice in poll.choice_set.all %}\r\n        <li>{{ choice.choice }} -- {{ choice.votes }} vote{{ choice.votes|pluralize }}</li>\r\n    {% endfor %}\r\n    </ul>\r\n\r\n    <a href=\"/polls/{{ poll.id }}/\">Chcete znovu hlasovat?</a> \r\n\r\n\r\nP\u0159epn\u011bte se do sv\u00e9ho prohl\u00ed\u017ee\u010de, nav\u0161tivte str\u00e1nku ``/polls/1/`` a\r\nhlasujte pro n\u011bkterou z mo\u017enost\u00ed. M\u011bla by se v\u00e1m zobrazit str\u00e1nka s\r\nv\u00fdsledky, kter\u00e1 bude po ka\u017ed\u00e9 proveden\u00e9 volb\u011b aktualizovan\u00e1. Pokud se\r\npokus\u00edte odeslat formul\u00e1\u0159 bez zvolen\u00ed n\u011bkter\u00e9 z mo\u017enost\u00ed, m\u011bla by se v\u00e1m\r\nzobrazit chybov\u00e1 hl\u00e1\u0161ka.\r\n\r\nGenerick\u00e1 view: Kr\u00e1tk\u00fd k\u00f3d, dobr\u00fd k\u00f3d\r\n=====================================\r\n\r\nView ``detail()`` (z :ref:`t\u0159et\u00ed \u010d\u00e1sti n\u00e1vodu <intro-tutorial03>`) a ``results()``\r\njsou velice jednoduch\u00e9 -- a redundantn\u00ed. View ``index()`` (rovn\u011b\u017e z\r\nt\u0159et\u00ed \u010d\u00e1sti), kter\u00e9 se star\u00e1 o zobrazen\u00ed seznamu anket, je na tom\r\npodobn\u011b.\r\n\r\nTato view reprezentuj\u00ed obvykl\u00e9 procesy ve v\u00fdvoji webov\u00fdch aplikac\u00ed:\r\npodle parametr\u016f z URL z\u00edskej data z datab\u00e1ze, nahrej \u0161ablonu a vra\u0165\r\nu\u017eivateli jej\u00ed vykreslenou (rendered) podobu. Proto\u017ee se s podobnou\r\nsituac\u00ed budete setk\u00e1vat st\u00e1le, Django pro v\u00e1s p\u0159ipravilo sadu\r\npomocn\u00fdch \"generic views\".\r\n\r\nGenerick\u00e9 view abstrahuj\u00ed obvykl\u00e9 postupy do t\u00e9 m\u00edry, \u017ee pro svou\r\naplikaci nebudete muset napsat ani \u0159\u00e1dek Python k\u00f3du.\r\n\r\nPoj\u010fme nyn\u00ed p\u0159epsat na\u0161i anketn\u00ed aplikaci tak, aby vyu\u017e\u00edvala generick\u00e1\r\nview. Sami uvid\u00edte kolik k\u00f3du n\u00e1m \u00faprava u\u0161et\u0159\u00ed. Bude to jednoduch\u00e9:\r\n\r\n    1. Uprav\u00edme URLconf.\r\n\r\n    2. P\u0159ejmenujeme p\u00e1r \u0161ablon.\r\n\r\n    3. Sma\u017eeme n\u011bkter\u00e1 nepot\u0159ebn\u00e1 view.\r\n\r\n    4. Oprav\u00edme URL pravidla pro nov\u00e1 view.\r\n\r\n\u010ct\u011bte d\u00e1l.\r\n\r\n.. admonition:: Pro\u010d zasahovat do hotov\u00e9ho, funk\u010dn\u00edho k\u00f3du?\r\n\r\n    Obvykle se pro generick\u00e1 view rozhodnete hned na za\u010d\u00e1tku vytv\u00e1\u0159en\u00ed\r\n    aplikace. Zv\u00e1\u017e\u00edte jejich v\u00fdhody pro v\u00e1\u0161 konkr\u00e9tn\u00ed z\u00e1m\u011br a\r\n    bu\u010f je pou\u017eijete, nebo si view nap\u00ed\u0161ete vlastn\u00ed. V tomto n\u00e1vodu\r\n    postupujeme naopak -- nejd\u0159\u00edve jsme volili pracnou cestu, abychom\r\n    z\u00edskali z\u00e1kladn\u00ed p\u0159edstavu o fungov\u00e1n\u00ed Djanga, a kdy\u017e u\u017e v tom m\u00e1me\r\n    jasno, poukazujeme na snadn\u011bj\u0161\u00ed postupy.\r\n\r\n    Jin\u00fdmi slovy: ne\u017e pou\u017eijete kalkula\u010dku, mus\u00edte zn\u00e1t z\u00e1klady\r\n    matematiky.\r\n\r\nNejd\u0159\u00edve otev\u0159ete soubor ``polls/urls.py``. Bude vypadat n\u011bjak takto::\r\n\r\n    from django.conf.urls.defaults import *\r\n\r\n    urlpatterns = patterns('mysite.polls.views',\r\n        (r'^$', 'index'),\r\n        (r'^(?P<poll_id>\\d+)/$', 'detail'),\r\n        (r'^(?P<poll_id>\\d+)/results/$', 'results'),\r\n        (r'^(?P<poll_id>\\d+)/vote/$', 'vote'),\r\n    )\r\n\r\nZm\u011bn\u00edme jej do n\u00e1sleduj\u00edc\u00ed podoby::\r\n\r\n    from django.conf.urls.defaults import *\r\n    from mysite.polls.models import Poll\r\n\r\n    info_dict = {\r\n        'queryset': Poll.objects.all(),\r\n    }\r\n\r\n    urlpatterns = patterns('',\r\n        (r'^$', 'django.views.generic.list_detail.object_list', info_dict),\r\n        (r'^(?P<object_id>\\d+)/$', 'django.views.generic.list_detail.object_detail', info_dict),\r\n        url(r'^(?P<object_id>\\d+)/results/$', 'django.views.generic.list_detail.object_detail', dict(info_dict, template_name='polls/results.html'), 'poll_results'),\r\n        (r'^(?P<poll_id>\\d+)/vote/$', 'mysite.polls.views.vote'),\r\n    )\r\n\r\nPou\u017eijeme dv\u011b generick\u00e1 view:\r\n:func:`~django.views.generic.list_detail.object_list` a\r\n:func:`~django.views.generic.list_detail.object_detail`. Tato view\r\nabstrahuj\u00ed obvykl\u00e9 postupy \"zobraz seznam objekt\u016f\" a \"zobraz detailn\u00ed\r\nstr\u00e1nku pro konkretn\u00ed typ objektu\".\r\n\r\n    * Ka\u017ed\u00e9 generick\u00e9 view pot\u0159ebuje v\u011bd\u011bt, s jak\u00fdmi daty m\u00e1 pracovat.\r\n      Tato data p\u0159ij\u00edm\u00e1 ve form\u011b slovn\u00edku, p\u0159i\u010dem\u017e pod kl\u00ed\u010dem\r\n      ``queryset`` o\u010dek\u00e1v\u00e1 seznam objekt\u016f.\r\n\r\n    * Generick\u00e9 view :func:`~django.views.generic.list_detail.object_detail`\r\n      o\u010dek\u00e1v\u00e1 p\u0159\u00edtomnost kl\u00ed\u010de ``\"object_id\"`` v URL pravidlu. Podle n\u011bj\r\n      n\u00e1sledn\u011b vyt\u00e1hne objekt z datab\u00e1ze (podle ID). Z tohoto d\u016fvodu\r\n      p\u0159ejmenujeme ``poll_id`` na ``object_id``.\r\n\r\n    * URL pravidlo vedouc\u00ed na str\u00e1nku s v\u00fdsledky jsme pojmenovali jako\r\n      ``poll_results`` (dal\u0161\u00ed :ref:`podrobnosti o pojmenov\u00e1v\u00e1n\u00ed pravidel\r\n      <naming-url-patterns>`). Definici pravidla jsme p\u0159epsali za\r\n      pomoci funkce :func:`~django.conf.urls.default.url`\r\n\r\nV\u00fdchoz\u00ed nastaven\u00ed generick\u00e9ho view\r\n:func:`~django.views.generic.list_detail.object_detail` pou\u017eije \u0161ablonu\r\npojmenovanou podle vzoru ``<app name>/<model name>_detail.html``. V\r\nna\u0161em p\u0159\u00edpad\u011b to bude \u0161ablona ``\"polls/poll_detail.html\"``. P\u0159ejmenujme\r\ntedy \u0161ablonu ``polls/detail.html`` na ``polls/poll_detail.html``, a\r\nzm\u011b\u0148me jej\u00ed jm\u00e9no i ve view ``vote()`` (viz vol\u00e1n\u00ed\r\n:func:`~django.shortcuts.render_to_response`).\r\n\r\nPodobn\u011b p\u0159ejmenujeme \u0161ablony pro generick\u00e9 view\r\n:func:`~django.views.generic.list_detail.object_list` (podle vzoru\r\n``<app name>/<model name>_list.html``). Konkr\u00e9tn\u011b, ze \u0161ablony\r\n``polls/index.html`` ud\u011bl\u00e1me ``polls/poll_list.html``.\r\n\r\nProto\u017ee m\u00e1me v definici URL pravidel v\u00edce z\u00e1znam\u016f, kter\u00e9 shodn\u011b\r\npou\u017e\u00edvaj\u00ed :func:`~django.views.generic.list_detail.object_detail`,\r\nzadefinujeme manu\u00e1ln\u011b jm\u00e9no \u0161ablony pro str\u00e1nku s v\u00fdsledky:\r\n``template_name='polls/results.html'``. Kdybychom to neud\u011blali, ob\u011b\r\ndetailn\u00ed view by pou\u017eila stejnou \u0161ablonu. Odbo\u010dka: v\u0161imn\u011bte si pou\u017eit\u00ed\r\n``dict()`` -- vr\u00e1t\u00ed pozm\u011bn\u011bn\u00fd slovn\u00edk \"in-place\".\r\n\r\n.. note:: :meth:`django.db.models.QuerySet.all` je lenoch\r\n\r\n    Co\u017ee? Pro zobrazen\u00ed detailu str\u00e1nky se vol\u00e1 ``Poll.objects.all()`` (tj. z datab\u00e1ze se tahaj\u00ed v\u0161echny ankety)?\r\n    Nen\u00ed t\u0159eba podl\u00e9hat p\u0159ed\u010dasn\u00fdm mrzutostem p\u0159\u00e1tel\u00e9.\r\n    ``Poll.objects.all()`` je ve skute\u010dnosti speci\u00e1ln\u00ed objekt\r\n    :class:`~django.db.models.QuerySet`, kter\u00fd je \"l\u00edn\u00fd\" -- datab\u00e1zov\u00fd\r\n    dotaz nen\u00ed vykon\u00e1n, dokud to nen\u00ed nezbytn\u011b nutn\u00e9. Ne\u017e si generick\u00e9\r\n    view vy\u017e\u00e1d\u00e1 z datab\u00e1ze konkr\u00e9tn\u00ed objekt, je v\u00fdraz\r\n    ``Poll.objects.all()`` dostate\u010dn\u011b up\u0159esn\u011bn a SQL bude v ide\u00e1ln\u00edm\r\n    p\u0159\u00edpad\u011b vytahovat jedin\u00fd \u0159\u00e1dek z tabulky.\r\n\r\n    Pokud se chcete dozv\u011bd\u011bt dal\u0161\u00ed podrobnosti, nahl\u00e9dn\u011bte do dokumentace o\r\n    datab\u00e1zov\u00e9m API, kter\u00e9 obsahuje samostatnou kapitolu :ref:`o leniv\u00e9 povaze\r\n    objekt\u016f QuerySet <querysets-are-lazy>`.\r\n\r\nV p\u0159edchoz\u00edch \u010d\u00e1stech n\u00e1vodu jsme uvnit\u0159 \u0161ablon pracovali s kontextov\u00fdmi\r\nprom\u011bnn\u00fdmi ``poll`` and ``latest_poll_list``. Generick\u00e1 view ale maj\u00ed\r\nprom\u011bnn\u00e9 pojmenovan\u00e9 obecn\u011bji, konkr\u00e9tn\u011b ``object`` a ``object_list``.\r\nProjd\u011bte si v\u0161echny sv\u00e9 \u0161ablony a zm\u011b\u0148te prom\u011bnn\u00e9\r\n``latest_poll_list`` na ``object_list``, a ``poll`` na ``object``.\r\n\r\nV t\u00e9to chv\u00edli ji\u017e m\u016f\u017eete ze souboru ``polls/views.py`` smazat view\r\n``index()``, ``detail()`` a ``results()``. U\u017e je na nic nepot\u0159ebujeme --\r\nbyly nahrazeny generick\u00fdmi view.\r\n\r\nView ``vote()`` zachov\u00e1me, star\u00e1 se o zpracov\u00e1n\u00ed odeslan\u00fdch dat z formul\u00e1\u0159e. Mus\u00edme jej ale lehce upravit -- ve vol\u00e1n\u00ed\r\n:func:`~django.shortcuts.render_to_response` p\u0159ejmenujeme kontextovou\r\nprom\u011bnnou ``poll`` na ``object``.\r\n\r\nPosledn\u00ed v\u011bc\u00ed kterou mus\u00edme upravit je zp\u016fsob, jak\u00fdm pracujeme s URL\r\nadresami. Ve view ``vote()`` pou\u017e\u00edv\u00e1me funkci\r\n:func:`~django.core.urlresolvers.reverse`. Proto\u017ee generick\u00e1 view mohou\r\nb\u00fdt pou\u017e\u00edv\u00e1na na v\u00edce m\u00edstech aplikace, nem\u016f\u017eeme se na n\u011b odkazovat\r\njm\u00e9nem funkce.  V\u00fdraz uprav\u00edme tak, \u017ee bude obsahovat jm\u00e9no URL\r\npravidla::\r\n\r\n    return HttpResponseRedirect(reverse('poll_results', args=(p.id,)))\r\n\r\nHotovo. Na\u0161e aplikace nyn\u00ed vyu\u017e\u00edv\u00e1 mo\u017enost\u00ed generick\u00fdch view. Spus\u0165e si\r\nv\u00fdvojov\u00fd server a ov\u011b\u0159te si jej\u00ed chov\u00e1n\u00ed v praxi.\r\n\r\nDal\u0161\u00ed podrobnosti o generick\u00fdch view najdete v :ref:`samostatn\u00e9\r\ndokumentaci<topics-http-generic-views>`.\r\n\r\nJi\u017e brzy\r\n========\r\n\r\nV tomto m\u00edst\u011b n\u00e1\u0161 n\u00e1vod kon\u010d\u00ed. V budoucnu bude dopln\u011bn o popisy dal\u0161\u00edch\r\nzaj\u00edmav\u00fdch \u010d\u00e1st\u00ed Djanga:\r\n\r\n    * Pokro\u010dil\u00e9 metody zpracov\u00e1n\u00ed formul\u00e1\u0159\u016f\r\n    * Vyu\u017eit\u00ed RSS frameworku\r\n    * Vyu\u017eit\u00ed cache frameworku\r\n    * Vyu\u017eit\u00ed koment\u00e1\u0159ov\u00e9ho frameworku\r\n    * Pokro\u010dil\u00e9 vlastnosti administra\u010dn\u00edho rozhran\u00ed: Pr\u00e1va\r\n    * Pokro\u010dil\u00e9 vlastnosti administra\u010dn\u00edho rozhran\u00ed: U\u017eivatelsk\u00fd\r\n      JavaScript\r\n\r\nNe\u017e k tomu dojde, sami se porozhl\u00e9dn\u011bte na str\u00e1nce :ref:`Co si p\u0159e\u010d\u00edst d\u00e1l\r\n<intro-whatsnext>`.", 
            "revision": 12527
        }
    }, 
    {
        "pk": 7, 
        "model": "translations.translation", 
        "fields": {
            "flat_page": null, 
            "updated": "2011-08-11 08:33:38", 
            "created": "2011-08-10 19:08:34", 
            "source_path": "/home/michal/projects/www/djangoproject.cz/docs/topics/http/views.txt", 
            "content": "=============\r\nP\u00ed\u0161eme views\r\n=============\r\n\r\n\"View function\" nebo zkr\u00e1cen\u011b *view* je jednoduch\u00e1 Python\u00ed funkce, kter\u00e1\r\nzpracuje \u017e\u00e1dost z prohl\u00ed\u017ee\u010de (web request) a vr\u00e1t\u00ed mu odpov\u011b\u010f (web\r\nresponse). Ta m\u016f\u017ee b\u00fdt ve form\u011b HTML dokumentu, p\u0159esm\u011brov\u00e1n\u00ed, chyby 404, XML\r\ndokumentu, obr\u00e1zku ... prost\u011b cokoliv. K\u00f3d view m\u016f\u017ee b\u00fdt um\u00edst\u011bn kdekoliv na\r\n\"Python path\". A to\u0165 v\u0161e -- \u017e\u00e1dn\u00e1 dal\u0161\u00ed kouzla nejsou t\u0159eba. Jeliko\u017e k\u00f3d\r\nobsahuj\u00edc\u00ed view *n\u011bkam* d\u00e1t mus\u00edme, je nejlep\u0161\u00ed ho spolu s ostatn\u00edmi views vlo\u017eit\r\ndo souboru ``views.py``, kter\u00fd se nach\u00e1z\u00ed v ko\u0159enov\u00e9m adres\u00e1\u0159i projektu nebo\r\naplikace.\r\n\r\nJednoduch\u00e9 view\r\n===============\r\n\r\nPoj\u010fme se pod\u00edvat na jednoduch\u00fd p\u0159\u00edklad -- view, kter\u00e9 vrac\u00ed aktu\u00e1ln\u00ed datum a \u010das\r\nve form\u011b HTML str\u00e1nky:\r\n\r\n.. code-block:: python\r\n\r\n    from django.http import HttpResponse\r\n    import datetime\r\n\r\n    def current_datetime(request):\r\n        now = datetime.datetime.now()\r\n        html = \"<html><body>Prave je %s.</body></html>\" % now\r\n        return HttpResponse(html)\r\n\r\nPoj\u010fme si k\u00f3d rozebrat:\r\n\r\n    * Nejd\u0159\u00edve importujeme t\u0159\u00eddu :class:`~django.http.HttpResponse` z modulu\r\n      :mod:`django.http` a k tomu importujeme i Python knihovnu ``datetime``.\r\n\r\n    * Jako dal\u0161\u00ed si nadefinujeme funkci ``current_datetime``. Ta je nyn\u00ed view\r\n      funkc\u00ed (\"view function\"). Ka\u017ed\u00e1 view funkce p\u0159eb\u00edr\u00e1 v prvn\u00edm parametru\r\n      objekt :class:`~django.http.HttpRequest`, kter\u00fd je v\u011bt\u0161inou pojmenov\u00e1n\r\n      ``request``.\r\n\r\n      Svoj\u00ed view funkci si m\u016f\u017eete pojmenovat jakkoliv.  Nemus\u00ed m\u00edt n\u011bjak\u00e9\r\n      speci\u00e1ln\u00ed jm\u00e9no, aby ji Django rozpoznalo. V na\u0161em uk\u00e1zkov\u00e9m k\u00f3du ji m\u00e1me\r\n      pojmenovanou ``current_datetime`` (tak\u017ee n\u00e1s hned trkne co d\u011bl\u00e1).\r\n\r\n    * View n\u00e1m pot\u00e9 vrac\u00ed objekt :class:`~django.http.HttpResponse` obsahuj\u00edc\u00ed\r\n      vygenerovanou odpov\u011b\u010f. Ka\u017ed\u00e1 view funkce je zodpov\u011bdn\u00e1 za vr\u00e1cen\u00ed objektu\r\n      :class:`~django.http.HttpResponse`. (Jsou zde n\u011bjak\u00e9 v\u00fdjimky, k t\u011bm se\r\n      dostaneme pozd\u011bji)\r\n\r\n.. admonition:: \u010casov\u00e9 p\u00e1smo Djanga\r\n\r\n    Ve v\u00fdchoz\u00ed konfiguraci je Django nastaveno na \u010dasov\u00e9 p\u00e1smo\r\n    ``America/Chicago``.  Potomk\u016fm praotce \u010cecha doporu\u010dujeme zm\u011bnit prom\u011bnnou\r\n    :setting:`TIME_ZONE` na hodnotu ``Europe/Prague``.\r\n\r\nP\u0159i\u0159azov\u00e1n\u00ed URL adres k views\r\n=============================\r\n\r\nKr\u00e1tk\u00e9 op\u00e1\u010dko: na\u0161e view funkce vrac\u00ed HTML str\u00e1nku s aktu\u00e1ln\u00edm \u010dasem. Pokud\r\njej chceme zobrazit po zad\u00e1n\u00ed ur\u010dit\u00e9 URL adresy, mus\u00edme vytvo\u0159it z\u00e1znam v *URLconf*; pro\r\ninstrukce se pod\u00edvejte na :doc:`/topics/http/urls`.\r\n\r\nVracen\u00ed chyb\r\n============\r\n\r\nVracen\u00ed chybov\u00fdch k\u00f3d\u016f HTTP je v Djangu snadn\u00e9. V\u0161echny k\u00f3dy jsou\r\nodvozeny z t\u0159\u00eddy :class:`~django.http.HttpResponse` (jejich kompletn\u00ed seznam\r\nnaleznete v dokumentaci :ref:`request/response <ref-httpresponse-subclasses>`).\r\nSta\u010d\u00ed kdy\u017e nam\u00edsto :class:`~django.http.HttpResponse` vr\u00e1t\u00edte n\u011bkterou z definovan\u00fdch podt\u0159\u00edd \r\n:class:`~django.http.HttpResponse`, a chybov\u00e9 hl\u00e1\u0161en\u00ed je na sv\u011bt\u011b::\r\n\r\n    def muj_view(request):\r\n        # ...\r\n        if foo:\r\n            return HttpResponseNotFound('<h1>Stranka neexistuje</h1>')\r\n        else:\r\n            return HttpResponse('<h1>Stranka existuje</h1>')\r\n\r\nHTTP specifikace definuje velk\u00e9 mno\u017estv\u00ed stav\u016f a Django p\u0159in\u00e1\u0161\u00ed definice\r\npouze t\u011bch nejobvyklej\u0161\u00edch. Pokud ve va\u0161\u00ed aplikaci budete pot\u0159ebovat vracet\r\njin\u00fd typ chyby, m\u016f\u017eete poslat stavov\u00fd k\u00f3d HTTP p\u0159\u00edmo p\u0159es konstruktor t\u0159\u00eddy\r\n:class:`~django.http.HttpResponse`::\r\n\r\n    def muj_view(request):\r\n        # ...\r\n\r\n        # Vratime \"vytvoreny\" stavovy kod (201).\r\n        return HttpResponse(status=201)\r\n\r\n\r\nV\u00fdjimka Http404\r\n---------------------\r\n\r\n.. class:: django.http.Http404()\r\n\r\nP\u0159i vr\u00e1cen\u00ed chyby :class:`~django.http.HttpResponseNotFound` mus\u00edme dodat\r\ni HTML obsah chybov\u00e9 str\u00e1nky::\r\n\r\n    return HttpResponseNotFound('<h1>Stranka nenalezena</h1>')\r\n\r\nPro v\u011bt\u0161\u00ed pohodl\u00ed (a taky proto\u017ee je dobr\u00e9 generovat pro chybu 404 v\u017edy stejnou\r\nstr\u00e1nku) n\u00e1m Django poskytuje v\u00fdjimku ``Http404``. Jakmile ji kdekoliv ve view\r\nfunkci vyvol\u00e1me, Django ji odchyt\u00ed a vr\u00e1t\u00ed standardn\u00ed chybovou str\u00e1nku pro va\u0161\u00ed\r\naplikaci v\u010detn\u011b chybov\u00e9ho HTTP k\u00f3du 404.\r\n\r\nN\u00e1zorn\u00e9 vyu\u017eit\u00ed::\r\n\r\n    from django.http import Http404\r\n\r\n    def detail(request, poll_id):\r\n        try:\r\n            p = Poll.objects.get(pk=poll_id)\r\n        except Poll.DoesNotExist:\r\n            raise Http404\r\n        return render_to_response('polls/detail.html', {'poll': p})\r\n\r\nPokud chcete v\u00fdjimku ``Http404`` vyu\u017e\u00edt naplno, je vhodn\u00e9 um\u00edstit do adres\u00e1\u0159e s\r\n\u0161ablonami soubor ``404.html``, jeho\u017e obsah se u\u017eivatel\u016fm va\u0161\u00ed aplikace zobraz\u00ed\r\nv\u017edy, pokud vyj\u00edmka nastane.\r\n\r\nP\u0159izp\u016fsoben\u00ed chybov\u00fdch view\r\n===========================\r\n\r\nView 404 (str\u00e1nka nenalezena)\r\n-----------------------------\r\n\r\nPo vyvol\u00e1n\u00ed v\u00fdjimky ``Http404`` Django zavol\u00e1 speci\u00e1ln\u00ed view, kter\u00e9 na\u010dte a\r\nvykresl\u00ed \u0161ablonu ``404.html`` (viz ``django.views.defaults.page_not_found``).\r\n\r\nTo znamen\u00e1, \u017ee mus\u00edme vytvo\u0159it soubor ``404.html`` v ko\u0159enov\u00e9m adres\u00e1\u0159i \u0161ablon.\r\nTato \u0161ablona bude vyu\u017eita pro v\u0161echny chyby 404. Defaultn\u00ed view pro 404 nav\u00edc do\r\nkontextu \u0161ablony po\u0161le prom\u011bnnou ``request_path`` s URL adresou na kter\u00e9 chyba\r\nnastala.\r\n\r\nView ``page_not_found`` by m\u011blo b\u00fdt dostate\u010dn\u00e9 pro 99% webov\u00fdch aplikac\u00edch, ale\r\nkdyby jste ho z n\u011bjak\u00e9ho d\u016fvodu necht\u011bli pou\u017e\u00edt, sta\u010d\u00ed ve va\u0161em URLconf\r\nnadefinovat prom\u011bnnou ``handler404``::\r\n\r\n    handler404 = 'mysite.views.my_custom_404_view'\r\n\r\nAby jste v\u011bd\u011bli: fach\u00e1 to tak, \u017ee Django se nejprve pod\u00edv\u00e1 do URLconfu, a\r\nteprve pokud tam nenajde ``handler404``, pou\u017eije v\u00fdchoz\u00ed\r\n``django.views.defaults.page_not_found``.\r\n\r\n\u010cty\u0159i v\u011bci ohledn\u011b view 404:\r\n\r\n    * View 404 je vol\u00e1no i v p\u0159\u00edpadech, kdy Django v definici URLconf nenajde\r\n      pravidlo pro po\u017eadovanou str\u00e1nku.\r\n\r\n    * Kdy\u017e si nenadefinujete sv\u00e9 vlastn\u00ed view pro 404 \u2014 a pou\u017e\u00edv\u00e1te z\u00e1kladn\u00ed view\r\n      (co\u017e je doporu\u010deno) \u2014 st\u00e1le m\u00e1te jednu povinnost: mus\u00edte vytvo\u0159it soubor\r\n      ``404.html`` v rootu \u0161ablonov\u00e9ho adres\u00e1\u0159e.\r\n\r\n    * Do \u0161ablony se pos\u00edl\u00e1 objekt :class:`~django.template.RequestContext` a\r\n      tud\u00ed\u017e bude m\u00edt p\u0159\u00edstup k prom\u011bnn\u00fdm definovan\u00fdm v\r\n      :setting:`TEMPLATE_CONTEXT_PROCESSORS`  (nap\u0159. ``MEDIA_URL`` apod.).\r\n\r\n    * Pokud je :setting:`DEBUG` nastaven na ``True`` (v ``settings.py``), tak\r\n      se view 404 nikdy nezavol\u00e1, a m\u00edsto toho bude zobrazen URLconf spole\u010dn\u011b s\r\n      hrstkou debug informac\u00ed.\r\n\r\n\r\nView 500 (server error)\r\n-----------------------\r\n\r\nPokud b\u011bhem chodu va\u0161eho view dojde k runtime chyb\u011b, zachov\u00e1 se Django podobn\u011b\r\njako v p\u0159\u00edpad\u011b chyb 404 -- zavol\u00e1 view ``django.views.defaults.server_error``\r\na to na\u010dte a zobraz\u00ed \u0161ablonu ``500.html``.\r\n\r\nV adres\u00e1\u0159i s \u0161ablonami mus\u00edte vytvo\u0159it soubor ``500.html``.\r\nTato \u0161ablona bude vyu\u017e\u00edv\u00e1na poka\u017ed\u00e9, kdy\u017e ve va\u0161\u00ed aplikaci na serveru dojde\r\nk n\u011bjak\u00e9 chyb\u011b. Defaultn\u00ed view 500 nepos\u00edl\u00e1 do \u0161ablony \u017e\u00e1dn\u00e9 prom\u011bnnn\u00e9, aby\r\nse zabr\u00e1nilo dal\u0161\u00edm p\u0159\u00edpadn\u00fdm chyb\u00e1m.\r\n\r\nView ``server_error`` by m\u011blo sta\u010dit pro 99% webov\u00fdch aplikac\u00edch, ale kdyby\r\njste ho necht\u011bli z n\u011bjak\u00e9ho d\u016fvodu pou\u017e\u00edt, sta\u010d\u00ed nadefinovat prom\u011bnnou\r\n``handler500`` ve va\u0161em URLconf::\r\n\r\n    handler500 = 'mysite.views.my_custom_error_view'\r\n\r\nAby jste v\u011bd\u011bli: fach\u00e1 to tak, \u017ee Django se nejprve pod\u00edv\u00e1 do URLconfu, a\r\nteprve pokud tam nenajde ``handler500``, pou\u017eije v\u00fdchoz\u00ed\r\n``django.views.defaults.server_error``.\r\n\r\nDv\u011b v\u011bci ohledn\u011b view 500:\r\n\r\n    * Kdy\u017e si nenadefinujete sv\u00e9 vlastn\u00ed view 500 \u2014 a pou\u017e\u00edv\u00e1te z\u00e1kladn\u00ed view\r\n      (co\u017e je doporu\u010deno) \u2014 st\u00e1le m\u00e1te jednu povinnost: mus\u00edte vytvo\u0159it soubor\r\n      ``500.html`` v rootu \u0161ablonov\u00e9ho adres\u00e1\u0159e.\r\n\r\n    * Pokud je :setting:`DEBUG` nastaven na ``True`` (v ``settings.py``), tak\r\n      se view 500 nikdy nezavol\u00e1, a nam\u00edsto toho bude zobrazen traceback s debug\r\n      informacemi o tom, kde a jak\u00e1 chyba nastala.", 
            "revision": 16591
        }
    }, 
    {
        "pk": 15, 
        "model": "translations.translationrole", 
        "fields": {
            "translation": 7, 
            "role": "korekce", 
            "user": 1
        }
    }, 
    {
        "pk": 4, 
        "model": "translations.translationrole", 
        "fields": {
            "translation": 2, 
            "role": "korekce", 
            "user": 1
        }
    }, 
    {
        "pk": 5, 
        "model": "translations.translationrole", 
        "fields": {
            "translation": 1, 
            "role": "korekce", 
            "user": 1
        }
    }, 
    {
        "pk": 6, 
        "model": "translations.translationrole", 
        "fields": {
            "translation": 3, 
            "role": "korekce", 
            "user": 1
        }
    }, 
    {
        "pk": 8, 
        "model": "translations.translationrole", 
        "fields": {
            "translation": 4, 
            "role": "korekce", 
            "user": 1
        }
    }, 
    {
        "pk": 10, 
        "model": "translations.translationrole", 
        "fields": {
            "translation": 5, 
            "role": "preklad", 
            "user": 1
        }
    }, 
    {
        "pk": 11, 
        "model": "translations.translationrole", 
        "fields": {
            "translation": 5, 
            "role": "korekce", 
            "user": 1
        }
    }, 
    {
        "pk": 13, 
        "model": "translations.translationrole", 
        "fields": {
            "translation": 6, 
            "role": "korekce", 
            "user": 1
        }
    }, 
    {
        "pk": 2, 
        "model": "translations.translationrole", 
        "fields": {
            "translation": 2, 
            "role": "preklad", 
            "user": 2
        }
    }, 
    {
        "pk": 3, 
        "model": "translations.translationrole", 
        "fields": {
            "translation": 3, 
            "role": "preklad", 
            "user": 2
        }
    }, 
    {
        "pk": 7, 
        "model": "translations.translationrole", 
        "fields": {
            "translation": 4, 
            "role": "preklad", 
            "user": 2
        }
    }, 
    {
        "pk": 12, 
        "model": "translations.translationrole", 
        "fields": {
            "translation": 6, 
            "role": "preklad", 
            "user": 2
        }
    }, 
    {
        "pk": 1, 
        "model": "translations.translationrole", 
        "fields": {
            "translation": 1, 
            "role": "preklad", 
            "user": 2
        }
    }, 
    {
        "pk": 9, 
        "model": "translations.translationrole", 
        "fields": {
            "translation": 3, 
            "role": "korekce", 
            "user": 3
        }
    }, 
    {
        "pk": 14, 
        "model": "translations.translationrole", 
        "fields": {
            "translation": 7, 
            "role": "preklad", 
            "user": 4
        }
    }, 
    {
        "pk": 4, 
        "model": "flatpages.flatpage", 
        "fields": {
            "registration_required": false, 
            "title": "Django \u010cesk\u00e1 republika", 
            "url": "/", 
            "template_name": "flatpages/homepage.html", 
            "sites": [
                1
            ], 
            "content": "<div id=\"wrapcontent\" class=\"span-22 prefix-1 suffix-1 last\">\r\n<div id=\"content\">\r\n    <div class=\"span-15 suffix-1\">\r\n        <!-- uvod -->\r\n        <h1>Poznejte Django</h1>\r\n\r\n<div class=\"box\">\r\n        <h3 class=\"thin\">Django je vysp\u011bl\u00fd webov\u00fd  framework napsan\u00fd v jazyce Python, kter\u00fd podporuje rychl\u00fd v\u00fdvoj a \u010dist\u00e9, pragmatick\u00e9 konstrukce.</h3>\r\n\r\n        <p class=\"spbefore\">Django bylo vyvinuto p\u0159ed n\u011bkolika lety v rychle se m\u011bn\u00edc\u00edm novin\u00e1\u0159sk\u00e9m\r\nprost\u0159ed\u00ed. M\u011blo pomoci zvl\u00e1dat dva velk\u00e9 \u00fakoly: intenzivn\u00ed pln\u011bn\u00ed\r\nterm\u00edn\u016f v redakci a dodr\u017eovat p\u0159\u00edsn\u00e9 po\u017eadavky v\u00fdvoj\u00e1\u0159\u016f -- autor\u016f\r\nframeworku.</p>\r\n<p>Django v\u00e1m umo\u017en\u00ed vytv\u00e1\u0159et v\u00fdkonn\u00e9 a elegantn\u00ed webov\u00e9 aplikace v neuv\u011b\u0159iteln\u011b kr\u00e1tk\u00e9m \u010dase.</p>\r\n</div>\r\n<br class=\"clear\" />\r\n        <div class=\"span-5\">\r\n        <p>Django se sna\u017e\u00ed co nejv\u00edce v\u011bc\u00ed automatizovat a dr\u017e\u00ed se principu <a href=\"http://c2.com/cgi/wiki?DontRepeatYourself\">DRY</a> (z anglick\u00e9ho <em>Don't Repeat Yourself</em> -- neopakuj se).</p>\r\n</div>\r\n        <div class=\"span-5\">\r\n        <p>P\u0159e\u010dt\u011bte si <a href=\"/dokumentace/intro/overview/\">stru\u010dn\u00e9 p\u0159edstaven\u00ed</a>.</p>\r\n</div>\r\n        <div class=\"span-5 last\">\r\n        <p>Jste p\u0159ipraven\u00ed programovat? <a href=\"/dokumentace/intro/install/\">Nainstalujte si Django</a> a vytvo\u0159te svou <a href=\"/dokumentace/intro/tutorial01/\">prvn\u00ed aplikaci</a>.</p>\r\n</div>\r\n\r\n<br />\r\n\r\n        <!-- boxy -->\r\n        <h2 class=\"clear\">Framework Django v kostce</h2>\r\n        <div class=\"span-5\">\r\n            <h4 class=\"thin\"><abbr title=\"Object-relational mapping\">ORM</abbr></h4>\r\n            <p>Nadefinujte sv\u00e9 <a href=\"http://docs.djangoproject.com/en/dev/topics/db/models/\">datov\u00e9 modely</a> v Pythonu. Automaticky z\u00edsk\u00e1te bohat\u00e9 <a href=\"http://docs.djangoproject.com/en/dev/topics/db/queries/\">datab\u00e1zov\u00e9 API</a> -- pokud to ale\r\nbude t\u0159eba, m\u016f\u017eete dotazy st\u00e1le ps\u00e1t v syrov\u00e9m SQL.</p>\r\n        </div>\r\n        <div class=\"span-5\">\r\n            <h4 class=\"thin\">Administra\u010dn\u00ed rozhran\u00ed</h4>\r\n            <p>U\u0161et\u0159ete si pr\u00e1ci s programov\u00e1n\u00edm administra\u010dn\u00edho rozhran\u00ed pro vytv\u00e1\u0159en\u00ed a editaci obsahu. Django ho <a href=\"http://docs.djangoproject.com/en/dev/intro/tutorial02/\">vytvo\u0159\u00ed za v\u00e1s</a>.</p>\r\n        </div>\r\n        <div class=\"span-5 last\">\r\n            <h4 class=\"thin\">Elegantn\u00ed URL</h4>\r\n            <p>Nevytv\u00e1\u0159ejte kostrbat\u00e9 <a href=\"http://docs.djangoproject.com/en/dev/topics/http/urls/\">URL adresy</a> a nenechte se omezovat vlastn\u00edm frameworkem. Bu\u010fte tak pru\u017en\u00ed, jak jen pot\u0159ebujete.</p>\r\n        </div>\r\n\r\n        <div class=\"span-5 clear\">\r\n            <h4 class=\"thin\">\u0160ablonovac\u00ed syst\u00e9m</h4>\r\n            <p>Django nab\u00edz\u00ed siln\u00fd, roz\u0161i\u0159iteln\u00fd a srozumiteln\u00fd <a href=\"http://docs.djangoproject.com/en/dev/topics/templates/\">jazyk pro tvorbu \u0161ablon</a>. Odd\u011blte design, obsah a k\u00f3d v Pythonu.</p>\r\n        </div>\r\n        <div class=\"span-5\">\r\n            <h4 class=\"thin\">Cache syst\u00e9m</h4>\r\n            <p>Vyu\u017eijte memcached nebo jin\u00fd ke\u0161ovac\u00ed framework pro dosa\u017een\u00ed <a href=\"http://docs.djangoproject.com/en/dev/topics/cache/\">mimo\u0159\u00e1dn\u00fdch v\u00fdkon\u016f</a> -- ukl\u00e1dejte do cache cel\u00e9 str\u00e1nky, jejich fragmenty, nebo t\u0159eba v\u00fdsledky API dotaz\u016f.</p>\r\n        </div>\r\n        <div class=\"span-5 last\">\r\n            <h4 class=\"thin\">Internacionalizace</h4>\r\n            <p>Django pln\u011b podporuje <a href=\"http://docs.djangoproject.com/en/dev/topics/i18n/\">v\u00edcejazy\u010dn\u00e9 aplikace</a>. Specifikujte sv\u00e9 \u0159et\u011bzce k p\u0159ekladu a vyu\u017eijte funkce specifick\u00e9 pro internacionalizaci.</p>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- sloupec -->\r\n    <div class=\"span-6 last\">\r\n\r\n        <h3>Download</h3>\r\n<p class=\"large\"><a href=\"/download/\">Posledn\u00ed stabiln\u00ed verze</a><br />\r\n<span class=\"small\">\r\nOpen-source, <a href=\"http://code.djangoproject.com/browser/django/trunk/LICENSE\">licence BSD</a></span></p>\r\n\r\n\r\n        <h3>Django v \u010cesk\u00e9 republice</h3>\r\n<p>Djangu se da\u0159\u00ed i u n\u00e1s. V sekci <a href=\"/komunita/\">Komunita</a> naleznete mimo jin\u00e9 seznam \u010desk\u00fdch v\u00fdvoj\u00e1\u0159\u016f a jejich prac\u00ed. </p>\r\n\r\n        <h3>Django v zahrani\u010d\u00ed</h3>\r\n<p>Situace ve sv\u011bt\u011b je velice p\u0159\u00edzniv\u00e1. Web\u016f realizovan\u00fdch Djangem je spousta, mezi ty nejv\u011bt\u0161\u00ed pat\u0159\u00ed <a href=\"http://lawrence.com/\">lawrence.com</a>, <a href=\"http://www.washingtonpost.com/\">washingtonpost.com</a>, <a href=\"http://www.everyblock.com/\">EveryBlock</a> a spousta <a href=\"http://www.djangosites.org/\">dal\u0161\u00edch</a>.</p>\r\n    </div>\r\n</div>\r\n</div>\r\n", 
            "enable_comments": false
        }
    }, 
    {
        "pk": 5, 
        "model": "flatpages.flatpage", 
        "fields": {
            "registration_required": false, 
            "title": "Dokumentace", 
            "url": "/dokumentace/", 
            "template_name": "", 
            "sites": [
                1
            ], 
            "content": "<div id=\"wrapcontent\" class=\"span-22 prefix-1 suffix-1 last\">\r\n<div id=\"content\">\r\n\r\n<h1>Dokumentace</h1>\r\n\r\n<p>C\u00edlem t\u011bchto str\u00e1nek je zp\u0159\u00edstupnit <strong>z\u00e1kladn\u00ed\r\ninformace</strong> o webov\u00e9m frameworku <a\r\nhref=\"http://www.djangoproject.com/\">Django</a> v <strong>\u010desk\u00e9m jazyce</strong> a nasm\u011brovat nov\u00e9 u\u017eivatele na vybran\u00e9 weby, kde se dozv\u00ed dal\u0161\u00ed zaj\u00edmavosti.</p>\r\n\r\n<div class=\"clear span-8\">\r\n<div class=\"box\">\r\n<h2>P\u0159elo\u017een\u00e9 dokumenty</h2>\r\n<ul>\r\n<li><a href=\"/dokumentace/intro/overview/\">P\u0159edstaven\u00ed z\u00e1kladn\u00edch rys\u016f Djanga</a></li>\r\n<li><a href=\"/dokumentace/intro/install/\">Instalace</a></li>\r\n<li>Uk\u00e1zkov\u00e1 aplikace</li>\r\n<ul>\r\n<li><a href=\"/dokumentace/intro/tutorial01/\">1.\u010d\u00e1st</a><br />\r\nzalo\u017een\u00ed projektu, modely, API</li>\r\n<li><a href=\"/dokumentace/intro/tutorial02/\">2.\u010d\u00e1st</a><br />\r\nadministra\u010dn\u00ed rozhran\u00ed</li>\r\n<li><a href=\"/dokumentace/intro/tutorial03/\">3.\u010d\u00e1st</a><br />\r\nviews (pohledy) a konfigurace URL</li>\r\n<li><a href=\"/dokumentace/intro/tutorial04/\">4.\u010d\u00e1st</a><br />\r\nformul\u00e1\u0159e, generick\u00e9 view</li>\r\n</ul>\r\n<li><a href=\"/dokumentace/topics/http/views/\">P\u00ed\u0161eme views</a></li>\r\n</ul>\r\n<p><strong>Pokud chcete s p\u0159ekl\u00e1d\u00e1n\u00edm pomoct, a zp\u0159\u00edstupnit na\u0161inc\u016fm dal\u0161\u00ed\r\ncenn\u00e9 informace, <a href=\"/kontakt/\">ozv\u011bte se</a>.</strong></p>\r\n</div><br /></div>\r\n\r\n\r\n<div class=\"span-7\">\r\n<h2>Informace v angli\u010dtin\u011b</h2>\r\n<ul>\r\n<li><a href=\"http://docs.djangoproject.com/en/dev/\">Ofici\u00e1ln\u00ed dokumentace</a><br />\r\nNejaktu\u00e1ln\u011bj\u0161\u00ed verze dokumentace.</li>\r\n<li><a href=\"http://www.djangobook.com/\">The Django Book</a><br />\r\nV prosinci 2007 vy\u0161la kniha <a href=\"http://www.amazon.com/gp/product/1590597257?ie=UTF8&tag=jacobianorg-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=1590597257\">The Definitive Guide to Django</a>. Jej\u00ed online verze je <strong>zdarma dostupn\u00e1</strong>.</li>\r\n<li><a href=\"http://code.djangoproject.com/\">Django Wiki</a><br />\r\nAuto\u0159i Djanga provozuj\u00ed <a href=\"http://code.djangoproject.com/\">TRAC</a>, jeho\u017e sou\u010d\u00e1st\u00ed je i obs\u00e1hl\u00e9 <a href=\"http://code.djangoproject.com/wiki\">Wiki</a> s \u0161irok\u00fdm spektrem informac\u00ed. Do TRACu je rovn\u011b\u017e mo\u017en\u00e9 hl\u00e1sit <a href=\"http://code.djangoproject.com/simpleticket\">chyby</a> \u010di <a href=\"http://code.djangoproject.com/browser/django\">prohl\u00ed\u017eet k\u00f3d</a> Djanga online.</li>\r\n<li><strong>Knihy</strong><br />\r\nKoup\u00ed n\u011bkter\u00e9 z n\u00e1sleduj\u00edc\u00edch knih rozhodn\u011b neprohloup\u00edte: <a href=\"http://www.amazon.com/Definitive-Guide-Django-Development-Second/dp/143021936X/ref=sr_1_5?ie=UTF8&s=books&qid=1247409774&sr=1-5\">The Definitive Guide to Django: Web Development Done Right</a>, <a href=\"http://www.amazon.com/Practical-Django-Projects-Second-Bennett/dp/1430219386/ref=sr_1_6?ie=UTF8&s=books&qid=1247409774&sr=1-6\">Practical Django Projects</a>, <a href=\"http://www.amazon.com/Pro-Django-Experts-Voice-Development/dp/1430210478/ref=sr_1_1?ie=UTF8&s=books&qid=1247409774&sr=1-1\">Pro Django</a></li>\r\n</ul>\r\n</div>\r\n\r\n<div class=\"span-7 last\">\r\n<h2>Perly v s\u00edti</h2>\r\n<p>Kvalitn\u00edch informac\u00ed o Djangu je na internetu spousta (sledujte komunitn\u00ed <a href=\"http://www.djangoproject.com/rss/community/\">RSS</a>).</p>\r\n<p>V\u00fdb\u011br t\u011bch nejzaj\u00edmav\u011bj\u0161\u00edch naleznete na str\u00e1nce <a\r\nhref=\"/dokumentace/dalsi-zdroje/\">Dal\u0161\u00ed u\u017eite\u010dn\u00e9 zdroje</a>.</p>\r\n</div>\r\n\r\n<br class=\"clear\" />\r\n\r\n<p class=\"spbefore clear\"><em>Pozn\u00e1mka: Pro lep\u0161\u00ed orientaci v dokumentech jsou odkazy vedouc\u00ed ven z tohoto webu (tj.\r\nnej\u010dast\u011bji na ofici\u00e1ln\u00ed dokumentaci v angli\u010dtin\u011b) zv\u00fdrazn\u011bny symbolem\r\n\u0161ipky <img src=\"/media/bluetrip/img/icons/external.png\" />.</em></p>\r\n\r\n</div>\r\n\r\n</div>\r\n", 
            "enable_comments": true
        }
    }, 
    {
        "pk": 6, 
        "model": "flatpages.flatpage", 
        "fields": {
            "registration_required": false, 
            "title": "Dal\u0161\u00ed u\u017eite\u010dn\u00e9 zdroje informac\u00ed", 
            "url": "/dokumentace/dalsi-zdroje/", 
            "template_name": "", 
            "sites": [
                1
            ], 
            "content": "<div id=\"wrapcontent\" class=\"span-22 prefix-1 suffix-1 last\">\r\n<div id=\"content\">\r\n<h1>Dal\u0161\u00ed u\u017eite\u010dn\u00e9 zdroje informac\u00ed</h1>\r\n\r\n<div class=\"span-7 suffix-1\">\r\n<h2>Aplikace &amp; k\u00f3d</h2>\r\n<p>Pokud se chyst\u00e1te vytvo\u0159it n\u011bjak\u00fd projekt, v\u011bnujte chv\u00edli \r\nprozkoum\u00e1n\u00ed n\u00e1sleduj\u00edc\u00edch zdroj\u016f. <strong>Je velmi\r\npravd\u011bpodobn\u00e9</strong>, \u017ee podobn\u00fd probl\u00e9m jako vy u\u017e n\u011bkdo \u0159e\u0161il. Nalezen\u00e1\r\naplikace, \u010di kousek k\u00f3du v\u00e1m u\u0161et\u0159\u00ed hodiny \u010dasu:</p>\r\n<dl>\r\n<dt><a href=\"http://www.djangosnippets.org/\">Django snippets</a></dt>\r\n<dd>Obrovsk\u00fd repozit\u00e1\u0159 kousk\u016f k\u00f3d\u016f, t\u0159\u00edd\u011bn\u00fdch podle tag\u016f a\r\npopularity. Naleznete zde nov\u00e9 tagy do \u0161ablon, zaj\u00edmav\u00e9 middleware,\r\ndopl\u0148ky pro formul\u00e1\u0159e, apod.</dd>\r\n<dt><a href=\"http://djangoplugables.com/\">Django Plugables</a></dt>\r\n<dd>Seznam znovupou\u017eiteln\u00fdch aplikac\u00ed.<br />Pro p\u0159ipomenut\u00ed -- aplikace je ve\r\nsrovn\u00e1n\u00ed se \"snippety\" v\u011bt\u0161\u00ed kus k\u00f3du, \u0159e\u0161\u00edc\u00ed konkr\u00e9tn\u00ed v\u011bc, nap\u0159.\r\nblogovac\u00ed syst\u00e9m, anketu, registraci u\u017eivatele, apod.</dd>\r\n</div>\r\n\r\n<div class=\"span-7 suffix-1\">\r\n<h2>Zaj\u00edmav\u00e9 weby</h2>\r\n<dt><a href=\"http://www.djangosites.org/\">DjangoSites.org</a></dt>\r\n<dd>Velk\u00fd seznam web\u016f, kter\u00e9 poh\u00e1n\u00ed Django.</dd>\r\n<dt><a href=\"http://djangogigs.com/\">Django Gigs</a></dt>\r\n<dd>Hled\u00e1te pr\u00e1ci, nebo naopak chcete pro sv\u016fj projekt z\u00edskat v\u00fdvoj\u00e1\u0159e v\r\nDjangu? Vystavte sv\u016fj inzer\u00e1t na <a href=\"http://djangogigs.com/\">Django\r\nGigs</a>.</dd>\r\n<dt><a href=\"http://djangopeople.net/\">Django People</a></dt>\r\n<dd>Adres\u00e1\u0159 djangonaut\u016f z cel\u00e9ho sv\u011bta, v\u010detn\u011b <a href=\"http://djangopeople.net/cz/\">\u010cesk\u00e9 republiky</a>.</dd>\r\n</dl>\r\n</div>\r\n\r\n<div class=\"span-6 last\">\r\n<h2>Hosting</h2>\r\n<p>S provozov\u00e1n\u00edm Django aplikac\u00ed to v \u010cesk\u00e9 republice nen\u00ed jednoduch\u00e9. Mo\u017enost\u00ed moc nen\u00ed:</p>\r\n<ul>\r\n<li><a href=\"http://g-hosting.cz/cz/price-list/ruby-python/\">G-Hosting</a></li>\r\n<li><a href=\"http://www.rosti.cz/\">Ro\u0161t\u00ed</a></li>\r\n<li><a href=\"http://www.virtualmaster.cz/\">VirtualMaster</a></li>\r\n</ul>\r\n\r\n\r\n<p>Ve sv\u011bt\u011b je ale situace jin\u00e1 -- seznam hostingov\u00fdch spole\u010dnost\u00ed podporuj\u00edc\u00ed Django je <a href=\"http://code.djangoproject.com/wiki/DjangoFriendlyWebHosts\">podstatn\u011b del\u0161\u00ed</a>. Prohl\u00e9dn\u011bte si tak\u00e9 <a href=\"http://djangofriendly.com/hosts/\">jejich hodnocen\u00ed</a>.</p>\r\n<p>Pozn\u00e1mka: hostov\u00e1n\u00ed v zahrani\u010d\u00ed se ur\u010dit\u011b nebojte. Za cca 2000 K\u010d/rok se d\u00e1 po\u0159\u00eddit \u0161pi\u010dkov\u00fd hosting se v\u0161\u00edm v\u0161udy (datab\u00e1ze, dostatek m\u00edsta, SSH p\u0159\u00edstup, atd.).</p>\r\n\r\n</div>\r\n\r\n</div>\r\n</div>\r\n\r\n", 
            "enable_comments": true
        }
    }, 
    {
        "pk": 1, 
        "model": "flatpages.flatpage", 
        "fields": {
            "registration_required": false, 
            "title": "Rychl\u00fd instala\u010dn\u00ed pr\u016fvodce", 
            "url": "/dokumentace/intro/install/", 
            "template_name": "flatpages/doc.html", 
            "sites": [
                1
            ], 
            "content": "<div id=\"wrapcontent\" class=\"span-22 last prefix-1 suffix-1\">\r\n    <div id=\"content\" class=\"span-14 suffix-1\">\r\n        \r\n        \r\n\r\n\r\n\r\n        <div class=\"section\" id=\"s-rychl-instala-n-pr-vodce\">\r\n<span id=\"s-intro-install\"></span><span id=\"rychl-instala-n-pr-vodce\"></span><span id=\"intro-install\"></span><h1>Rychl\u00fd instala\u010dn\u00ed pr\u016fvodce<a class=\"headerlink\" href=\"#rychl-instala-n-pr-vodce\" title=\"Permalink na tento nadpis\">\u00b6</a></h1>\r\n<p>Ne\u017e budete moci Django pou\u017e\u00edvat, mus\u00edte jej nainstalovat. K dispozici je <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/install/#topics-install\"><em>kompletn\u00ed instala\u010dn\u00ed pr\u016fvodce</em></a>,\r\nkter\u00fd popisuje v\u0161echny mo\u017enosti instalace; tento pr\u016fvodce v\u00e1s provede\r\njednoduchou, minim\u00e1ln\u00ed instalac\u00ed, kter\u00e1 v\u00e1m bude sta\u010dit k sezn\u00e1men\u00ed se\r\ns Djangem.</p>\r\n<div class=\"section\" id=\"s-instalace-pythonu\">\r\n<span id=\"instalace-pythonu\"></span><h2>Instalace Pythonu<a class=\"headerlink\" href=\"#instalace-pythonu\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Proto\u017ee Django je framework napsan\u00fd v Pythonu, pot\u0159ebuje m\u00edt nainstalovan\u00fd Python.\r\nDjango si rozum\u00ed s verzemi 2.4 a\u017e 2.7 (kv\u016fli zp\u011btn\u00e9 nekompatibilit\u011b Pythonu 3.0\r\nDjango v t\u00e9to verzi nefunguje; dal\u0161\u00ed podrobnosti o podpo\u0159e Pythonu a p\u0159echodu\r\nna trojkovou \u0159adu naleznete na str\u00e1nce s <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/faq/install/#faq-install\"><em>\u010dast\u00fdmi dotazy</em></a>), ale doporu\u010dujeme v\u00e1m Python 2.5 \u010di\r\nnov\u011bj\u0161\u00ed. S touto verz\u00ed nebudete muset slo\u017eit\u011b nastavovat datab\u00e1zi &#8211; Python\r\nod v. 2.5 obsahuje &#8220;lehkoton\u00e1\u017en\u00ed&#8221; datab\u00e1zi <a class=\"reference external\" href=\"http://sqlite.org/\">SQLite</a>.</p>\r\n<p>Python z\u00edsk\u00e1te na adrese <a class=\"reference external\" href=\"http://www.python.org\">http://www.python.org</a>. Pokud pou\u017e\u00edv\u00e1te Linux nebo Mac\r\nOS X, pravd\u011bpodobn\u011b jej ji\u017e m\u00e1te nainstalov\u00e1n.</p>\r\n<div class=\"admonition-django-v-jythonu admonition \">\r\n<p class=\"first admonition-title\">Django v Jythonu</p>\r\n<p class=\"last\">Pokud pou\u017e\u00edv\u00e1te <a class=\"reference external\" href=\"http://jython.org/\">Jython</a> (implementaci Pythonu pro platformu Java),\r\nbudete muset prov\u00e9st n\u011bkolik zvl\u00e1\u0161tn\u00edch krok\u016f. Podrobnosti naleznete\r\nv dokumentu <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/howto/jython/#howto-jython\"><em>Running Django on Jython</em></a>.</p>\r\n</div>\r\n<p>\u017de je Python nainstalovan\u00fd si m\u016f\u017eete ov\u011b\u0159it naps\u00e1n\u00edm <tt class=\"docutils literal\"><span class=\"pre\">python</span></tt> do va\u0161eho\r\nshellu; m\u011bli by jste vid\u011bt n\u011bco jako:</p>\r\n<div class=\"highlight-python\"><pre>Python 2.5.1 (r251:54863, Jan 17 2008, 19:35:17)\r\n[GCC 4.0.1 (Apple Inc. build 5465)] on darwin\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n&gt;&gt;&gt;</pre>\r\n</div>\r\n</div>\r\n<div class=\"section\" id=\"s-nastaven-datab-ze\">\r\n<span id=\"nastaven-datab-ze\"></span><h2>Nastaven\u00ed datab\u00e1ze<a class=\"headerlink\" href=\"#nastaven-datab-ze\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Pokud jste nainstalovali Python 2.5 nebo nov\u011bj\u0161\u00ed, m\u016f\u017eete tento krok\r\np\u0159esko\u010dit.</p>\r\n<p>Pokud ne, nebo pokud chcete pracovat s &quot;velk\u00fdmi&quot; datab\u00e1zemi\r\njako je PostgreSQL, MySQL nebo Oracle, nahl\u00e9dn\u011bte do\r\n<a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/install/#database-installation\"><em>informac\u00ed o instalaci datab\u00e1z\u00ed</em></a>.</p>\r\n</div>\r\n<div class=\"section\" id=\"s-odstran-n-star-ch-verz-djanga\">\r\n<span id=\"odstran-n-star-ch-verz-djanga\"></span><h2>Odstran\u011bn\u00ed star\u00fdch verz\u00ed Djanga<a class=\"headerlink\" href=\"#odstran-n-star-ch-verz-djanga\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Pokud m\u00e1te na po\u010d\u00edta\u010di nainstalov\u00e1nu star\u0161\u00ed verzi Djanga, mus\u00edte ji nejprve\r\n<a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/install/#removing-old-versions-of-django\"><em>odebrat</em></a> a teprve pot\u00e9 se pustit do instalace nov\u011bj\u0161\u00ed verze.</p>\r\n</div>\r\n<div class=\"section\" id=\"s-instalace-djanga\">\r\n<span id=\"instalace-djanga\"></span><h2>Instalace Djanga<a class=\"headerlink\" href=\"#instalace-djanga\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Existuj\u00ed t\u0159i jednoduch\u00e9 mo\u017enosti, jak Django nainstalovat:</p>\r\n<ul class=\"simple\">\r\n<li>Instalace Djanga, kter\u00e1 je <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/misc/distributions/#misc-distributions\"><em>poskytov\u00e1na va\u0161\u00edm opera\u010dn\u00edm\r\nsyst\u00e9mem</em></a>. Toto je nejrychlej\u0161\u00ed mo\u017enost (za p\u0159edpokladu,\r\n\u017ee pro v\u00e1\u0161 syst\u00e9m existuje bal\u00ed\u010dek s  Djangem).</li>\r\n<li><a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/install/#installing-official-release\"><em>Instalace ofici\u00e1ln\u00ed verze</em></a>. Tato varianta je ide\u00e1ln\u00ed pro u\u017eivatele,\r\nkte\u0159\u00ed cht\u011bj\u00ed stabiln\u00ed, ov\u011b\u0159enou verzi frameworku a nevad\u00ed jim, \u017ee nebudou m\u00edt dostupn\u00e9\r\n\u017ehav\u00e9 novinky Djanga.</li>\r\n<li><a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/install/#installing-development-version\"><em>Instalace nejnov\u011bj\u0161\u00ed v\u00fdvojov\u00e9 verze</em></a>. Ide\u00e1ln\u00ed cesta pro v\u00fdvoj\u00e1\u0159e, kte\u0159\u00ed pot\u0159ebuj\u00ed\r\nnejnov\u011bj\u0161\u00ed funkce frameworku a neboj\u00ed se pou\u017e\u00edvat mladi\u010dk\u00fd k\u00f3d.</li>\r\n</ul>\r\n<div class=\"admonition warning\">\r\n<p class=\"first admonition-title\">Upozorn\u011bn\u00ed</p>\r\n<p class=\"last\">Pokud jste se rozhodli pro n\u011bkterou z prvn\u00edch dvou mo\u017enost\u00ed, hl\u00eddejte si\r\n\u010d\u00e1sti dokumentace ozna\u010den\u00e9 <strong>nov\u00e9 ve v\u00fdvojov\u00e9 verzi</strong> (v anglick\u00fdch \u010d\u00e1stech\r\ndokumentace ozna\u010deno jako <strong>new in development version</strong>). Tato fr\u00e1ze\r\nozna\u010duje funkce, kter\u00e9 jsou obsa\u017eeny pouze ve v\u00fdvojov\u00fdch verz\u00edch Djanga.\r\nV ofici\u00e1ln\u00ed verzi v\u00e1m s velkou pravd\u011bpodobnost\u00ed nebudou fungovat.</p>\r\n</div>\r\n</div>\r\n<div class=\"section\" id=\"s-m-o-a-je-to\">\r\n<span id=\"m-o-a-je-to\"></span><h2>M\u0148o, a je to!<a class=\"headerlink\" href=\"#m-o-a-je-to\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Hotovo -- te\u010f se kone\u010dn\u011b m\u016f\u017eete <a class=\"reference external\" href=\"/dokumentace/intro/tutorial01/#intro-tutorial01\"><em>p\u0159esunout k uk\u00e1zkov\u00e9 aplikaci</em></a>.</p>\r\n</div>\r\n</div>\r\n    </div>\r\n    <div id=\"rightSideBar\" class=\"span-7 last\">\r\n        <h3><a href=\"http://docs.djangoproject.com/en/dev/contents/\">Obsah</a></h3><ul>\r\n<li><a class=\"reference external\" href=\"#\">Rychl\u00fd instala\u010dn\u00ed pr\u016fvodce</a><ul>\r\n<li><a class=\"reference external\" href=\"#instalace-pythonu\">Instalace Pythonu</a></li>\r\n<li><a class=\"reference external\" href=\"#nastaven-datab-ze\">Nastaven\u00ed datab\u00e1ze</a></li>\r\n<li><a class=\"reference external\" href=\"#odstran-n-star-ch-verz-djanga\">Odstran\u011bn\u00ed star\u00fdch verz\u00ed Djanga</a></li>\r\n<li><a class=\"reference external\" href=\"#instalace-djanga\">Instalace Djanga</a></li>\r\n<li><a class=\"reference external\" href=\"#m-o-a-je-to\">M\u0148o, a je to!</a></li>\r\n</ul>\r\n</li>\r\n</ul><h3>Listov\u00e1n\u00ed</h3><ul>\r\n<li>P\u0159edchoz\u00ed: <a href=\"/dokumentace/intro/overview/\">Mrkn\u011bme se na Django</a></li>\r\n<li>Dal\u0161\u00ed: <a href=\"/dokumentace/intro/tutorial01/\">Prvn\u00ed aplikace v Djangu, \u010d\u00e1st 1</a></li>\r\n</ul>\r\n        \r\n        \r\n<table class=\"revision\">\r\n    \r\n    \r\n    <tr>\r\n        <th>P\u0159eklad</th>\r\n        <td>Vojta Pol\u00e1\u0161ek</td>\r\n    </tr>\r\n    \r\n    \r\n    <tr>\r\n        <th>Korekce</th>\r\n        <td>Michal Valou\u0161ek</td>\r\n    </tr>\r\n    \r\n</table>\r\n\r\n\r\n    </div>\r\n    <br class=\"clear\" />\r\n</div>\r\n\r\n", 
            "enable_comments": true
        }
    }, 
    {
        "pk": 2, 
        "model": "flatpages.flatpage", 
        "fields": {
            "registration_required": false, 
            "title": "Mrkn\u011bme se na Django", 
            "url": "/dokumentace/intro/overview/", 
            "template_name": "flatpages/doc.html", 
            "sites": [
                1
            ], 
            "content": "<div id=\"wrapcontent\" class=\"span-22 last prefix-1 suffix-1\">\r\n    <div id=\"content\" class=\"span-14 suffix-1\">\r\n        \r\n        \r\n\r\n\r\n\r\n        <div class=\"section\" id=\"s-mrkn-me-se-na-django\">\r\n<span id=\"s-intro-overview\"></span><span id=\"mrkn-me-se-na-django\"></span><span id=\"intro-overview\"></span><h1>Mrkn\u011bme se na Django<a class=\"headerlink\" href=\"#mrkn-me-se-na-django\" title=\"Permalink na tento nadpis\">\u00b6</a></h1>\r\n<p>Django bylo vyvinuto v novin\u00e1\u0159sk\u00e9m prost\u0159ed\u00ed, pro kter\u00e9 bylo d\u016fle\u017eit\u00e9,\r\naby \u00fakony spojen\u00e9 s webem byly prov\u00e1d\u011bny rychle a jednodu\u0161e. Na t\u00e9to str\u00e1nce\r\nv\u00e1m bude demonstrov\u00e1no nasazen\u00ed Djanga p\u0159i realizaci jednoduch\u00e9, datab\u00e1z\u00ed\r\n\u0159\u00edzen\u00e9 webov\u00e9 aplikace.</p>\r\n<p>C\u00edlem tohoto dokumentu je poskytnout \u00fam\u011brn\u00e9 mno\u017estv\u00ed informac\u00ed, s pomoc\u00ed\r\nkter\u00fdch dok\u00e1\u017eete pochopit, jak Django funguje. A\u017e budete p\u0159ipraveni za\u010d\u00edt\r\nsv\u016fj vlastn\u00ed projekt, m\u016f\u017eete <a class=\"reference external\" href=\"/dokumentace/intro/tutorial01/#intro-tutorial01\"><em>p\u0159ej\u00edt k demonstra\u010dn\u00ed aplikaci</em></a>,\r\nnebo se <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/index/#topics-index\"><em>za\u010d\u00edst do detailn\u011bj\u0161\u00ed dokumentace</em></a>.</p>\r\n<div class=\"section\" id=\"s-navrhn-te-sv-j-model\">\r\n<span id=\"navrhn-te-sv-j-model\"></span><h2>Navrhn\u011bte sv\u016fj model<a class=\"headerlink\" href=\"#navrhn-te-sv-j-model\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>I kdy\u017e va\u0161e aplikace m\u016f\u017ee pracovat i bez pou\u017eit\u00ed datab\u00e1ze, Django p\u0159ich\u00e1z\u00ed se sv\u00fdm\r\nobjektov\u011b-rela\u010dn\u00edm mapova\u010dem, kter\u00fd je zprost\u0159edkovatelem mezi datov\u00fdm\r\nmodelem (definovan\u00fdm jako t\u0159\u00edda Pythonu) a rela\u010dn\u00ed datab\u00e1z\u00ed.</p>\r\n<p><a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/db/models/#topics-db-models\"><em>Syntaxe datov\u00e9ho modelu</em></a> nab\u00edz\u00ed spoustu\r\nzp\u016fsob\u016f, jak modely reprezentovat. Zde je rychl\u00fd p\u0159\u00edklad:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"k\">class</span> <span class=\"nc\">Reporter</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\r\n    <span class=\"n\">full_name</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">(</span><span class=\"n\">max_length</span><span class=\"o\">=</span><span class=\"mf\">70</span><span class=\"p\">)</span>\r\n\r\n    <span class=\"k\">def</span> <span class=\"nf\">__unicode__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\r\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">full_name</span>\r\n\r\n<span class=\"k\">class</span> <span class=\"nc\">Article</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\r\n    <span class=\"n\">pub_date</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">DateTimeField</span><span class=\"p\">()</span>\r\n    <span class=\"n\">headline</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">(</span><span class=\"n\">max_length</span><span class=\"o\">=</span><span class=\"mf\">200</span><span class=\"p\">)</span>\r\n    <span class=\"n\">content</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">TextField</span><span class=\"p\">()</span>\r\n    <span class=\"n\">reporter</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">ForeignKey</span><span class=\"p\">(</span><span class=\"n\">Reporter</span><span class=\"p\">)</span>\r\n\r\n    <span class=\"k\">def</span> <span class=\"nf\">__unicode__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\r\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">headline</span>\r\n</pre></div>\r\n</div>\r\n</div>\r\n<div class=\"section\" id=\"s-nainstalujte-jej\">\r\n<span id=\"nainstalujte-jej\"></span><h2>Nainstalujte jej<a class=\"headerlink\" href=\"#nainstalujte-jej\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Spus\u0165te n\u00e1sleduj\u00edc\u00ed p\u0159\u00edkaz. Django s jeho pomoc\u00ed automaticky vytvo\u0159\u00ed datab\u00e1zov\u00e9 tabulky:</p>\r\n<div class=\"highlight-bash\"><div class=\"highlight\"><pre>manage.py syncdb\r\n</pre></div>\r\n</div>\r\n<p>P\u0159\u00edkaz <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/django-admin/#djadmin-syncdb\"><tt class=\"xref docutils literal\"><span class=\"pre\">syncdb</span></tt></a> projde v\u0161echny dostupn\u00e9 modely a\r\nvytvo\u0159\u00ed pro n\u011b tabulky v datab\u00e1zi (pokud je\u0161t\u011b neexistuj\u00ed).</p>\r\n</div>\r\n<div class=\"section\" id=\"s-u-vejte-si-api-rozhran\">\r\n<span id=\"u-vejte-si-api-rozhran\"></span><h2>U\u017e\u00edvejte si API rozhran\u00ed<a class=\"headerlink\" href=\"#u-vejte-si-api-rozhran\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Tak. Te\u010f, kdy\u017e m\u00e1me definovan\u00fd model, a vytvo\u0159eny v\u0161echny d\u016fle\u017eit\u00e9\r\ntabulky v datab\u00e1zi, m\u016f\u017eeme se pustit do objevov\u00e1n\u00ed rozs\u00e1hl\u00e9ho <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/db/queries/#topics-db-queries\"><em>Python API</em></a> pro p\u0159\u00edstup k ulo\u017een\u00fdm dat\u016fm. API je vytv\u00e1\u0159eno za\r\nchodu, nen\u00ed t\u0159eba pro n\u011bj generovat \u017e\u00e1dn\u00fd k\u00f3d:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span> <span class=\"nn\">mysite.models</span> <span class=\"kn\">import</span> <span class=\"n\">Reporter</span><span class=\"p\">,</span> <span class=\"n\">Article</span>\r\n\r\n<span class=\"go\"># V systemu jeste nejsou zadni novinari.</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">Reporter</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">()</span>\r\n<span class=\"go\">[]</span>\r\n\r\n<span class=\"go\"># Vytvorime prvniho novinare.</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">r</span> <span class=\"o\">=</span> <span class=\"n\">Reporter</span><span class=\"p\">(</span><span class=\"n\">full_name</span><span class=\"o\">=</span><span class=\"s\">&#39;John Smith&#39;</span><span class=\"p\">)</span>\r\n\r\n<span class=\"go\"># Ulozime objekt do databaze. P\u0159\u00edkaz save() musime volat explicitne.</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">r</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">()</span>\r\n\r\n<span class=\"go\"># Ted ma ID.</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">r</span><span class=\"o\">.</span><span class=\"n\">id</span>\r\n<span class=\"go\">1</span>\r\n\r\n<span class=\"go\"># A novinar uz je v databazi.</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">Reporter</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">()</span>\r\n<span class=\"go\">[&lt;Reporter: John Smith&gt;]</span>\r\n\r\n<span class=\"go\"># Pole modelu jsou reprezentovana jako atributy Python objektu.</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">r</span><span class=\"o\">.</span><span class=\"n\">full_name</span>\r\n<span class=\"go\">&#39;John Smith&#39;</span>\r\n\r\n<span class=\"go\"># Django nabizi rozsahle API pro dotazovani databaze.</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">Reporter</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"nb\">id</span><span class=\"o\">=</span><span class=\"mf\">1</span><span class=\"p\">)</span>\r\n<span class=\"go\">&lt;Reporter: John Smith&gt;</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">Reporter</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">full_name__startswith</span><span class=\"o\">=</span><span class=\"s\">&#39;John&#39;</span><span class=\"p\">)</span>\r\n<span class=\"go\">&lt;Reporter: John Smith&gt;</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">Reporter</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">full_name__contains</span><span class=\"o\">=</span><span class=\"s\">&#39;mith&#39;</span><span class=\"p\">)</span>\r\n<span class=\"go\">&lt;Reporter: John Smith&gt;</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">Reporter</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"nb\">id</span><span class=\"o\">=</span><span class=\"mf\">2</span><span class=\"p\">)</span>\r\n<span class=\"gt\">Traceback (most recent call last):</span>\r\n    <span class=\"o\">...</span>\r\n<span class=\"nc\">DoesNotExist</span>: <span class=\"n-Identifier\">Reporter matching query does not exist.</span>\r\n\r\n<span class=\"go\"># Vytvorime clanek.</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span> <span class=\"nn\">datetime</span> <span class=\"kn\">import</span> <span class=\"n\">datetime</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">a</span> <span class=\"o\">=</span> <span class=\"n\">Article</span><span class=\"p\">(</span><span class=\"n\">pub_date</span><span class=\"o\">=</span><span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">now</span><span class=\"p\">(),</span> <span class=\"n\">headline</span><span class=\"o\">=</span><span class=\"s\">&#39;Django is cool&#39;</span><span class=\"p\">,</span>\r\n<span class=\"gp\">... </span>    <span class=\"n\">content</span><span class=\"o\">=</span><span class=\"s\">&#39;Yeah.&#39;</span><span class=\"p\">,</span> <span class=\"n\">reporter</span><span class=\"o\">=</span><span class=\"n\">r</span><span class=\"p\">)</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">a</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">()</span>\r\n\r\n<span class=\"go\"># Clanek je v databazi.</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">Article</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">()</span>\r\n<span class=\"go\">[&lt;Article: Django is cool&gt;]</span>\r\n\r\n<span class=\"go\"># Objekty clanku maji pristup pres API k souvisejicim novinarum.</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">r</span> <span class=\"o\">=</span> <span class=\"n\">a</span><span class=\"o\">.</span><span class=\"n\">reporter</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">r</span><span class=\"o\">.</span><span class=\"n\">full_name</span>\r\n<span class=\"go\">&#39;John Smith&#39;</span>\r\n\r\n<span class=\"go\"># A naopak: objekty novinaru maji pres API pristup k clankum.</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">r</span><span class=\"o\">.</span><span class=\"n\">article_set</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">()</span>\r\n<span class=\"go\">[&lt;Article: Django is cool&gt;]</span>\r\n\r\n<span class=\"go\"># API sleduje relace mezi objekty, nezbytne spojovani tabulek (JOINy)</span>\r\n<span class=\"go\"># provadi efektivne za vas.</span>\r\n<span class=\"go\"># Tento prikaz najde vsechny clanky novinare, jehoz jmeno zacina na &quot;John&quot;.</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">Article</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">filter</span><span class=\"p\">(</span><span class=\"n\">reporter__full_name__startswith</span><span class=\"o\">=</span><span class=\"s\">&quot;John&quot;</span><span class=\"p\">)</span>\r\n<span class=\"go\">[&lt;Article: Django is cool&gt;]</span>\r\n\r\n<span class=\"go\"># Upravime objekt zmenou jeho atributu a pak zavolame save().</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">r</span><span class=\"o\">.</span><span class=\"n\">full_name</span> <span class=\"o\">=</span> <span class=\"s\">&#39;Billy Goat&#39;</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">r</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">()</span>\r\n\r\n<span class=\"go\"># Objekt smazeme pouzitim delete().</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">r</span><span class=\"o\">.</span><span class=\"n\">delete</span><span class=\"p\">()</span>\r\n</pre></div>\r\n</div>\r\n</div>\r\n<div class=\"section\" id=\"s-dynamick-administra-n-rozhran-nen-to-jenom-le-en-scaffolding-je-to-cel-d-m\">\r\n<span id=\"dynamick-administra-n-rozhran-nen-to-jenom-le-en-scaffolding-je-to-cel-d-m\"></span><h2>Dynamick\u00e9 administra\u010dn\u00ed rozhran\u00ed: nen\u00ed to jenom le\u0161en\u00ed (scaffolding) -- je to cel\u00fd d\u016fm<a class=\"headerlink\" href=\"#dynamick-administra-n-rozhran-nen-to-jenom-le-en-scaffolding-je-to-cel-d-m\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Jakmile m\u00e1te sv\u00e9 modely navr\u017eeny, Django pro n\u011b m\u016f\u017ee automaticky vytvo\u0159it profesion\u00e1ln\u00ed\r\n<a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/contrib/admin/index/#ref-contrib-admin\"><em>administra\u010dn\u00ed rozhran\u00ed</em></a> p\u0159ipraven\u00e9 k nasazen\u00ed na produk\u010dn\u00ed\r\nserver. Na webov\u00fdch str\u00e1nk\u00e1ch, kter\u00e9 jsou p\u0159\u00edstupn\u00e9 pouze autorizovan\u00fdm u\u017eivatel\u016fm,\r\nbudete schopni p\u0159id\u00e1vat, upravovat a mazat definovan\u00e9 objekty. Nasazen\u00ed administrace je\r\nvelmi jednoduch\u00e9:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"c\"># V souboru models.py...</span>\r\n\r\n<span class=\"kn\">from</span> <span class=\"nn\">django.db</span> <span class=\"kn\">import</span> <span class=\"n\">models</span>\r\n\r\n<span class=\"k\">class</span> <span class=\"nc\">Article</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\r\n    <span class=\"n\">pub_date</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">DateTimeField</span><span class=\"p\">()</span>\r\n    <span class=\"n\">headline</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">(</span><span class=\"n\">max_length</span><span class=\"o\">=</span><span class=\"mf\">200</span><span class=\"p\">)</span>\r\n    <span class=\"n\">content</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">TextField</span><span class=\"p\">()</span>\r\n    <span class=\"n\">reporter</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">ForeignKey</span><span class=\"p\">(</span><span class=\"n\">Reporter</span><span class=\"p\">)</span>\r\n\r\n\r\n<span class=\"c\"># V souboru admin.py ve stejnem adresari...</span>\r\n\r\n<span class=\"kn\">import</span> <span class=\"nn\">models</span>\r\n<span class=\"kn\">from</span> <span class=\"nn\">django.contrib</span> <span class=\"kn\">import</span> <span class=\"n\">admin</span>\r\n\r\n<span class=\"n\">admin</span><span class=\"o\">.</span><span class=\"n\">site</span><span class=\"o\">.</span><span class=\"n\">register</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Article</span><span class=\"p\">)</span>\r\n</pre></div>\r\n</div>\r\n<p>Filozofie administra\u010dn\u00edho rozhran\u00ed spo\u010d\u00edv\u00e1 v tom, \u017ee web je upravov\u00e1n zam\u011bstnanci, klientem,\r\nnebo mo\u017en\u00e1 p\u0159\u00edmo v\u00e1mi -- a vy se nechcete zdr\u017eovat s vytv\u00e1\u0159en\u00edm rozhran\u00ed pro spr\u00e1vu jeho obsahu.</p>\r\n<p>Jeden z typick\u00fdch p\u0159\u00edstup\u016f:</p>\r\n<ul class=\"simple\">\r\n<li>co nejd\u0159\u00edve vytvo\u0159it modely a rozjet administra\u010dn\u00ed rozhran\u00ed</li>\r\n<li>za\u010d\u00edt web plnit daty (ze strany zam\u011bstnanc\u016f \u010di klient\u016f)</li>\r\n</ul>\r\n<p>A zat\u00edm co se nal\u00e9vaj\u00ed dal\u0161\u00ed a dal\u0161\u00ed data, vy se za\u010d\u00edn\u00e1te v\u011bnovat zp\u016fsobu, jak\u00fdm\r\nbudete data nav\u0161t\u011bvn\u00edk\u016fm webu prezentovat.</p>\r\n</div>\r\n<div class=\"section\" id=\"s-vytvo-te-url-adresy\">\r\n<span id=\"vytvo-te-url-adresy\"></span><h2>Vytvo\u0159te URL adresy<a class=\"headerlink\" href=\"#vytvo-te-url-adresy\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>\u010cist\u00e9 a elegantn\u00ed URL adresy jsou d\u016fle\u017eit\u00fd detail kvalitn\u00ed webov\u00e9\r\naplikace. Django takov\u00fdto n\u00e1vrh adres podporuje. S ohavnostmi typu <tt class=\"docutils literal\"><span class=\"pre\">.php</span></tt> nebo <tt class=\"docutils literal\"><span class=\"pre\">.asp</span></tt>\r\nse nadobro rozlu\u010dte.</p>\r\n<p>URL adresy se definuj\u00ed v Python modulu <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/http/urls/#topics-http-urls\"><em>URLconf</em></a>. V n\u011bm se provede namapov\u00e1n\u00ed URL \u0161ablon na\r\nPython callback funkce. URLconf tak\u00e9 odd\u011bluje adresy a k\u00f3d va\u0161\u00ed aplikace.</p>\r\n<p>Takhle n\u011bjak by mohl vypadat URLconf pro p\u0159\u00edklad s <tt class=\"docutils literal\"><span class=\"pre\">Reporter</span></tt>/<tt class=\"docutils literal\"><span class=\"pre\">Article</span></tt>\r\nuveden\u00fd v\u00fd\u0161e:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"kn\">from</span> <span class=\"nn\">django.conf.urls.defaults</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\r\n\r\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"n\">patterns</span><span class=\"p\">(</span><span class=\"s\">&#39;&#39;</span><span class=\"p\">,</span>\r\n    <span class=\"p\">(</span><span class=\"s\">r&#39;^articles/(\\d{4})/$&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;mysite.views.year_archive&#39;</span><span class=\"p\">),</span>\r\n    <span class=\"p\">(</span><span class=\"s\">r&#39;^articles/(\\d{4})/(\\d{2})/$&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;mysite.views.month_archive&#39;</span><span class=\"p\">),</span>\r\n    <span class=\"p\">(</span><span class=\"s\">r&#39;^articles/(\\d{4})/(\\d{2})/(\\d+)/$&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;mysite.views.article_detail&#39;</span><span class=\"p\">),</span>\r\n<span class=\"p\">)</span>\r\n</pre></div>\r\n</div>\r\n<p>Tento k\u00f3d mapuje URL adresy ve form\u011b regul\u00e1rn\u00edch v\u00fdraz\u016f na Python\r\ncallback funkce (pohledy, z anglick\u00e9ho &quot;views&quot;). Regul\u00e1rn\u00ed v\u00fdrazy pou\u017e\u00edvaj\u00ed z\u00e1vorky pro\r\n&quot;zachycen\u00ed&quot; hodnot z URL adresy. Kdy\u017e si u\u017eivatel vy\u017e\u00e1d\u00e1 str\u00e1nku, Django\r\nprojde ka\u017ed\u00fd regul\u00e1rn\u00ed v\u00fdraz v zadan\u00e9m po\u0159ad\u00ed, a zastav\u00ed se na prvn\u00edm, kter\u00fd se shoduje\r\ns po\u017eadovanou adresou. (Pokud se \u017e\u00e1dn\u00e1 neshoduje, Django vol\u00e1 speci\u00e1ln\u00ed\r\npohled 404.) Cel\u00fd tento proces je velmi rychl\u00fd, proto\u017ee regul\u00e1rn\u00ed v\u00fdrazy\r\njsou zkompilov\u00e1ny p\u0159i prvn\u00edm spust\u011bn\u00ed aplikace.</p>\r\n<p>Kdy\u017e se jeden z regul\u00e1rn\u00edch v\u00fdraz\u016f shoduje s URL, Django naimportuje a spust\u00ed zadan\u00fd pohled (view), co\u017e\r\nnen\u00ed nic jin\u00e9ho, ne\u017e jednoduch\u00e1 Python funkce. Ka\u017ed\u00e9mu pohledu je p\u0159ed\u00e1n\r\nrequest objekt -- obsahuj\u00edc\u00ed metadata po\u017eadavku -- a hodnoty\r\nzachycen\u00e9 ve v\u00fdrazu.</p>\r\n<p>Nap\u0159. pokud si u\u017eivatel vy\u017e\u00e1d\u00e1 URL &quot;/articles/2005/05/39323/&quot;, Django\r\nzavol\u00e1 funkci <tt class=\"docutils literal\"><span class=\"pre\">mysite.views.article_detail(request,</span> <span class=\"pre\">'2005',</span> <span class=\"pre\">'05',</span>\r\n<span class=\"pre\">'39323')</span></tt>.</p>\r\n</div>\r\n<div class=\"section\" id=\"s-napi-te-sv-pohledy-views\">\r\n<span id=\"napi-te-sv-pohledy-views\"></span><h2>Napi\u0161te sv\u00e9 pohledy (views)<a class=\"headerlink\" href=\"#napi-te-sv-pohledy-views\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Ka\u017ed\u00fd z pohled\u016f je zodpov\u011bdn\u00fd za proveden\u00ed jedn\u00e9 ze dvou v\u011bc\u00ed: bu\u010fto vr\u00e1t\u00ed objekt\r\n<a title=\"django.http.HttpResponse\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponse\"><tt class=\"xref docutils literal\"><span class=\"pre\">HttpResponse</span></tt></a>, kter\u00fd obsahuje samotn\u00fd obsah\r\nvy\u017e\u00e1dan\u00e9 str\u00e1nky, nebo vyvol\u00e1 v\u00fdjimku jako je nap\u0159.\r\n<tt class=\"xref docutils literal\"><span class=\"pre\">Http404</span></tt>. Zbytek je na v\u00e1s.</p>\r\n<p>Obecn\u00fd postup je takov\u00fd, \u017ee pohled vyt\u00e1hne data podle dodan\u00fdch parametr\u016f, na\u010dte\r\n\u0161ablonu a napln\u00ed ji daty. Uk\u00e1zkov\u00fd pohled <tt class=\"docutils literal\"><span class=\"pre\">year_archive</span></tt> z p\u0159\u00edkladu v\u00fd\u0161e:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"k\">def</span> <span class=\"nf\">year_archive</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">year</span><span class=\"p\">):</span>\r\n    <span class=\"n\">a_list</span> <span class=\"o\">=</span> <span class=\"n\">Article</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">filter</span><span class=\"p\">(</span><span class=\"n\">pub_date__year</span><span class=\"o\">=</span><span class=\"n\">year</span><span class=\"p\">)</span>\r\n    <span class=\"k\">return</span> <span class=\"n\">render_to_response</span><span class=\"p\">(</span><span class=\"s\">&#39;news/year_archive.html&#39;</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s\">&#39;year&#39;</span><span class=\"p\">:</span> <span class=\"n\">year</span><span class=\"p\">,</span> <span class=\"s\">&#39;article_list&#39;</span><span class=\"p\">:</span> <span class=\"n\">a_list</span><span class=\"p\">})</span>\r\n</pre></div>\r\n</div>\r\n<p>Tento p\u0159\u00edklad pou\u017e\u00edv\u00e1 <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/templates/#topics-templates\"><em>\u0161ablonovac\u00ed syst\u00e9m</em></a> Djanga,\r\nkter\u00fd obsahuje dostatek siln\u00fdch vlastnost\u00ed, ale p\u0159itom se sna\u017e\u00ed z\u016fstat\r\nsrozumiteln\u00fd i pro neprogram\u00e1tory.</p>\r\n</div>\r\n<div class=\"section\" id=\"s-vytvo-te-ablony\">\r\n<span id=\"vytvo-te-ablony\"></span><h2>Vytvo\u0159te \u0161ablony<a class=\"headerlink\" href=\"#vytvo-te-ablony\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>K\u00f3d uveden\u00fd v\u00fd\u0161e na\u010dte \u0161ablonu <tt class=\"docutils literal\"><span class=\"pre\">news/year_archive.html</span></tt>.</p>\r\n<p>Django se pokus\u00ed \u0161ablonu nal\u00e9zt v n\u011bkter\u00e9m ze zadan\u00fdch adres\u00e1\u0159\u016f (definovan\u00fdch v souboru settings.py).\r\nPokud nen\u00ed nalezena v prvn\u00edm adres\u00e1\u0159i, hled\u00e1 se ve druh\u00e9m, atd. T\u00edmto zp\u016fsobem\r\nje mo\u017en\u00e9 efektivn\u011b sn\u00ed\u017eit nadbyte\u010dnost mezi \u0161ablonami.</p>\r\n<p>\u0158ekn\u011bme, \u017ee byla nalezena \u0161ablona <tt class=\"docutils literal\"><span class=\"pre\">news/article_detail.html</span></tt>. Takhle\r\nn\u011bjak by mohla vypadat:</p>\r\n<div class=\"highlight-html+django\"><div class=\"highlight\"><pre><span class=\"cp\">{%</span> <span class=\"k\">extends</span> <span class=\"s2\">&quot;base.html&quot;</span> <span class=\"cp\">%}</span>\r\n\r\n<span class=\"cp\">{%</span> <span class=\"k\">block</span> <span class=\"nv\">title</span> <span class=\"cp\">%}</span>Clanky za rok <span class=\"cp\">{{</span> <span class=\"nv\">year</span> <span class=\"cp\">}}{%</span> <span class=\"k\">endblock</span> <span class=\"cp\">%}</span>\r\n\r\n<span class=\"cp\">{%</span> <span class=\"k\">block</span> <span class=\"nv\">content</span> <span class=\"cp\">%}</span>\r\n<span class=\"nt\">&lt;h1&gt;</span>Clanky za rok <span class=\"cp\">{{</span> <span class=\"nv\">year</span> <span class=\"cp\">}}</span><span class=\"nt\">&lt;/h1&gt;</span>\r\n\r\n<span class=\"cp\">{%</span> <span class=\"k\">for</span> <span class=\"nv\">article</span> <span class=\"k\">in</span> <span class=\"nv\">article_list</span> <span class=\"cp\">%}</span>\r\n<span class=\"nt\">&lt;p&gt;</span><span class=\"cp\">{{</span> <span class=\"nv\">article.headline</span> <span class=\"cp\">}}</span><span class=\"nt\">&lt;/p&gt;</span>\r\n<span class=\"nt\">&lt;p&gt;</span>Autor <span class=\"cp\">{{</span> <span class=\"nv\">article.reporter.full_name</span> <span class=\"cp\">}}</span><span class=\"nt\">&lt;/p&gt;</span>\r\n<span class=\"nt\">&lt;p&gt;</span>Publikovano dne <span class=\"cp\">{{</span> <span class=\"nv\">article.pub_date</span><span class=\"o\">|</span><span class=\"nf\">date</span><span class=\"s2\">:&quot;F j, Y&quot;</span> <span class=\"cp\">}}</span><span class=\"nt\">&lt;/p&gt;</span>\r\n<span class=\"cp\">{%</span> <span class=\"k\">endfor</span> <span class=\"cp\">%}</span>\r\n<span class=\"cp\">{%</span> <span class=\"k\">endblock</span> <span class=\"cp\">%}</span>\r\n</pre></div>\r\n</div>\r\n<p>Prom\u011bnn\u00e9 jsou uzav\u0159eny do dvojit\u00fdch slo\u017een\u00fdch z\u00e1vorek. V\u00fdraz <tt class=\"docutils literal\"><span class=\"pre\">{{</span>\r\n<span class=\"pre\">article.headline</span> <span class=\"pre\">}}</span></tt> znamen\u00e1: &quot;Vypi\u0161 hodnotu atributu headline objektu article&quot;.\r\nTe\u010dky ve v\u00fdrazu ale neslou\u017e\u00ed pouze pro specifikov\u00e1n\u00ed atribut\u016f:\r\ns jejich pomoc\u00ed m\u016f\u017eeme podle kl\u00ed\u010de vytahovat hodnoty ze slovn\u00edku, adresovat\r\nprvky seznamu nebo volat funkce.</p>\r\n<p>Pozn\u00e1mka: <tt class=\"docutils literal\"><span class=\"pre\">{{</span> <span class=\"pre\">article.pub_date|date:&quot;F</span> <span class=\"pre\">j,</span> <span class=\"pre\">Y&quot;</span> <span class=\"pre\">}}</span></tt> pou\u017e\u00edv\u00e1 Unixovskou\r\n&quot;rouru&quot; (znak &quot;|&quot;). V Djangu tento v\u00fdraz ozna\u010dujeme jako &quot;filtr&quot;.\r\nV na\u0161\u00ed uk\u00e1zce filtr date form\u00e1tuje Python objekt datetime do zadan\u00e9ho tvaru\r\n(je to podobn\u00e9 jako v PHP funkci date; ano, i v PHP je plno dobr\u00fdch my\u0161lenek).</p>\r\n<p>M\u016f\u017eete d\u00e1t za sebe tolik filtr\u016f, kolik chcete. M\u016f\u017eete ps\u00e1t vlastn\u00ed\r\nfiltry. M\u016f\u017eete napsat vlastn\u00ed \u0161ablonov\u00e9 tagy, kter\u00e9 spust\u00ed libovoln\u00fd\r\nPython k\u00f3d.</p>\r\n<p>Django vyu\u017e\u00edv\u00e1 koncept &quot;\u0161ablonov\u00e9 d\u011bdi\u010dnosti&quot;: k tomuto \u00fa\u010delu existuje tag <tt class=\"docutils literal\"><span class=\"pre\">{%</span> <span class=\"pre\">extends</span>\r\n<span class=\"pre\">&quot;base.html&quot;</span> <span class=\"pre\">%}</span></tt>. Jeho funkce by se dala popsat takto: &quot;Nejprve na\u010dti \u0161ablonu s n\u00e1zvem 'base',\r\nkter\u00e1 m\u00e1 nadefinovanou skupinu blok\u016f, a tyto bloky napl\u0148 n\u00e1sleduj\u00edc\u00edmi\r\nbloky.&quot; T\u00edmto zp\u016fsobem dramaticky sn\u00ed\u017e\u00edte zmatek v \u0161ablon\u00e1ch: ka\u017ed\u00e1\r\n\u0161ablona definuje pouze to, co je pro ni specifick\u00e9.</p>\r\n<p>P\u0159\u00edklad, jak by &quot;base.html&quot; mohl vypadat:</p>\r\n<div class=\"highlight-html+django\"><div class=\"highlight\"><pre><span class=\"nt\">&lt;html&gt;</span>\r\n<span class=\"nt\">&lt;head&gt;</span>\r\n    <span class=\"nt\">&lt;title&gt;</span><span class=\"cp\">{%</span> <span class=\"k\">block</span> <span class=\"nv\">title</span> <span class=\"cp\">%}{%</span> <span class=\"k\">endblock</span> <span class=\"cp\">%}</span><span class=\"nt\">&lt;/title&gt;</span>\r\n<span class=\"nt\">&lt;/head&gt;</span>\r\n<span class=\"nt\">&lt;body&gt;</span>\r\n    <span class=\"nt\">&lt;img</span> <span class=\"na\">src=</span><span class=\"s\">&quot;sitelogo.gif&quot;</span> <span class=\"na\">alt=</span><span class=\"s\">&quot;Logo&quot;</span> <span class=\"nt\">/&gt;</span>\r\n    <span class=\"cp\">{%</span> <span class=\"k\">block</span> <span class=\"nv\">content</span> <span class=\"cp\">%}{%</span> <span class=\"k\">endblock</span> <span class=\"cp\">%}</span>\r\n<span class=\"nt\">&lt;/body&gt;</span>\r\n<span class=\"nt\">&lt;/html&gt;</span>\r\n</pre></div>\r\n</div>\r\n<p>Zjednodu\u0161en\u011b \u0159e\u010deno, tato \u0161ablona vytv\u00e1\u0159\u00ed vzhled str\u00e1nky,\r\na nab\u00edz\u00ed &quot;d\u00edry&quot; pro napln\u011bn\u00ed pod\u0159azenou \u0161ablonu. Pokud budete cht\u00edt\r\nzm\u011bnit design cel\u00e9ho webu, sta\u010d\u00ed upravit jedin\u00fd soubor -- z\u00e1kladn\u00ed\r\n\u0161ablonu.</p>\r\n<p>Tento koncept umo\u017e\u0148uje vytv\u00e1\u0159et r\u016fzn\u00e9 verze webu, za pou\u017eit\u00ed stejn\u00fdch\r\npod\u0159azen\u00fdch \u0161ablon. Tv\u016frci Djanga tuto funkci vyu\u017eili p\u0159i vytvo\u0159en\u00ed\r\nzcela odli\u0161n\u00e9 varianty webu pro mobiln\u00ed telefony a p\u0159i tom\r\nop\u011bt sta\u010dilo zm\u011bnit pouze z\u00e1kladn\u00ed \u0161ablonu.</p>\r\n<p>Pozn\u00e1mka: Pokud up\u0159ednost\u0148ujete jin\u00fd \u0161ablonovac\u00ed syst\u00e9m, nemus\u00edte \u0161ablony Djanga pou\u017e\u00edvat.\r\nZe stejn\u00e9ho d\u016fvodu nemus\u00edte pou\u017e\u00edvat ani poskytovan\u00e9 datab\u00e1zov\u00e9 API.\r\nM\u016f\u017eete vyu\u017e\u00edt jinou datab\u00e1zovou vrstvu, m\u016f\u017eete \u010d\u00edst XML\r\nsoubory, m\u016f\u017eete na\u010d\u00edtat soubory z disku nebo cokoli jin\u00e9ho. Ka\u017ed\u00e1 \u010d\u00e1st\r\nDjanga -- modely, \u0161ablony, pohledy -- je od ostatn\u00edch odd\u011blena.</p>\r\n</div>\r\n<div class=\"section\" id=\"s-tohle-je-jen-za-tek\">\r\n<span id=\"tohle-je-jen-za-tek\"></span><h2>Tohle je jen za\u010d\u00e1tek<a class=\"headerlink\" href=\"#tohle-je-jen-za-tek\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Pr\u00e1v\u011b jste se sezn\u00e1mili se z\u00e1kladn\u00edmi vlastnostmi frameworku.\r\nDjango v\u00e1m ale nab\u00edz\u00ed mnohem v\u00edc, nap\u0159.:</p>\r\n<ul class=\"simple\">\r\n<li><a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/cache/#topics-cache\"><em>Cache framework</em></a> integrovan\u00fd s\r\nmemcached nebo jin\u00fdmi backendy.</li>\r\n<li><a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/contrib/syndication/#ref-contrib-syndication\"><em>Syndika\u010dn\u00ed framework</em></a>, kter\u00fd pro\r\nvytvo\u0159en\u00ed RSS nebo Atom kan\u00e1l\u016f pot\u0159ebuje nadefinovat pouze jednu malou\r\nPython t\u0159\u00eddu.</li>\r\n<li>Kopu dal\u0161\u00edch funkc\u00ed do automaticky generovan\u00e9ho administra\u010dn\u00edho rozhran\u00ed -- tento\r\np\u0159ehled uk\u00e1zal pouze to nejd\u016fle\u017eit\u011bj\u0161\u00ed.</li>\r\n</ul>\r\n<p>Co te\u010f? <a class=\"reference external\" href=\"http://www.djangoproject.cz/download/\">St\u00e1hn\u011bte si Django</a>, pod\u00edvejte se na <a class=\"reference external\" href=\"/dokumentace/intro/tutorial01/#intro-tutorial01\"><em>uk\u00e1zkovou aplikaci</em></a> a p\u0159ipojte se do <a class=\"reference external\" href=\"/dokumentace/\">komunity</a>. D\u011bkujeme za v\u00e1\u0161 z\u00e1jem!</p>\r\n</div>\r\n</div>\r\n    </div>\r\n    <div id=\"rightSideBar\" class=\"span-7 last\">\r\n        <h3><a href=\"http://docs.djangoproject.com/en/dev/contents/\">Obsah</a></h3><ul>\r\n<li><a class=\"reference external\" href=\"#\">Mrkn\u011bme se na Django</a><ul>\r\n<li><a class=\"reference external\" href=\"#navrhn-te-sv-j-model\">Navrhn\u011bte sv\u016fj model</a></li>\r\n<li><a class=\"reference external\" href=\"#nainstalujte-jej\">Nainstalujte jej</a></li>\r\n<li><a class=\"reference external\" href=\"#u-vejte-si-api-rozhran\">U\u017e\u00edvejte si API rozhran\u00ed</a></li>\r\n<li><a class=\"reference external\" href=\"#dynamick-administra-n-rozhran-nen-to-jenom-le-en-scaffolding-je-to-cel-d-m\">Dynamick\u00e9 administra\u010dn\u00ed rozhran\u00ed: nen\u00ed to jenom le\u0161en\u00ed (scaffolding) &#8211; je to cel\u00fd d\u016fm</a></li>\r\n<li><a class=\"reference external\" href=\"#vytvo-te-url-adresy\">Vytvo\u0159te URL adresy</a></li>\r\n<li><a class=\"reference external\" href=\"#napi-te-sv-pohledy-views\">Napi\u0161te sv\u00e9 pohledy (views)</a></li>\r\n<li><a class=\"reference external\" href=\"#vytvo-te-ablony\">Vytvo\u0159te \u0161ablony</a></li>\r\n<li><a class=\"reference external\" href=\"#tohle-je-jen-za-tek\">Tohle je jen za\u010d\u00e1tek</a></li>\r\n</ul>\r\n</li>\r\n</ul><h3>Listov\u00e1n\u00ed</h3><ul>\r\n<li>P\u0159edchoz\u00ed: <a href=\"http://docs.djangoproject.com/en/dev/intro/index/\">Getting started</a></li>\r\n<li>Dal\u0161\u00ed: <a href=\"/dokumentace/intro/install/\">Rychl\u00fd instala\u010dn\u00ed pr\u016fvodce</a></li>\r\n</ul>\r\n        \r\n        \r\n<table class=\"revision\">\r\n    \r\n    \r\n    <tr>\r\n        <th>P\u0159eklad</th>\r\n        <td>Vojta Pol\u00e1\u0161ek</td>\r\n    </tr>\r\n    \r\n    \r\n    <tr>\r\n        <th>Korekce</th>\r\n        <td>Michal Valou\u0161ek</td>\r\n    </tr>\r\n    \r\n</table>\r\n\r\n\r\n    </div>\r\n    <br class=\"clear\" />\r\n</div>\r\n\r\n", 
            "enable_comments": true
        }
    }, 
    {
        "pk": 3, 
        "model": "flatpages.flatpage", 
        "fields": {
            "registration_required": false, 
            "title": "Prvn\u00ed aplikace v Djangu, \u010d\u00e1st 1", 
            "url": "/dokumentace/intro/tutorial01/", 
            "template_name": "flatpages/doc.html", 
            "sites": [
                1
            ], 
            "content": "<div id=\"wrapcontent\" class=\"span-22 last prefix-1 suffix-1\">\r\n    <div id=\"content\" class=\"span-14 suffix-1\">\r\n        \r\n        \r\n\r\n\r\n\r\n        <div class=\"section\" id=\"s-prvn-aplikace-v-djangu-st-1\">\r\n<span id=\"s-intro-tutorial01\"></span><span id=\"prvn-aplikace-v-djangu-st-1\"></span><span id=\"intro-tutorial01\"></span><h1>Prvn\u00ed aplikace v Djangu, \u010d\u00e1st 1<a class=\"headerlink\" href=\"#prvn-aplikace-v-djangu-st-1\" title=\"Permalink na tento nadpis\">\u00b6</a></h1>\r\n<p>V tomto n\u00e1vodu si uk\u00e1\u017eeme, jak vytvo\u0159it jednoduchou anketn\u00ed aplikaci.</p>\r\n<p>Bude se skl\u00e1dat ze dvou \u010d\u00e1st\u00ed:</p>\r\n<ul class=\"simple\">\r\n<li>Ve\u0159ejn\u00e1 str\u00e1nka, na kter\u00e9 bude mo\u017en\u00e9 prohl\u00ed\u017eet anketn\u00ed ot\u00e1zky a\r\nhlasovat v nich.</li>\r\n<li>Administr\u00e1torsk\u00e1 \u010d\u00e1st, na kter\u00e9 bude mo\u017en\u00e9 p\u0159id\u00e1vat, upravovat\r\na mazat ankety.</li>\r\n</ul>\r\n<p>P\u0159edpokl\u00e1dejme, \u017ee m\u00e1te Django ji\u017e <a class=\"reference external\" href=\"/dokumentace/intro/install/#intro-install\"><em>nainstalovan\u00e9</em></a>.\r\nM\u016f\u017eete to zjistit spu\u0161t\u011bn\u00edm interaktivn\u00edho interpretera Pythonu a\r\nnaps\u00e1n\u00edm <tt class=\"docutils literal\"><span class=\"pre\">import</span> <span class=\"pre\">django</span></tt>. Pokud p\u0159\u00edkaz prob\u011bhne bez chyb, Django\r\nje nainstalov\u00e1no.</p>\r\n<div class=\"admonition-kde-hledat-pomoc admonition \">\r\n<p class=\"first admonition-title\">Kde hledat pomoc:</p>\r\n<p>Pokud naraz\u00edte na n\u011bjak\u00e9 pot\u00ed\u017ee, po\u0161lete dotaz do:</p>\r\n<ul class=\"last simple\">\r\n<li>ofici\u00e1ln\u00edho mailing listu <a class=\"reference external\" href=\"http://groups.google.com/group/django-users\">Django users</a> (v angli\u010dtin\u011b)</li>\r\n<li><a class=\"reference external\" href=\"http://groups.google.com/group/django-cs\">\u010desk\u00e9ho mailing listu</a></li>\r\n<li>nebo zkuste IRC <a class=\"reference external\" href=\"irc://irc.freenode.net/django\">#django na serveru irc.freenode.net</a>\r\n(v angli\u010dtin\u011b)</li>\r\n</ul>\r\n</div>\r\n<div class=\"section\" id=\"s-vytv-en-projektu\">\r\n<span id=\"vytv-en-projektu\"></span><h2>Vytv\u00e1\u0159en\u00ed projektu<a class=\"headerlink\" href=\"#vytv-en-projektu\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Pokud s Djangem za\u010d\u00edn\u00e1te, budete se muset postarat o n\u011bkter\u00e1 po\u010d\u00e1te\u010dn\u00ed\r\nnastaven\u00ed. P\u0159esn\u011bji, nech\u00e1te si vygenerovat k\u00f3d, kter\u00fd zalo\u017e\u00ed nov\u00fd\r\n<a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/glossary/#term-project\"><em class=\"xref\">project</em></a> (projekt).</p>\r\n<p>Na p\u0159\u00edkazov\u00e9 \u0159\u00e1dce se p\u0159esu\u0148te do adres\u00e1\u0159e (<tt class=\"docutils literal\"><span class=\"pre\">cd</span></tt>), kde chcete m\u00edt\r\nulo\u017een\u00fd sv\u016fj zdrojov\u00fd k\u00f3d a potom spus\u0165te p\u0159\u00edkaz <tt class=\"docutils literal\"><span class=\"pre\">django-admin.py</span>\r\n<span class=\"pre\">startproject</span> <span class=\"pre\">mysite</span></tt>. T\u00edmto zp\u016fsobem se v aktu\u00e1ln\u00edm adres\u00e1\u0159i vytvo\u0159\u00ed\r\nadres\u00e1\u0159 <tt class=\"docutils literal\"><span class=\"pre\">mysite</span></tt>.</p>\r\n<div class=\"admonition-pr-va-v-syst-mu-mac-os-x admonition \">\r\n<p class=\"first admonition-title\">Pr\u00e1va v syst\u00e9mu Mac OS X</p>\r\n<p class=\"last\">Pokud pou\u017e\u00edv\u00e1te Mac OS X, m\u016f\u017eete se setkat p\u0159i spu\u0161t\u011bn\u00ed p\u0159\u00edkazu\r\n<tt class=\"docutils literal\"><span class=\"pre\">django-admin.py</span> <span class=\"pre\">startproject</span></tt> se zpr\u00e1vou &#8220;permission denied&#8221;\r\n(&#8220;p\u0159\u00edstup odep\u0159en&#8221;). To proto, \u017ee v syst\u00e9mech zalo\u017een\u00fdch na Unixu\r\n(tj. i na Mac OS X), mus\u00ed b\u00fdt soubor ozna\u010den jako &#8220;spustiteln\u00fd&#8221;, aby\r\njej bylo mo\u017eno spustit jako program. Otev\u0159ete si Terminal.app, pomoc\u00ed\r\np\u0159\u00edkazu <tt class=\"docutils literal\"><span class=\"pre\">cd</span></tt>  se dosta\u0148te do adres\u00e1\u0159e, kde je nainstalov\u00e1n\r\n<a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/django-admin/#ref-django-admin\"><em>django-admin.py</em></a> a spus\u0165te p\u0159\u00edkaz <tt class=\"docutils literal\"><span class=\"pre\">chmod</span> <span class=\"pre\">+x</span>\r\n<span class=\"pre\">django-admin.py</span></tt>.</p>\r\n</div>\r\n<div class=\"admonition-pozn-mka admonition \">\r\n<p class=\"first admonition-title\">Pozn\u00e1mka</p>\r\n<p class=\"last\">Projekt\u016fm nesm\u00edte d\u00e1vat stejn\u00e9 n\u00e1zvy, jak\u00e9 maj\u00ed vestav\u011bn\u00e9 (built-in)\r\nkomponenty Pythonu nebo Djanga. Nap\u0159\u00edklad nem\u016f\u017eete pou\u017e\u00edt jm\u00e9no\r\n<tt class=\"docutils literal\"><span class=\"pre\">django</span></tt> (kter\u00e9 by vytv\u00e1\u0159elo konflikt s Djangem samotn\u00fdm), nebo\r\n<tt class=\"docutils literal\"><span class=\"pre\">test</span></tt> (kter\u00e9 by vytv\u00e1\u0159elo konflikt s vestav\u011bnou Python knihovnou).</p>\r\n</div>\r\n<p>Pokud jste Django instalovali pomoc\u00ed p\u0159\u00edkazu <tt class=\"docutils literal\"><span class=\"pre\">python</span> <span class=\"pre\">setup.py</span></tt>, m\u011bl by\r\nse <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/django-admin/#ref-django-admin\"><em>django-admin.py</em></a> nach\u00e1zet na va\u0161\u00ed syst\u00e9mov\u00e9\r\ncest\u011b. Jestli\u017ee tam nen\u00ed, najdete jej v <tt class=\"docutils literal\"><span class=\"pre\">site-packages/django/bin</span></tt>,\r\np\u0159i\u010dem\u017e <tt class=\"docutils literal\"><span class=\"pre\">site-packages</span></tt> je adres\u00e1\u0159 ve va\u0161\u00ed instalaci Pythonu.\r\nV p\u0159\u00edpad\u011b, \u017ee v\u00e1\u0161 syst\u00e9m p\u0159\u00edkaz <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/django-admin/#ref-django-admin\"><em>django-admin.py</em></a>\r\nnenajde, vytvo\u0159te na n\u011bj symbolick\u00fd odkaz z n\u011bjak\u00e9ho m\u00edsta, kter\u00e9 le\u017e\u00ed\r\nna syst\u00e9mov\u00e9 cest\u011b, nap\u0159 <tt class=\"docutils literal\"><span class=\"pre\">/usr/local/bin</span></tt>, apod.</p>\r\n<div class=\"admonition-kde-by-m-l-b-t-samotn-k-d admonition \">\r\n<p class=\"first admonition-title\">Kde by m\u011bl b\u00fdt samotn\u00fd k\u00f3d?</p>\r\n<p>Pokud pou\u017e\u00edv\u00e1te PHP, asi jste zvykl\u00ed ukl\u00e1dat k\u00f3d do ko\u0159enov\u00e9ho\r\nadres\u00e1\u0159e web serveru (jako t\u0159eba <tt class=\"docutils literal\"><span class=\"pre\">/var/www</span></tt>). U Djanga se to\r\nned\u011bl\u00e1. Ukl\u00e1dat jak\u00fdkoli k\u00f3d psan\u00fd v Pythonu do ko\u0159enov\u00e9ho adres\u00e1\u0159e\r\nweb serveru nen\u00ed dobr\u00fd n\u00e1pad, proto\u017ee by pak kdokoliv mohl\r\n\u010d\u00edst v\u00e1\u0161 zdrojov\u00fd k\u00f3d p\u0159es internet (a to by jste necht\u011bli, \u017ee ne?).</p>\r\n<p class=\"last\">Ukl\u00e1dejte v\u00e1\u0161 k\u00f3d n\u011bkam <strong>mimo</strong> ko\u0159enov\u00fd adres\u00e1\u0159, t\u0159eba do adres\u00e1\u0159e\r\n:file:<tt class=\"docutils literal\"><span class=\"pre\">/home/mycode</span></tt>.</p>\r\n</div>\r\n<p>Pod\u00edvejme se, co p\u0159\u00edkaz <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/django-admin/#djadmin-startproject\"><tt class=\"xref docutils literal\"><span class=\"pre\">startproject</span></tt></a> vytvo\u0159il:</p>\r\n<div class=\"highlight-python\"><pre>mysite/\r\n    __init__.py\r\n    manage.py\r\n    settings.py\r\n    urls.py</pre>\r\n</div>\r\n<p>Popi\u0161me si v\u00fdznam jednotliv\u00fdch soubor\u016f:</p>\r\n<ul class=\"simple\">\r\n<li><tt class=\"docutils literal\"><span class=\"pre\">__init__.py</span></tt>: Pr\u00e1zdn\u00fd soubor, kter\u00fd \u0159\u00edk\u00e1 Pythonu, \u017ee tento\r\nadres\u00e1\u0159 m\u00e1 b\u00fdt pova\u017eov\u00e1n za Python bal\u00ed\u010dek. (Pokud s Pythonem\r\nza\u010d\u00edn\u00e1te, p\u0159e\u010dt\u011bte si <a class=\"reference external\" href=\"http://docs.python.org/tutorial/modules.html#packages\">v\u00edce o bal\u00ed\u010dc\u00edch</a> v ofici\u00e1ln\u00ed dokumentaci).</li>\r\n<li><tt class=\"docutils literal\"><span class=\"pre\">manage.py</span></tt>: Utilita pro p\u0159\u00edkazov\u00fd \u0159\u00e1dek, kter\u00e1 v\u00e1m umo\u017e\u0148uje\r\nprojekt spravovat. Podrobnosti naleznete v\r\n<a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/django-admin/#ref-django-admin\"><em>django-admin.py and manage.py</em></a>.</li>\r\n<li><tt class=\"docutils literal\"><span class=\"pre\">settings.py</span></tt>: Nastaven\u00ed/konfigurace pro v\u00e1\u0161 Django projekt.\r\nNa str\u00e1nce <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/settings/#topics-settings\"><em>Django settings</em></a> se dozv\u00edte v\u0161e podstatn\u00e9.</li>\r\n<li><tt class=\"docutils literal\"><span class=\"pre\">urls.py</span></tt>: Deklarace URL adres pro v\u00e1\u0161 Django projekt;\r\n&quot;rejst\u0159\u00edk&quot; va\u0161eho webu. Podrobnosti viz <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/http/urls/#topics-http-urls\"><em>URL dispatcher</em></a>.</li>\r\n</ul>\r\n<div class=\"section\" id=\"s-v-vojov-server\">\r\n<span id=\"v-vojov-server\"></span><h3>V\u00fdvojov\u00fd server<a class=\"headerlink\" href=\"#v-vojov-server\" title=\"Permalink na tento nadpis\">\u00b6</a></h3>\r\n<p>Ov\u011b\u0159me si, jestli v\u00fd\u0161e uveden\u00fd p\u0159\u00edkaz spr\u00e1vn\u011b zafungoval. P\u0159esu\u0148te se do\r\nadres\u00e1\u0159e <tt class=\"docutils literal\"><span class=\"pre\">mysite</span></tt> (pokud tam je\u0161t\u011b nejste) a spus\u0165te p\u0159\u00edkaz <tt class=\"docutils literal\"><span class=\"pre\">python</span>\r\n<span class=\"pre\">manage.py</span> <span class=\"pre\">runserver</span></tt>. Na p\u0159\u00edkazov\u00e9 \u0159\u00e1dce uvid\u00edte n\u00e1sleduj\u00edc\u00ed v\u00fdstup:</p>\r\n<div class=\"highlight-python\"><pre>Validating models...\r\n0 errors found.\r\n\r\nDjango version 1.0, using settings 'mysite.settings'\r\nDevelopment server is running at http://127.0.0.1:8000/\r\nQuit the server with CONTROL-C.</pre>\r\n</div>\r\n<p>Pr\u00e1v\u011b jste spustili v\u00fdvojov\u00fd server Djanga, odleh\u010den\u00fd web server,\r\nnapsan\u00fd \u010dist\u011b v Pythonu. Zahrnuli jsme jej v Djangu, tak\u017ee d\u00edky n\u011bmu\r\nm\u016f\u017eete okam\u017eit\u011b vyv\u00edjet a nemus\u00edte se starat o konfiguraci produk\u010dn\u00edho\r\nserveru -- jako je nap\u0159. Apache -- dokud nebudete p\u0159ipraveni va\u0161e\r\nstr\u00e1nky zve\u0159ejnit.</p>\r\n<p>Zde je dobr\u00e9 poznamenat: V\u00fdvojov\u00fd server <strong>nepou\u017e\u00edvejte</strong> v ostr\u00e9m\r\nprovozu -- tento server je ur\u010den pouze pro v\u00fdvoj (vyr\u00e1b\u00edme frameworky,\r\nne web servery).</p>\r\n<p>Te\u010f, kdy\u017e n\u00e1m server b\u011b\u017e\u00ed, nav\u0161tivte ve va\u0161em prohl\u00ed\u017ee\u010di adresu\r\n<a class=\"reference external\" href=\"http://127.0.0.1:8000/\">http://127.0.0.1:8000/</a>. Uvid\u00edte str\u00e1nku &quot;Welcome to Django&quot; ve velmi\r\np\u0159\u00edtuln\u00e9, sv\u011btle modr\u00e9 barv\u011b. Fach\u00e1 to!</p>\r\n<div class=\"admonition-zm-na-portu admonition \">\r\n<p class=\"first admonition-title\">Zm\u011bna portu</p>\r\n<p>Standardn\u011b p\u0159\u00edkaz <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/django-admin/#djadmin-runserver\"><tt class=\"xref docutils literal\"><span class=\"pre\">runserver</span></tt></a> spou\u0161t\u00ed v\u00fdvojov\u00fd server na\r\nintern\u00ed IP a portu 8000.</p>\r\n<p>Pokud chcete zm\u011bnit port serveru, napi\u0161te jej jako\r\nparametr p\u0159\u00edkazu. Nap\u0159. tento p\u0159\u00edkaz spust\u00ed server na portu 8080:</p>\r\n<div class=\"highlight-bash\"><div class=\"highlight\"><pre>python manage.py runserver 8080\r\n</pre></div>\r\n</div>\r\n<p>Pokud chcete zm\u011bnit IP adresu, na kter\u00e9 bude server pov\u011b\u0161en\u00fd, zadejte\r\nji spole\u010dn\u011b s \u010d\u00edslem portu. Jednoduch\u00fdm zp\u016fsobem je mo\u017en\u00e9 za\u0159\u00eddit,\r\naby server poslouchal na v\u0161ech ve\u0159ejn\u00fdch IP adres\u00e1ch (m\u016f\u017ee se hodit\r\nv p\u0159\u00edpadech, kdy chcete sv\u00e9 d\u00edlo uk\u00e1zat na ostatn\u00edch po\u010d\u00edta\u010d\u00edch v s\u00edti):</p>\r\n<div class=\"highlight-bash\"><div class=\"highlight\"><pre>python manage.py runserver 0.0.0.0:8080\r\n</pre></div>\r\n</div>\r\n<p class=\"last\">Kompletn\u00ed dokumentaci k v\u00fdvojov\u00e9mu serveru m\u016f\u017eete naj\u00edt v\r\nreferenci k p\u0159\u00edkazu <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/django-admin/#djadmin-runserver\"><tt class=\"xref docutils literal\"><span class=\"pre\">runserver</span></tt></a>.</p>\r\n</div>\r\n</div>\r\n<div class=\"section\" id=\"s-nastaven-datab-ze\">\r\n<span id=\"nastaven-datab-ze\"></span><h3>Nastaven\u00ed datab\u00e1ze<a class=\"headerlink\" href=\"#nastaven-datab-ze\" title=\"Permalink na tento nadpis\">\u00b6</a></h3>\r\n<p>Je na \u010dase upravit soubor <cite>settings.py</cite>. Soubor <cite>settings.py</cite> je\r\noby\u010dejn\u00fd Python modul s prom\u011bnn\u00fdmi, kter\u00fdmi se konfiguruje Django.\r\nZm\u011bnte n\u00e1sleduj\u00edc\u00ed kl\u00ed\u010de u z\u00e1znamu <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-DATABASES\"><tt class=\"xref docutils literal\"><span class=\"pre\">DATABASES</span></tt></a> <tt class=\"docutils literal\"><span class=\"pre\">'default'</span></tt>\r\ntak, aby vyhovovaly parametr\u016fm va\u0161\u00ed datab\u00e1ze:</p>\r\n<ul>\r\n<li><p class=\"first\"><a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-ENGINE\"><tt class=\"xref docutils literal\"><span class=\"pre\">ENGINE</span></tt></a> -- Vyberte\r\n<tt class=\"docutils literal\"><span class=\"pre\">'django.db.backends.postgresql_psycopg2'</span></tt>,\r\n<tt class=\"docutils literal\"><span class=\"pre\">'django.db.backends.mysql'</span></tt> nebo\r\n<tt class=\"docutils literal\"><span class=\"pre\">'django.db.backends.sqlite3'</span></tt>.\r\nDjango podporuje i <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-ENGINE\"><tt class=\"xref docutils literal\"><span class=\"pre\">dal\u0161\u00ed</span> <span class=\"pre\">datab\u00e1zov\u00e9</span>\r\n<span class=\"pre\">backendy</span></tt></a>.</p>\r\n</li>\r\n<li><p class=\"first\"><a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-NAME\"><tt class=\"xref docutils literal\"><span class=\"pre\">NAME</span></tt></a> -- Jm\u00e9no va\u0161\u00ed datab\u00e1ze. Pokud pou\u017e\u00edv\u00e1te\r\nSQLite, uve\u010fte zde absolutn\u00ed cestu (v\u010detn\u011b jm\u00e9na souboru) k\r\ndatab\u00e1zov\u00e9mu souboru (v p\u0159\u00edpad\u011b, \u017ee soubor neexistuje, bude\r\nvytvo\u0159en p\u0159i prvn\u00ed synchronizaci, viz n\u00ed\u017ee).</p>\r\n<p>P\u0159i uv\u00e1d\u011bn\u00ed cesty v\u017edy pou\u017e\u00edvejte dop\u0159edn\u00e9 lom\u00edtka (/), a to i v\r\nsyst\u00e9mu Windows (nap\u0159. <tt class=\"docutils literal\"><span class=\"pre\">C:/homes/user/mysite/sqlite3.db</span></tt>).</p>\r\n</li>\r\n<li><p class=\"first\"><a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-USER\"><tt class=\"xref docutils literal\"><span class=\"pre\">USER</span></tt></a> -- Va\u0161e datab\u00e1zov\u00e9 u\u017eivatelsk\u00e9 jm\u00e9no (u\r\nSQLite se nepou\u017e\u00edv\u00e1).</p>\r\n</li>\r\n<li><p class=\"first\"><a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-PASSWORD\"><tt class=\"xref docutils literal\"><span class=\"pre\">PASSWORD</span></tt></a> -- Va\u0161e datab\u00e1zov\u00e9 heslo (u SQLite se\r\nnepou\u017e\u00edv\u00e1).</p>\r\n</li>\r\n<li><p class=\"first\"><a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-HOST\"><tt class=\"xref docutils literal\"><span class=\"pre\">HOST</span></tt></a> -- Po\u010d\u00edta\u010d, na kter\u00e9m jede datab\u00e1ze.\r\nPokud je na stejn\u00e9m po\u010d\u00edta\u010di jako Django, nechte \u0159et\u011bzec pr\u00e1zdn\u00fd.\r\n(u SQLite se nepou\u017e\u00edv\u00e1)</p>\r\n</li>\r\n</ul>\r\n<p>Jestli\u017ee se v datab\u00e1z\u00edch neorientujete, vyberte si SQLite (tj. nastavte\r\n<a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-ENGINE\"><tt class=\"xref docutils literal\"><span class=\"pre\">ENGINE</span></tt></a> na <tt class=\"docutils literal\"><span class=\"pre\">'sqlite3'</span></tt>). SQLite je sou\u010d\u00e1st\u00ed Pythonu\r\nod verze 2.5, tak\u017ee se nemus\u00ed nic instalovat.</p>\r\n<div class=\"admonition-pozn-mka admonition \">\r\n<p class=\"first admonition-title\">Pozn\u00e1mka</p>\r\n<p>Pokud pou\u017e\u00edv\u00e1te PostgreSQL nebo MySQL, ujist\u011bte se, \u017ee datab\u00e1ze ji\u017e\r\nexistuje. Pokud ne, vytvo\u0159\u00edte ji p\u0159\u00edkazem &quot;<tt class=\"docutils literal\"><span class=\"pre\">CREATE</span> <span class=\"pre\">DATABASE</span>\r\n<span class=\"pre\">jmeno_databaze;</span></tt>&quot; v interaktivn\u00ed datab\u00e1zov\u00e9 p\u0159\u00edkazov\u00e9 \u0159\u00e1dce.</p>\r\n<p class=\"last\">Pokud pou\u017e\u00edv\u00e1te SQLite, nemus\u00edte d\u011blat nic -- datab\u00e1zov\u00fd soubor bude\r\nautomaticky vytvo\u0159en a\u017e bude t\u0159eba.</p>\r\n</div>\r\n<p>Kdy\u017e u\u017e editujete <tt class=\"docutils literal\"><span class=\"pre\">settings.py</span></tt>, v\u0161imn\u011bte si prom\u011bnn\u00e9\r\n<a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-INSTALLED_APPS\"><tt class=\"xref docutils literal\"><span class=\"pre\">INSTALLED_APPS</span></tt></a> ve spodn\u00ed \u010d\u00e1sti souboru. Tato prom\u011bnn\u00e1 udr\u017euje\r\ninformace o v\u0161ech aktivn\u00edch aplikac\u00edch pro tuto instanci Djanga.\r\nAplikace mohou b\u00fdt pou\u017eity ve v\u00edce projektech, m\u016f\u017eete vytv\u00e1\u0159et jejich\r\nbal\u00ed\u010dky a nab\u00edzet je ostatn\u00edm vyvoj\u00e1\u0159\u016fm (kte\u0159\u00ed je pak za\u010dle\u0148uj\u00ed do\r\nsv\u00fdch projekt\u016f).</p>\r\n<p>Standardn\u011b <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-INSTALLED_APPS\"><tt class=\"xref docutils literal\"><span class=\"pre\">INSTALLED_APPS</span></tt></a> obsahuje tyto aplikace:</p>\r\n<ul class=\"simple\">\r\n<li><a title=\"Django's authentication framework.\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/auth/#module-django.contrib.auth\"><tt class=\"xref docutils literal\"><span class=\"pre\">django.contrib.auth</span></tt></a> -- Autentifika\u010dn\u00ed syst\u00e9m.</li>\r\n<li><a title=\"Provides generic interface to installed models.\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#module-django.contrib.contenttypes\"><tt class=\"xref docutils literal\"><span class=\"pre\">django.contrib.contenttypes</span></tt></a> -- Framework pro typy obsahu.</li>\r\n<li><a title=\"Provides session management for Django projects.\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/http/sessions/#module-django.contrib.sessions\"><tt class=\"xref docutils literal\"><span class=\"pre\">django.contrib.sessions</span></tt></a> -- Framework pro sessions (sezen\u00ed).</li>\r\n<li><a title=\"Lets you operate multiple web sites from the same database and Django project\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/contrib/sites/#module-django.contrib.sites\"><tt class=\"xref docutils literal\"><span class=\"pre\">django.contrib.sites</span></tt></a> -- Framework pro spravov\u00e1n\u00ed n\u011bkolika\r\nsamostatn\u00fdch web\u016f v jedn\u00e9 instanci Djanga.</li>\r\n</ul>\r\n<p>Uveden\u00e9 aplikace jsou sou\u010d\u00e1st\u00ed Djanga, proto\u017ee jde o b\u011b\u017en\u011b pou\u017e\u00edvan\u00e9\r\nkomponenty p\u0159i v\u00fdvoji web\u016f.</p>\r\n<p>Ka\u017ed\u00e1 z uveden\u00fdch aplikac\u00ed pou\u017e\u00edv\u00e1 alespo\u0148 jednu datab\u00e1zovou tabulku. Ne\u017e\r\nje za\u010dneme pou\u017e\u00edvat, mus\u00edme pro n\u011b v datab\u00e1zi tabulky vytvo\u0159it:</p>\r\n<div class=\"highlight-bash\"><div class=\"highlight\"><pre>python manage.py syncdb\r\n</pre></div>\r\n</div>\r\n<p>P\u0159\u00edkaz <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/django-admin/#djadmin-syncdb\"><tt class=\"xref docutils literal\"><span class=\"pre\">syncdb</span></tt></a> \u010dte prom\u011bnnou <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-INSTALLED_APPS\"><tt class=\"xref docutils literal\"><span class=\"pre\">INSTALLED_APPS</span></tt></a>  a\r\nvytvo\u0159\u00ed v datab\u00e1zi v\u0161echny pot\u0159ebn\u00e9 tabulky. Po jeho spu\u0161t\u011bn\u00ed uvid\u00edte\r\nzpr\u00e1vu o vytvo\u0159en\u00ed ka\u017ed\u00e9 z tabulek a dotaz, jestli chcete vytvo\u0159it \u00fa\u010det\r\nsuperu\u017eivatele pro autentifika\u010dn\u00ed syst\u00e9m (odpov\u011bzte &quot;yes&quot; a \u00fa\u010det\r\nvytvo\u0159te).</p>\r\n<p>Pokud v\u00e1s zaj\u00edm\u00e1, jak\u00e9 tabulky Django vytvo\u0159ilo, spus\u0165te interaktivn\u00ed\r\ndatab\u00e1zovou p\u0159\u00edkazovou \u0159\u00e1dku a napi\u0161te <tt class=\"docutils literal\"><span class=\"pre\">\\dt</span></tt> (PostgreSQL), <tt class=\"docutils literal\"><span class=\"pre\">SHOW</span>\r\n<span class=\"pre\">TABLES;</span></tt> (MySQL), nebo <tt class=\"docutils literal\"><span class=\"pre\">.schema</span></tt> (SQLite).</p>\r\n<div class=\"admonition-pozn-mka-pro-minimalisty-a-nihilisty admonition \">\r\n<p class=\"first admonition-title\">Pozn\u00e1mka pro minimalisty (a nihilisty)</p>\r\n<p class=\"last\">Jak u\u017e bylo \u0159e\u010deno, Django obsahuje sadu standardn\u00edch aplikac\u00ed, ale\r\nne v\u0161ichni je pot\u0159ebuj\u00ed (nap\u0159. nihilisti). Pokud si mysl\u00edte, \u017ee jsou\r\nv\u00e1m na nic, s klidem zakomentujte nebo vyma\u017ete pat\u0159i\u010dn\u00fd \u0159\u00e1dek z\r\nprom\u011bnn\u00e9 <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-INSTALLED_APPS\"><tt class=\"xref docutils literal\"><span class=\"pre\">INSTALLED_APPS</span></tt></a> ne\u017e pou\u017eijete p\u0159\u00edkaz\r\n<a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/django-admin/#djadmin-syncdb\"><tt class=\"xref docutils literal\"><span class=\"pre\">syncdb</span></tt></a>. P\u0159\u00edkaz <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/django-admin/#djadmin-syncdb\"><tt class=\"xref docutils literal\"><span class=\"pre\">syncdb</span></tt></a> vytvo\u0159\u00ed tabulky pouze\r\npro aplikace uveden\u00e9 v <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-INSTALLED_APPS\"><tt class=\"xref docutils literal\"><span class=\"pre\">INSTALLED_APPS</span></tt></a>.</p>\r\n</div>\r\n</div>\r\n</div>\r\n<div class=\"section\" id=\"s-vytv-en-model\">\r\n<span id=\"s-creating-models\"></span><span id=\"vytv-en-model\"></span><span id=\"creating-models\"></span><h2>Vytv\u00e1\u0159en\u00ed model\u016f<a class=\"headerlink\" href=\"#vytv-en-model\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Tak. Kone\u010dn\u011b m\u00e1me v\u0161e ponastavov\u00e1no -- &quot;projekt&quot; -- a m\u016f\u017eem za\u010d\u00edt\r\nd\u011blat n\u011bco kloudn\u00e9ho.</p>\r\n<p>Ka\u017ed\u00e1 aplikace, kterou v Djangu nap\u00ed\u0161ete, se skl\u00e1d\u00e1 z Python bal\u00ed\u010dku\r\num\u00edst\u011bn\u00e9ho na n\u011bkter\u00e9 z <a class=\"reference external\" href=\"http://docs.python.org/tutorial/modules.html#the-module-search-path\">cest v PYTHONPATH</a>. Django obsahuje utilitu,\r\nkter\u00e1 v\u00e1m pom\u016f\u017ee vygenerovat z\u00e1kladn\u00ed adres\u00e1\u0159ovou strukturu nov\u00e9\r\naplikace.</p>\r\n<div class=\"admonition-projekty-kontra-aplikace admonition \">\r\n<p class=\"first admonition-title\">Projekty kontra aplikace</p>\r\n<p class=\"last\">Jak\u00fd je rozd\u00edl mezi projektem a aplikac\u00ed? Aplikace je webov\u00fd k\u00f3d,\r\nkter\u00fd n\u011bco d\u011bl\u00e1 -- nap\u0159. blogovac\u00ed syst\u00e9m, datab\u00e1ze ve\u0159ejn\u00fdch\r\nz\u00e1znam\u016f nebo jednoduch\u00e1 anketa. Projekt je soubor aplikac\u00ed\r\na nastaven\u00ed, kter\u00fd funguje na konkr\u00e9tn\u00ed dom\u00e9n\u011b. Projekt m\u016f\u017ee\r\nobsahovat v\u00edce aplikac\u00ed. Aplikace m\u016f\u017ee b\u00fdt ve v\u00edce projektech.</p>\r\n</div>\r\n<p>V tomto n\u00e1vodu vytvo\u0159\u00edme anketn\u00ed aplikaci, kterou pro zjednodu\u0161en\u00ed\r\num\u00edst\u00edme p\u0159\u00edmo do adres\u00e1\u0159e <tt class=\"docutils literal\"><span class=\"pre\">mysite</span></tt>. D\u016fsledkem tohoto zjednodu\u0161en\u00ed\r\nbude vz\u00e1jemn\u00e9 propojen\u00ed aplikace a projektu -- tj. Python k\u00f3d se v\r\nanketn\u00ed aplikaci bude odkazovat na adres\u00e1\u0159 <tt class=\"docutils literal\"><span class=\"pre\">mysite.polls</span></tt>. Pozd\u011bji\r\nsi uk\u00e1\u017eeme, jak aplikaci od projektu odd\u011blit a umo\u017enit jeho distribuci.</p>\r\n<p>Pro vytvo\u0159en\u00ed aplikace se ujist\u011bte, \u017ee se nach\u00e1z\u00edte v adres\u00e1\u0159i\r\n<tt class=\"docutils literal\"><span class=\"pre\">mysite</span></tt> a zadejte tento p\u0159\u00edkaz:</p>\r\n<div class=\"highlight-bash\"><div class=\"highlight\"><pre>python manage.py startapp polls\r\n</pre></div>\r\n</div>\r\n<p>Vytvo\u0159\u00ed se adres\u00e1\u0159 <tt class=\"docutils literal\"><span class=\"pre\">polls</span></tt> s n\u00e1sleduj\u00edc\u00ed strukturou:</p>\r\n<div class=\"highlight-python\"><pre>polls/\r\n    __init__.py\r\n    models.py\r\n    views.py</pre>\r\n</div>\r\n<p>Tato struktura se stane domovem na\u0161\u00ed anketn\u00ed aplikace.</p>\r\n<p>Prvn\u00edm krokem p\u0159i vytv\u00e1\u0159en\u00ed datab\u00e1zov\u00e9 Django aplikace je definice\r\nmodel\u016f -- tj. struktury datab\u00e1ze s dodate\u010dn\u00fdmi metadaty.</p>\r\n<div class=\"admonition-filozofie admonition \">\r\n<p class=\"first admonition-title\">Filozofie</p>\r\n<p class=\"last\">Model je jedine\u010dn\u00fdm popisem va\u0161ich dat. Obsahuje v\u0161echna\r\nnezbytn\u00e1 pole a chov\u00e1n\u00ed ukl\u00e1dan\u00fdch dat. Django ct\u00ed\r\n<a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/misc/design-philosophies/#dry\"><em>DRY princip</em></a> (Dont Repeat Yourself -- neopakuj se).\r\nC\u00edlem je definovat datov\u00fd model na jedin\u00e9m m\u00edst\u011b a ostatn\u00ed v\u011bci z\r\nn\u011bj odvozovat automaticky.</p>\r\n</div>\r\n<p>V na\u0161\u00ed jednoduch\u00e9 anketn\u00ed aplikaci si vytvo\u0159\u00edme dva modely -- ankety a\r\njej\u00ed volby. Anketa bude slo\u017eena z ot\u00e1zky a data zve\u0159ejn\u011bn\u00ed. Volba bude\r\nm\u00edt dv\u011b pole: textov\u00fd popis a z\u00e1znam hlasov\u00e1n\u00ed. Ka\u017ed\u00e1 volba bude spojena\r\ns anketou.</p>\r\n<p>Nyn\u00ed si slovn\u00ed popis na\u0161\u00ed aplikace p\u0159ep\u00ed\u0161eme do jednoduch\u00fdch Python\r\nt\u0159\u00edd. Upravte soubor <tt class=\"docutils literal\"><span class=\"pre\">polls/models.py</span></tt>, aby vypadal takto:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"kn\">from</span> <span class=\"nn\">django.db</span> <span class=\"kn\">import</span> <span class=\"n\">models</span>\r\n\r\n<span class=\"k\">class</span> <span class=\"nc\">Poll</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\r\n    <span class=\"n\">question</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">(</span><span class=\"n\">max_length</span><span class=\"o\">=</span><span class=\"mf\">200</span><span class=\"p\">)</span>\r\n    <span class=\"n\">pub_date</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">DateTimeField</span><span class=\"p\">(</span><span class=\"s\">&#39;date published&#39;</span><span class=\"p\">)</span>\r\n\r\n<span class=\"k\">class</span> <span class=\"nc\">Choice</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\r\n    <span class=\"n\">poll</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">ForeignKey</span><span class=\"p\">(</span><span class=\"n\">Poll</span><span class=\"p\">)</span>\r\n    <span class=\"n\">choice</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">(</span><span class=\"n\">max_length</span><span class=\"o\">=</span><span class=\"mf\">200</span><span class=\"p\">)</span>\r\n    <span class=\"n\">votes</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">IntegerField</span><span class=\"p\">()</span>\r\n</pre></div>\r\n</div>\r\n<p>Uveden\u00fd k\u00f3d je pom\u011brn\u011b p\u0159\u00edmo\u010dar\u00fd. Ka\u017ed\u00fd model je potomkem t\u0159\u00eddy\r\n<a title=\"django.db.models.Model\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model\"><tt class=\"xref docutils literal\"><span class=\"pre\">django.db.models.Model</span></tt></a> a jeho prom\u011bnn\u00e9 definuj\u00ed jednotliv\u00e1\r\ndatab\u00e1zov\u00e1 pole.</p>\r\n<p>Ka\u017ed\u00e9 pole je reprezentov\u00e1no instanc\u00ed t\u0159\u00eddy\r\n<tt class=\"xref docutils literal\"><span class=\"pre\">Field</span></tt> -- nap\u0159.,\r\n<a title=\"django.db.models.CharField\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.CharField\"><tt class=\"xref docutils literal\"><span class=\"pre\">CharField</span></tt></a> pro znakov\u00e1 pole a\r\n<a title=\"django.db.models.DateTimeField\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.DateTimeField\"><tt class=\"xref docutils literal\"><span class=\"pre\">DateTimeField</span></tt></a> pro datum a \u010das.</p>\r\n<p>Pojmenov\u00e1n\u00edm jednotliv\u00fdch pol\u00ed <tt class=\"xref docutils literal\"><span class=\"pre\">Field</span></tt> (nap\u0159.\r\n<tt class=\"docutils literal\"><span class=\"pre\">question</span></tt> nebo <tt class=\"docutils literal\"><span class=\"pre\">pub_date</span></tt>) se definuje tzv. &quot;strojov\u00e9&quot;\r\n(machine-friendly) jm\u00e9no. P\u0159es n\u011b budete v Pythonu p\u0159istupovat k\r\nhodnot\u011b pole a v datab\u00e1zi bude vyu\u017eito pro pojmenov\u00e1n\u00ed sloupce.</p>\r\n<p>Pokud chcete, m\u016f\u017eete pomoc\u00ed prvn\u00edho argumentu v\r\n<tt class=\"xref docutils literal\"><span class=\"pre\">Field</span></tt> vytvo\u0159it &quot;lidsky \u010diteln\u00e9&quot;\r\n(human-readable) jm\u00e9no. Pokud jej nezad\u00e1te, Django si ho odvod\u00ed ze\r\nstrojov\u00e9ho jm\u00e9na. V na\u0161em p\u0159\u00edklad\u011b jsme &quot;lidsk\u00e9&quot; jm\u00e9no definovali pouze\r\npro pole <tt class=\"docutils literal\"><span class=\"pre\">Poll.pub_date</span></tt>.</p>\r\n<p>N\u011bkter\u00e9 <tt class=\"xref docutils literal\"><span class=\"pre\">Field</span></tt> t\u0159\u00eddy maj\u00ed povinn\u00e9 parametry.\r\nNap\u0159. <a title=\"django.db.models.CharField\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.CharField\"><tt class=\"xref docutils literal\"><span class=\"pre\">CharField</span></tt></a> vy\u017eaduje specifikaci\r\n<tt class=\"xref docutils literal\"><span class=\"pre\">max_length</span></tt> (maxim\u00e1ln\u00ed d\u00e9lka \u0159et\u011bzce).\r\nZadan\u00e1 hodnota se pou\u017eije b\u011bhem vytv\u00e1\u0159en\u00ed datab\u00e1zov\u00e9 tabulky, ale jak si\r\nbrzy uk\u00e1\u017eeme, poslou\u017e\u00ed stejn\u011b dob\u0159e i pro validaci hodnoty.</p>\r\n<p>Nakonec si v\u0161imn\u011bte definice vztahu s pomoc\u00ed v\u00fdrazu\r\n<a title=\"django.db.models.ForeignKey\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey\"><tt class=\"xref docutils literal\"><span class=\"pre\">ForeignKey</span></tt></a>. Ten Djangu \u0159\u00edk\u00e1, \u017ee ka\u017ed\u00e1 volba\r\nse vztahuje k jedn\u00e9 anket\u011b. Django podporuje v\u0161echny obvykl\u00e9 datab\u00e1zov\u00e9\r\nrelace: M:N (many-to-many), 1:N (many-to-one) a 1:1 (one-to-one).</p>\r\n</div>\r\n<div class=\"section\" id=\"s-aktivace-model\">\r\n<span id=\"aktivace-model\"></span><h2>Aktivace model\u016f<a class=\"headerlink\" href=\"#aktivace-model\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Uveden\u00fd kousek k\u00f3du poskytuje Djangu spoustu informac\u00ed o modelu. D\u00edky\r\nn\u011bmu Django m\u016f\u017ee:</p>\r\n<ul class=\"simple\">\r\n<li>Vytvo\u0159it datab\u00e1zov\u00e9 sch\u00e9ma (v\u00fdrazy <tt class=\"docutils literal\"><span class=\"pre\">CREATE</span> <span class=\"pre\">TABLE</span></tt>) pro na\u0161i\r\naplikaci.</li>\r\n<li>Vytvo\u0159it datab\u00e1zov\u00e9 API v Pythonu pro p\u0159\u00edstup k objekt\u016fm Poll\r\n(anketa) a Choice (volba).</li>\r\n</ul>\r\n<p>Ale nejprve mus\u00edme na\u0161emu projektu \u0159\u00edct, \u017ee aplikace <tt class=\"docutils literal\"><span class=\"pre\">polls</span></tt> je\r\nnainstalov\u00e1na.</p>\r\n<div class=\"admonition-filozofie admonition \">\r\n<p class=\"first admonition-title\">Filozofie</p>\r\n<p class=\"last\">Django aplikace jsou &quot;z\u00e1suvn\u00e9&quot;: aplikace m\u016f\u017ee b\u00fdt pou\u017eita ve v\u00edce\r\nprojektech a aplikace mohou b\u00fdt distribuov\u00e1ny.</p>\r\n</div>\r\n<p>Znovu upravte soubor <tt class=\"docutils literal\"><span class=\"pre\">settings.py</span></tt> a zm\u011b\u0148te nastaven\u00ed\r\n<a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-INSTALLED_APPS\"><tt class=\"xref docutils literal\"><span class=\"pre\">INSTALLED_APPS</span></tt></a> tak, aby obsahovalo \u0159et\u011bzec <tt class=\"docutils literal\"><span class=\"pre\">'mysite.polls'</span></tt>.\r\nTak\u017ee bude vypadat n\u00e1sledovn\u011b:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"n\">INSTALLED_APPS</span> <span class=\"o\">=</span> <span class=\"p\">(</span>\r\n    <span class=\"s\">&#39;django.contrib.auth&#39;</span><span class=\"p\">,</span>\r\n    <span class=\"s\">&#39;django.contrib.contenttypes&#39;</span><span class=\"p\">,</span>\r\n    <span class=\"s\">&#39;django.contrib.sessions&#39;</span><span class=\"p\">,</span>\r\n    <span class=\"s\">&#39;django.contrib.sites&#39;</span><span class=\"p\">,</span>\r\n    <span class=\"s\">&#39;mysite.polls&#39;</span>\r\n<span class=\"p\">)</span>\r\n</pre></div>\r\n</div>\r\n<p>Django te\u010f v\u00ed, \u017ee <tt class=\"docutils literal\"><span class=\"pre\">mysite</span></tt> obsahuje aplikaci <tt class=\"docutils literal\"><span class=\"pre\">polls</span></tt>. Spus\u0165me dal\u0161\u00ed\r\np\u0159\u00edkaz:</p>\r\n<div class=\"highlight-bash\"><div class=\"highlight\"><pre>python manage.py sql polls\r\n</pre></div>\r\n</div>\r\n<p>M\u011bli by jste vid\u011bt n\u011bco podobn\u00e9ho (SQL p\u0159\u00edkazy <tt class=\"docutils literal\"><span class=\"pre\">CREATE</span> <span class=\"pre\">TABLE</span></tt> pro\r\nna\u0161i anketn\u00ed aplikaci):</p>\r\n<div class=\"highlight-sql\"><div class=\"highlight\"><pre><span class=\"k\">BEGIN</span><span class=\"p\">;</span>\r\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"ss\">&quot;polls_poll&quot;</span> <span class=\"p\">(</span>\r\n    <span class=\"ss\">&quot;id&quot;</span> <span class=\"nb\">serial</span> <span class=\"k\">NOT</span> <span class=\"k\">NULL</span> <span class=\"k\">PRIMARY</span> <span class=\"k\">KEY</span><span class=\"p\">,</span>\r\n    <span class=\"ss\">&quot;question&quot;</span> <span class=\"nb\">varchar</span><span class=\"p\">(</span><span class=\"mi\">200</span><span class=\"p\">)</span> <span class=\"k\">NOT</span> <span class=\"k\">NULL</span><span class=\"p\">,</span>\r\n    <span class=\"ss\">&quot;pub_date&quot;</span> <span class=\"k\">timestamp</span> <span class=\"k\">with</span> <span class=\"n\">time</span> <span class=\"k\">zone</span> <span class=\"k\">NOT</span> <span class=\"k\">NULL</span>\r\n<span class=\"p\">);</span>\r\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"ss\">&quot;polls_choice&quot;</span> <span class=\"p\">(</span>\r\n    <span class=\"ss\">&quot;id&quot;</span> <span class=\"nb\">serial</span> <span class=\"k\">NOT</span> <span class=\"k\">NULL</span> <span class=\"k\">PRIMARY</span> <span class=\"k\">KEY</span><span class=\"p\">,</span>\r\n    <span class=\"ss\">&quot;poll_id&quot;</span> <span class=\"nb\">integer</span> <span class=\"k\">NOT</span> <span class=\"k\">NULL</span> <span class=\"k\">REFERENCES</span> <span class=\"ss\">&quot;polls_poll&quot;</span> <span class=\"p\">(</span><span class=\"ss\">&quot;id&quot;</span><span class=\"p\">),</span>\r\n    <span class=\"ss\">&quot;choice&quot;</span> <span class=\"nb\">varchar</span><span class=\"p\">(</span><span class=\"mi\">200</span><span class=\"p\">)</span> <span class=\"k\">NOT</span> <span class=\"k\">NULL</span><span class=\"p\">,</span>\r\n    <span class=\"ss\">&quot;votes&quot;</span> <span class=\"nb\">integer</span> <span class=\"k\">NOT</span> <span class=\"k\">NULL</span>\r\n<span class=\"p\">);</span>\r\n<span class=\"k\">COMMIT</span><span class=\"p\">;</span>\r\n</pre></div>\r\n</div>\r\n<p>M\u011bjte na pam\u011bti:</p>\r\n<ul class=\"simple\">\r\n<li>P\u0159esn\u00fd v\u00fdstup se bude li\u0161it podle pou\u017eit\u00e9 datab\u00e1ze.</li>\r\n<li>Jm\u00e9na tabulek jsou automaticky generov\u00e1na ze jm\u00e9na aplikace\r\n(<tt class=\"docutils literal\"><span class=\"pre\">polls</span></tt>) a jm\u00e9na modelu -- <tt class=\"docutils literal\"><span class=\"pre\">poll</span></tt> a <tt class=\"docutils literal\"><span class=\"pre\">choice</span></tt>. (Toto chov\u00e1n\u00ed\r\nm\u016f\u017eete zm\u011bnit.)</li>\r\n<li>Prim\u00e1rn\u00ed kl\u00ed\u010de (ID) jsou p\u0159id\u00e1ny automaticky. (Tak\u00e9 lze zm\u011bnit.)</li>\r\n<li>Django samo od sebe p\u0159ilepuje suffix <tt class=\"docutils literal\"><span class=\"pre\">&quot;_id&quot;</span></tt> ke jm\u00e9n\u016fm pol\u00ed s\r\nciz\u00edmi kl\u00ed\u010di (foreign keys). I toto m\u016f\u017eete zm\u011bnit.</li>\r\n<li>Relace foreign key je vytvo\u0159ena explicitn\u00edm v\u00fdrazem <tt class=\"docutils literal\"><span class=\"pre\">REFERENCES</span></tt>.</li>\r\n<li>V\u00fdstup je p\u0159izp\u016fsoben pou\u017eit\u00e9 datab\u00e1zi, tak\u017ee typy pol\u00ed specifick\u00e9\r\npro datab\u00e1ze, jako <tt class=\"docutils literal\"><span class=\"pre\">auto_increment</span></tt> (MySQL), <tt class=\"docutils literal\"><span class=\"pre\">serial</span></tt>\r\n(PostgreSQL), nebo <tt class=\"docutils literal\"><span class=\"pre\">integer</span> <span class=\"pre\">primary</span> <span class=\"pre\">key</span></tt> (SQLite) jsou\r\nautomaticky zpracov\u00e1ny. To sam\u00e9 plat\u00ed i o ohrani\u010dov\u00e1n\u00ed jmen pol\u00ed\r\ndo uvozovek -- dvojit\u00fdch nebo jednoduch\u00fdch. Autor tohoto n\u00e1vodu\r\npou\u017e\u00edv\u00e1 PostgreSQL, tak\u017ee v\u00fdstup je ps\u00e1n v syntaxi PostgreSQL.</li>\r\n<li>P\u0159\u00edkaz <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/django-admin/#djadmin-sql\"><tt class=\"xref docutils literal\"><span class=\"pre\">sql</span></tt></a> nespou\u0161t\u00ed SQL v datab\u00e1zi -- pouze je vyp\u00ed\u0161e\r\nna obrazovku, tak\u017ee m\u016f\u017eete zkontrolovat, co se Django chyst\u00e1\r\nud\u011blat. Pokud chcete, m\u016f\u017eete SQL p\u0159\u00edkazy zkop\u00edrovat do datab\u00e1zov\u00e9ho\r\ninterpreteru a nechat prov\u00e9st. Jak ale pozd\u011bji uvid\u00edme, existuje\r\npohodln\u011bj\u0161\u00ed varianta...</li>\r\n</ul>\r\n<p>Pro zaj\u00edmavost zadejte n\u00e1sleduj\u00edc\u00ed p\u0159\u00edkazy:</p>\r\n<ul class=\"simple\">\r\n<li><a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/django-admin/#djadmin-validate\"><tt class=\"xref docutils literal\"><span class=\"pre\">python</span> <span class=\"pre\">manage.py</span> <span class=\"pre\">validate</span></tt></a> -- Hled\u00e1 jak\u00e9koli\r\nchyby v definici modelu.</li>\r\n<li><a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/django-admin/#djadmin-sqlcustom\"><tt class=\"xref docutils literal\"><span class=\"pre\">python</span> <span class=\"pre\">manage.py</span> <span class=\"pre\">sqlcustom</span> <span class=\"pre\">polls</span></tt></a> -- Vyp\u00ed\u0161e\r\nv\u0161echny <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/howto/initial-data/#initial-sql\"><em>u\u017eivatelsk\u00e9 SQL p\u0159\u00edkazy</em></a> (jako jsou\r\nmodifikace nebo omezen\u00ed tabulek) definovan\u00e9 pro tuto aplikaci.</li>\r\n<li><a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/django-admin/#djadmin-sqlclear\"><tt class=\"xref docutils literal\"><span class=\"pre\">python</span> <span class=\"pre\">manage.py</span> <span class=\"pre\">sqlclear</span> <span class=\"pre\">polls</span></tt></a> -- Vyp\u00ed\u0161e\r\nv\u0161echny <tt class=\"docutils literal\"><span class=\"pre\">DROP</span> <span class=\"pre\">TABLE</span></tt> p\u0159\u00edkazy pro zadanou aplikaci (ale pouze\r\npro ty, kter\u00e9 v datab\u00e1zi skute\u010dn\u011b existuj\u00ed).</li>\r\n<li><a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/django-admin/#djadmin-sqlindexes\"><tt class=\"xref docutils literal\"><span class=\"pre\">python</span> <span class=\"pre\">manage.py</span> <span class=\"pre\">sqlindexes</span> <span class=\"pre\">polls</span></tt></a> --\r\nVyp\u00ed\u0161e <tt class=\"docutils literal\"><span class=\"pre\">CREATE</span> <span class=\"pre\">INDEX</span></tt> p\u0159\u00edkazy pro tuto aplikaci.</li>\r\n<li><a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/django-admin/#djadmin-sqlall\"><tt class=\"xref docutils literal\"><span class=\"pre\">python</span> <span class=\"pre\">manage.py</span> <span class=\"pre\">sqlall</span> <span class=\"pre\">polls</span></tt></a> -- Kombinace\r\nv\u0161ech SQL dohromady, tj. <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/django-admin/#djadmin-sql\"><tt class=\"xref docutils literal\"><span class=\"pre\">sql</span></tt></a>, <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/django-admin/#djadmin-sqlcustom\"><tt class=\"xref docutils literal\"><span class=\"pre\">sqlcustom</span></tt></a>, a\r\n<a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/django-admin/#djadmin-sqlindexes\"><tt class=\"xref docutils literal\"><span class=\"pre\">sqlindexes</span></tt></a>.</li>\r\n</ul>\r\n<p>Kdy\u017e si prostudujete jednotliv\u00e9 v\u00fdstupy, pom\u016f\u017ee v\u00e1m to pochopit co se\r\nd\u011bje pod pokli\u010dkou.</p>\r\n<p>Te\u010f op\u011bt spus\u0165te p\u0159\u00edkaz <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/django-admin/#djadmin-syncdb\"><tt class=\"xref docutils literal\"><span class=\"pre\">syncdb</span></tt></a>, aby se n\u00e1m vytvo\u0159ily pot\u0159ebn\u00e9\r\ntabulky model\u016f v datab\u00e1zi:</p>\r\n<div class=\"highlight-bash\"><div class=\"highlight\"><pre>python manage.py syncdb\r\n</pre></div>\r\n</div>\r\n<p>P\u0159\u00edkaz <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/django-admin/#djadmin-syncdb\"><tt class=\"xref docutils literal\"><span class=\"pre\">syncdb</span></tt></a> spust\u00ed ve va\u0161\u00ed datab\u00e1zi SQL p\u0159\u00edkazy z v\u00fdstupu\r\n'sqlall' pro v\u0161echny aplikace uveden\u00e9 v <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-INSTALLED_APPS\"><tt class=\"xref docutils literal\"><span class=\"pre\">INSTALLED_APPS</span></tt></a>.\r\nVytvo\u0159\u00ed tabulky, indexy a napln\u00ed je po\u010d\u00e1te\u010dn\u00edmi daty -- ale pouze pro\r\nty aplikace, kter\u00e9 jste do sv\u00e9ho projektu p\u0159idali od posledn\u00edho spu\u0161t\u011bn\u00ed\r\nsyncdb. <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/django-admin/#djadmin-syncdb\"><tt class=\"xref docutils literal\"><span class=\"pre\">syncdb</span></tt></a> m\u016f\u017eete volat jak \u010dasto chcete, a v\u017edy budou\r\nvytvo\u0159eny jen ty tabulky, kter\u00e9 v datab\u00e1zi je\u0161t\u011b neexistuj\u00ed.</p>\r\n<p>Dal\u0161\u00ed podrobnosti a p\u0159\u00edkazy utility <tt class=\"docutils literal\"><span class=\"pre\">manage.py</span></tt> na\u010dtete v\r\n<a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/django-admin/#ref-django-admin\"><em>dokumentaci pro django-admin.py</em></a>.</p>\r\n</div>\r\n<div class=\"section\" id=\"s-hrajeme-si-s-api\">\r\n<span id=\"hrajeme-si-s-api\"></span><h2>Hrajeme si s API<a class=\"headerlink\" href=\"#hrajeme-si-s-api\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Tak. Hupsn\u011bme pro zm\u011bnu do interaktivn\u00edho shellu Pythonu a pohrajme si s\r\nAPI, kter\u00e9 n\u00e1m Django automaticky vytvo\u0159ilo. Pro spu\u0161t\u011bn\u00ed interpreteru\r\npou\u017eijte n\u00e1sleduj\u00edc\u00ed p\u0159\u00edkaz:</p>\r\n<div class=\"highlight-bash\"><div class=\"highlight\"><pre>python manage.py shell\r\n</pre></div>\r\n</div>\r\n<p>M\u00edsto jednoduch\u00e9ho &quot;python&quot; pou\u017e\u00edv\u00e1me tento p\u0159\u00edkaz, proto\u017ee\r\n<tt class=\"docutils literal\"><span class=\"pre\">manage.py</span></tt> nastav\u00ed nezbytn\u00e9 prost\u0159ed\u00ed projektu. &quot;Nastavov\u00e1n\u00ed&quot;\r\nzahrnuje dv\u011b v\u011bci:</p>\r\n<ul>\r\n<li><p class=\"first\">Vlo\u017e\u00ed <tt class=\"docutils literal\"><span class=\"pre\">mysite</span></tt> do <tt class=\"docutils literal\"><span class=\"pre\">sys.path</span></tt>. D\u00edky tomu se Django m\u016f\u017ee\r\n&quot;dote\u010dkovat&quot; k na\u0161emu projektu (nap\u0159. <tt class=\"docutils literal\"><span class=\"pre\">'mysite.polls.models'</span></tt>).\r\nAby to fungovalo, bal\u00ed\u010dek <tt class=\"docutils literal\"><span class=\"pre\">mysite</span></tt> mus\u00ed le\u017eet na cest\u011b\r\n<tt class=\"docutils literal\"><span class=\"pre\">sys.path</span></tt>.</p>\r\n<p>Podobnou notaci jsme u\u017e vid\u011bli: nastaven\u00ed\r\n<a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-INSTALLED_APPS\"><tt class=\"xref docutils literal\"><span class=\"pre\">INSTALLED_APPS</span></tt></a> je vlastn\u011b seznam bal\u00ed\u010dk\u016f v te\u010dkovan\u00e9m\r\nz\u00e1pisu cest.</p>\r\n</li>\r\n<li><p class=\"first\">Nastaven\u00ed prom\u011bnn\u00e9 prost\u0159ed\u00ed <tt class=\"docutils literal\"><span class=\"pre\">DJANGO_SETTINGS_MODULE</span></tt>, kter\u00e9\r\nDjangu uk\u00e1\u017ee cestu k souboru <tt class=\"docutils literal\"><span class=\"pre\">settings.py</span></tt>.</p>\r\n</li>\r\n</ul>\r\n<div class=\"admonition-obch-zen-manage-py admonition \">\r\n<p class=\"first admonition-title\">Obch\u00e1zen\u00ed manage.py</p>\r\n<p>Pokud nechcete pou\u017e\u00edvat <tt class=\"docutils literal\"><span class=\"pre\">manage.py</span></tt>, nemus\u00edte. Ujist\u011bte se v\u0161ak,\r\n\u017ee <tt class=\"docutils literal\"><span class=\"pre\">mysite</span></tt> le\u017e\u00ed na PYTHONPATH (tj. p\u0159\u00edkaz <tt class=\"docutils literal\"><span class=\"pre\">import</span> <span class=\"pre\">mysite</span></tt> bude\r\nfungovat) a nastavte prom\u011bnnou prost\u0159ed\u00ed <tt class=\"docutils literal\"><span class=\"pre\">DJANGO_SETTINGS_MODULE</span></tt>\r\nna <tt class=\"docutils literal\"><span class=\"pre\">mysite.settings</span></tt>.</p>\r\n<p class=\"last\">Pro v\u00edce informac\u00ed nahl\u00e9dn\u011bte do dokumentace <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/django-admin/#ref-django-admin\"><em>django-admin.py</em></a>.</p>\r\n</div>\r\n<p>Jakmile budete v konzoli, vyzkou\u0161ejte si <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/db/queries/#topics-db-queries\"><em>datab\u00e1zov\u00e9 API</em></a>:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span> <span class=\"nn\">mysite.polls.models</span> <span class=\"kn\">import</span> <span class=\"n\">Poll</span><span class=\"p\">,</span> <span class=\"n\">Choice</span> <span class=\"c\"># Naimportuje modelove tridy, ktere jsme pred chvili napsali.</span>\r\n\r\n<span class=\"go\"># V systemu jeste nejsou zadne ankety.</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">Poll</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">()</span>\r\n<span class=\"go\">[]</span>\r\n\r\n<span class=\"go\"># Vytvorime novou anketu.</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">import</span> <span class=\"nn\">datetime</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">p</span> <span class=\"o\">=</span> <span class=\"n\">Poll</span><span class=\"p\">(</span><span class=\"n\">question</span><span class=\"o\">=</span><span class=\"s\">&quot;What&#39;s up?&quot;</span><span class=\"p\">,</span> <span class=\"n\">pub_date</span><span class=\"o\">=</span><span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">now</span><span class=\"p\">())</span>\r\n\r\n<span class=\"go\"># Ulozime objekt do databaze. Prikaz save() se musi volat explicitne.</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">()</span>\r\n\r\n<span class=\"go\"># Ted ma anketa ID. Python muze vratit &quot;1L&quot; misto &quot;1&quot; v zavislosti na</span>\r\n<span class=\"go\"># pouzite databazi.</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">id</span>\r\n<span class=\"go\">1</span>\r\n\r\n<span class=\"go\"># Hodnoty jednotlivych poli jsou zpristupneny pres atributy objektu.</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">question</span>\r\n<span class=\"go\">&quot;What&#39;s up?&quot;</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">pub_date</span>\r\n<span class=\"go\">datetime.datetime(2007, 7, 15, 12, 00, 53)</span>\r\n\r\n<span class=\"go\"># Upravte hodnoty zmenou atributu a potom zavolejte save().</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">pub_date</span> <span class=\"o\">=</span> <span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">datetime</span><span class=\"p\">(</span><span class=\"mf\">2007</span><span class=\"p\">,</span> <span class=\"mf\">4</span><span class=\"p\">,</span> <span class=\"mf\">1</span><span class=\"p\">,</span> <span class=\"mf\">0</span><span class=\"p\">,</span> <span class=\"mf\">0</span><span class=\"p\">)</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">()</span>\r\n\r\n<span class=\"go\"># objects.all() zobrazi vsechny ankety v databazi.</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">Poll</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">()</span>\r\n<span class=\"go\">[&lt;Poll: Poll object&gt;]</span>\r\n</pre></div>\r\n</div>\r\n<p>Po\u010dkat. Reprezentace objektu v\u00fdrazem <tt class=\"docutils literal\"><span class=\"pre\">&lt;Poll:</span> <span class=\"pre\">Poll</span> <span class=\"pre\">object&gt;</span></tt> je p\u0159inejmen\u0161\u00edm\r\nnicne\u0159\u00edkaj\u00edc\u00ed. Naprav\u00edme to \u00fapravou modelu anket (v souboru\r\n<tt class=\"docutils literal\"><span class=\"pre\">polls/models.py</span></tt>) p\u0159id\u00e1n\u00edm metody\r\n<a title=\"django.db.models.Model.__unicode__\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.__unicode__\"><tt class=\"xref docutils literal\"><span class=\"pre\">__unicode__()</span></tt></a> k <tt class=\"docutils literal\"><span class=\"pre\">Poll</span></tt> i <tt class=\"docutils literal\"><span class=\"pre\">Choice</span></tt>:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"k\">class</span> <span class=\"nc\">Poll</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\r\n    <span class=\"c\"># ...</span>\r\n    <span class=\"k\">def</span> <span class=\"nf\">__unicode__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\r\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">question</span>\r\n\r\n<span class=\"k\">class</span> <span class=\"nc\">Choice</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\r\n    <span class=\"c\"># ...</span>\r\n    <span class=\"k\">def</span> <span class=\"nf\">__unicode__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\r\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">choice</span>\r\n</pre></div>\r\n</div>\r\n<div class=\"admonition-kdy-meth-django-db-models-model-unicode-nefunguje admonition \">\r\n<p class=\"first admonition-title\">Kdy\u017e <a title=\"django.db.models.Model.__unicode__\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.__unicode__\"><tt class=\"xref docutils literal\"><span class=\"pre\">__unicode__()</span></tt></a> nefunguje</p>\r\n<p>Pokud jste k va\u0161im model\u016fm p\u0159idali metodu\r\n<a title=\"django.db.models.Model.__unicode__\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.__unicode__\"><tt class=\"xref docutils literal\"><span class=\"pre\">__unicode__()</span></tt></a> a nevid\u00edte \u017e\u00e1dnou zm\u011bnu ve\r\nzp\u016fsobu jejich reprezentace, nejsp\u00ed\u0161 pou\u017e\u00edv\u00e1te starou verzi Djanga. (Tato\r\nverze n\u00e1vodu je naps\u00e1na pro nejnov\u011bj\u0161\u00ed v\u00fdvojovou verzi Djanga.)</p>\r\n<p class=\"last\">Pokud chcete pracovat se star\u0161\u00ed verz\u00ed Djanga, m\u011bli by jste p\u0159ej\u00edt k\r\n<a class=\"reference external\" href=\"http://www.djangoproject.com/documentation/0.96/tutorial01/\">n\u00e1vodu pro Django 0.96</a>, proto\u017ee tento n\u00e1vod popisuje n\u011bkter\u00e9\r\nfunkce, kter\u00e9 jsou obsa\u017eeny pouze ve v\u00fdvojov\u00e9 verzi.</p>\r\n</div>\r\n<p>Metoda <a title=\"django.db.models.Model.__unicode__\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.__unicode__\"><tt class=\"xref docutils literal\"><span class=\"pre\">__unicode__()</span></tt></a> je d\u016fle\u017eit\u00e1 nejen kv\u016fli\r\np\u0159ehlednosti p\u0159i pr\u00e1ci v interaktivn\u00edm re\u017eimu, ale tak\u00e9 proto, \u017ee reprezentace\r\nobjekt\u016f jsou pou\u017eity v automaticky generovan\u00e9m administra\u010dn\u00edm rozhran\u00ed.</p>\r\n<div class=\"admonition-pro-meth-django-db-models-model-unicode-a-ne-meth-django-db-models-model-str admonition \">\r\n<p class=\"first admonition-title\">Pro\u010d <a title=\"django.db.models.Model.__unicode__\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.__unicode__\"><tt class=\"xref docutils literal\"><span class=\"pre\">__unicode__()</span></tt></a> a ne\r\n            <a title=\"django.db.models.Model.__str__\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.__str__\"><tt class=\"xref docutils literal\"><span class=\"pre\">__str__()</span></tt></a>?</p>\r\n<p>Pokud zn\u00e1te Python, asi jste si zvykli p\u0159id\u00e1vat k va\u0161\u00edm t\u0159\u00edd\u00e1m metody\r\n<a title=\"django.db.models.Model.__str__\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.__str__\"><tt class=\"xref docutils literal\"><span class=\"pre\">django.db.models.Model.__str__()</span></tt></a> a ne\r\n<a title=\"django.db.models.Model.__unicode__\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.__unicode__\"><tt class=\"xref docutils literal\"><span class=\"pre\">__unicode__()</span></tt></a>. Pou\u017e\u00edv\u00e1me\r\n<a title=\"django.db.models.Model.__unicode__\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.__unicode__\"><tt class=\"xref docutils literal\"><span class=\"pre\">__unicode__()</span></tt></a>, proto\u017ee Django modely\r\nstandartn\u011b pracuj\u00ed s Unicode. V\u0161echna data ve va\u0161\u00ed datab\u00e1zi jsou p\u0159i\r\n\u010dten\u00ed p\u0159ev\u00e1d\u011bna do Unicode.</p>\r\n<p>Django modely maj\u00ed p\u0159ednastavenou metodu\r\n<a title=\"django.db.models.Model.__str__\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.__str__\"><tt class=\"xref docutils literal\"><span class=\"pre\">__str__()</span></tt></a>, kter\u00e1 vol\u00e1\r\n<a title=\"django.db.models.Model.__unicode__\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.__unicode__\"><tt class=\"xref docutils literal\"><span class=\"pre\">__unicode__()</span></tt></a> a ta p\u0159ev\u00e1d\u00ed v\u00fdsledky do UTF-8\r\nbytestringu.  Jin\u00fdmi slovy, vol\u00e1n\u00ed <tt class=\"docutils literal\"><span class=\"pre\">unicode(p)</span></tt> vr\u00e1t\u00ed Unicode \u0159et\u011bzec, a\r\n<tt class=\"docutils literal\"><span class=\"pre\">str(p)</span></tt> vr\u00e1t\u00ed norm\u00e1ln\u00ed \u0159et\u011bzec se znaky k\u00f3dovan\u00fdmi jako UTF-8.</p>\r\n<p class=\"last\">Pokud je pro v\u00e1s v\u00fd\u0161e uveden\u00e9 \u0161pan\u011blskou vesnic\u00ed, zapamatujte si\r\njedin\u00e9 -- ke ka\u017ed\u00e9mu modelu p\u0159id\u00e1vejte  metodu\r\n<a title=\"django.db.models.Model.__unicode__\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.__unicode__\"><tt class=\"xref docutils literal\"><span class=\"pre\">__unicode__()</span></tt></a>.</p>\r\n</div>\r\n<p>Je t\u0159eba zd\u016fraznit, \u017ee se celou dobu bav\u00edme o norm\u00e1ln\u00edch metod\u00e1ch\r\nPythonu. Pro uk\u00e1zku si p\u0159id\u00e1me je\u0161t\u011b jednu vlastn\u00ed metodu:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"kn\">import</span> <span class=\"nn\">datetime</span>\r\n<span class=\"c\"># ...</span>\r\n<span class=\"k\">class</span> <span class=\"nc\">Poll</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\r\n    <span class=\"c\"># ...</span>\r\n    <span class=\"k\">def</span> <span class=\"nf\">was_published_today</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\r\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">pub_date</span><span class=\"o\">.</span><span class=\"n\">date</span><span class=\"p\">()</span> <span class=\"o\">==</span> <span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">date</span><span class=\"o\">.</span><span class=\"n\">today</span><span class=\"p\">()</span>\r\n</pre></div>\r\n</div>\r\n<p>Pozn\u00e1mka: <tt class=\"docutils literal\"><span class=\"pre\">import</span> <span class=\"pre\">datetime</span></tt> nat\u00e1hne standardn\u00ed Python\u00ed modul <tt class=\"docutils literal\"><span class=\"pre\">datetime</span></tt>.</p>\r\n<p>Ulo\u017ete tyto zm\u011bny a nastartujte nov\u00fd interaktivn\u00ed shell Pythonu spu\u0161t\u011bn\u00edm <tt class=\"docutils literal\"><span class=\"pre\">python</span> <span class=\"pre\">manage.py</span>\r\n<span class=\"pre\">shell</span></tt>:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span> <span class=\"nn\">mysite.polls.models</span> <span class=\"kn\">import</span> <span class=\"n\">Poll</span><span class=\"p\">,</span> <span class=\"n\">Choice</span>\r\n\r\n<span class=\"go\"># Ujisteme se, ze pridani __unicode__() funguje</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">Poll</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">()</span>\r\n<span class=\"go\">[&lt;Poll: What&#39;s up?&gt;]</span>\r\n\r\n<span class=\"go\"># Django nabizi rozsahle API pro vyhledavani v databazich</span>\r\n<span class=\"go\"># prostrednictvim keyword argumentu</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">Poll</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">filter</span><span class=\"p\">(</span><span class=\"nb\">id</span><span class=\"o\">=</span><span class=\"mf\">1</span><span class=\"p\">)</span>\r\n<span class=\"go\">[&lt;Poll: What&#39;s up?&gt;]</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">Poll</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">filter</span><span class=\"p\">(</span><span class=\"n\">question__startswith</span><span class=\"o\">=</span><span class=\"s\">&#39;What&#39;</span><span class=\"p\">)</span>\r\n<span class=\"go\">[&lt;Poll: What&#39;s up?&gt;]</span>\r\n\r\n<span class=\"go\"># Najdi anketu publikovanou v roce 2007.</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">Poll</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">pub_date__year</span><span class=\"o\">=</span><span class=\"mf\">2007</span><span class=\"p\">)</span>\r\n<span class=\"go\">&lt;Poll: What&#39;s up?&gt;</span>\r\n\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">Poll</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"nb\">id</span><span class=\"o\">=</span><span class=\"mf\">2</span><span class=\"p\">)</span>\r\n<span class=\"gt\">Traceback (most recent call last):</span>\r\n    <span class=\"o\">...</span>\r\n<span class=\"nc\">DoesNotExist</span>: <span class=\"n-Identifier\">Poll matching query does not exist.</span>\r\n\r\n<span class=\"go\"># Vyhledavani podle primarniho klice se pouziva pomerne casto,</span>\r\n<span class=\"go\"># proto Django nabizi zkratku.</span>\r\n<span class=\"go\"># Nasledujici prikaz je stejny jako Poll.objects.get(id=1).</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">Poll</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">pk</span><span class=\"o\">=</span><span class=\"mf\">1</span><span class=\"p\">)</span>\r\n<span class=\"go\">&lt;Poll: What&#39;s up?&gt;</span>\r\n\r\n<span class=\"go\"># Ujisteme se, ze nami definovana metoda funguje.</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">p</span> <span class=\"o\">=</span> <span class=\"n\">Poll</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">pk</span><span class=\"o\">=</span><span class=\"mf\">1</span><span class=\"p\">)</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">was_published_today</span><span class=\"p\">()</span>\r\n<span class=\"go\">False</span>\r\n\r\n<span class=\"go\"># Definujme ankete nekolik voleb. Volani create vytvori novy objekt choice,</span>\r\n<span class=\"go\"># provede SQL prikaz INSERT, prida volbu do sady voleb a vrati vysledny</span>\r\n<span class=\"go\"># objekt Choice (volba). Django automaticky vytvori sadu objektu a API</span>\r\n<span class=\"go\"># rozhrani pro pristup k objektum z opacne strany vazby FK (v tomto</span>\r\n<span class=\"go\"># pripade volby ankety).</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">p</span> <span class=\"o\">=</span> <span class=\"n\">Poll</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">pk</span><span class=\"o\">=</span><span class=\"mf\">1</span><span class=\"p\">)</span>\r\n\r\n<span class=\"go\"># Zobrazme si volby, ktere jsou propojeny s anketou -- zatim nic.</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">choice_set</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">()</span>\r\n<span class=\"go\">[]</span>\r\n\r\n<span class=\"go\"># Nyni vytvorme 3 volby.</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">choice_set</span><span class=\"o\">.</span><span class=\"n\">create</span><span class=\"p\">(</span><span class=\"n\">choice</span><span class=\"o\">=</span><span class=\"s\">&#39;Not much&#39;</span><span class=\"p\">,</span> <span class=\"n\">votes</span><span class=\"o\">=</span><span class=\"mf\">0</span><span class=\"p\">)</span>\r\n<span class=\"go\">&lt;Choice: Not much&gt;</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">choice_set</span><span class=\"o\">.</span><span class=\"n\">create</span><span class=\"p\">(</span><span class=\"n\">choice</span><span class=\"o\">=</span><span class=\"s\">&#39;The sky&#39;</span><span class=\"p\">,</span> <span class=\"n\">votes</span><span class=\"o\">=</span><span class=\"mf\">0</span><span class=\"p\">)</span>\r\n<span class=\"go\">&lt;Choice: The sky&gt;</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">c</span> <span class=\"o\">=</span> <span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">choice_set</span><span class=\"o\">.</span><span class=\"n\">create</span><span class=\"p\">(</span><span class=\"n\">choice</span><span class=\"o\">=</span><span class=\"s\">&#39;Just hacking again&#39;</span><span class=\"p\">,</span> <span class=\"n\">votes</span><span class=\"o\">=</span><span class=\"mf\">0</span><span class=\"p\">)</span>\r\n\r\n<span class=\"go\"># Objekty voleb maji pres API pristup k souvisejicim objektum anket.</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">c</span><span class=\"o\">.</span><span class=\"n\">poll</span>\r\n<span class=\"go\">&lt;Poll: What&#39;s up?&gt;</span>\r\n\r\n<span class=\"go\"># A naopak: objekty anket maji pristup ke svym volbam.</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">choice_set</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">()</span>\r\n<span class=\"go\">[&lt;Choice: Not much&gt;, &lt;Choice: The sky&gt;, &lt;Choice: Just hacking again&gt;]</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">choice_set</span><span class=\"o\">.</span><span class=\"n\">count</span><span class=\"p\">()</span>\r\n<span class=\"go\">3</span>\r\n\r\n<span class=\"go\"># API automaticky sleduje relace tak, jak potrebujete.</span>\r\n<span class=\"go\"># Pouzijte dvojite podtrzitka pro oddeleni jednotlivych vztahu.</span>\r\n<span class=\"go\"># Toto funguje tolik urovni do hloubky, kolik chcete; bez omezeni.</span>\r\n<span class=\"go\"># Najdi vsechny volby pro jakoukoli anketu, ktera byla publikovana</span>\r\n<span class=\"go\"># v roce 2007.</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">Choice</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">filter</span><span class=\"p\">(</span><span class=\"n\">poll__pub_date__year</span><span class=\"o\">=</span><span class=\"mf\">2007</span><span class=\"p\">)</span>\r\n<span class=\"go\">[&lt;Choice: Not much&gt;, &lt;Choice: The sky&gt;, &lt;Choice: Just hacking again&gt;]</span>\r\n\r\n<span class=\"go\"># Smazme jednu z voleb s pouzitim delete().</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">c</span> <span class=\"o\">=</span> <span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">choice_set</span><span class=\"o\">.</span><span class=\"n\">filter</span><span class=\"p\">(</span><span class=\"n\">choice__startswith</span><span class=\"o\">=</span><span class=\"s\">&#39;Just hacking&#39;</span><span class=\"p\">)</span>\r\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">c</span><span class=\"o\">.</span><span class=\"n\">delete</span><span class=\"p\">()</span>\r\n</pre></div>\r\n</div>\r\n<p>Ve\u0161ker\u00e9 podrobnosti o <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/relations/#ref-models-relations\"><em>vazb\u00e1ch mezi modely</em></a> a\r\n<a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/db/queries/#topics-db-queries\"><em>datab\u00e1zov\u00e9m API</em></a> naleznete na samostatn\u00fdch str\u00e1nk\u00e1ch.</p>\r\n<p>A\u017e si zvyknete na API, p\u0159ejd\u011bte k <a class=\"reference external\" href=\"/dokumentace/intro/tutorial02/#intro-tutorial02\"><em>druh\u00e9 \u010d\u00e1sti tohoto n\u00e1vodu</em></a>, kde zprovozn\u00edme automatick\u00e9 administra\u010dn\u00ed rozhran\u00ed\r\nDjanga.</p>\r\n</div>\r\n</div>\r\n    </div>\r\n    <div id=\"rightSideBar\" class=\"span-7 last\">\r\n        <h3><a href=\"http://docs.djangoproject.com/en/dev/contents/\">Obsah</a></h3><ul>\r\n<li><a class=\"reference external\" href=\"#\">Prvn\u00ed aplikace v Djangu, \u010d\u00e1st 1</a><ul>\r\n<li><a class=\"reference external\" href=\"#vytv-en-projektu\">Vytv\u00e1\u0159en\u00ed projektu</a><ul>\r\n<li><a class=\"reference external\" href=\"#v-vojov-server\">V\u00fdvojov\u00fd server</a></li>\r\n<li><a class=\"reference external\" href=\"#nastaven-datab-ze\">Nastaven\u00ed datab\u00e1ze</a></li>\r\n</ul>\r\n</li>\r\n<li><a class=\"reference external\" href=\"#vytv-en-model\">Vytv\u00e1\u0159en\u00ed model\u016f</a></li>\r\n<li><a class=\"reference external\" href=\"#aktivace-model\">Aktivace model\u016f</a></li>\r\n<li><a class=\"reference external\" href=\"#hrajeme-si-s-api\">Hrajeme si s API</a></li>\r\n</ul>\r\n</li>\r\n</ul><h3>Listov\u00e1n\u00ed</h3><ul>\r\n<li>P\u0159edchoz\u00ed: <a href=\"/dokumentace/intro/install/\">Rychl\u00fd instala\u010dn\u00ed pr\u016fvodce</a></li>\r\n<li>Dal\u0161\u00ed: <a href=\"/dokumentace/intro/tutorial02/\">Prvn\u00ed aplikace v Djangu, \u010d\u00e1st 2</a></li>\r\n</ul>\r\n        \r\n        \r\n<table class=\"revision\">\r\n    \r\n    \r\n    <tr>\r\n        <th>P\u0159eklad</th>\r\n        <td>Vojta Pol\u00e1\u0161ek</td>\r\n    </tr>\r\n    \r\n    \r\n    <tr>\r\n        <th>Korekce</th>\r\n        <td>Michal Valou\u0161ek<br />smoke</td>\r\n    </tr>\r\n    \r\n</table>\r\n\r\n\r\n    </div>\r\n    <br class=\"clear\" />\r\n</div>\r\n\r\n", 
            "enable_comments": true
        }
    }, 
    {
        "pk": 10, 
        "model": "flatpages.flatpage", 
        "fields": {
            "registration_required": false, 
            "title": "Prvn\u00ed aplikace v Djangu, \u010d\u00e1st 2", 
            "url": "/dokumentace/intro/tutorial02/", 
            "template_name": "flatpages/doc.html", 
            "sites": [
                1
            ], 
            "content": "<div id=\"wrapcontent\" class=\"span-22 last prefix-1 suffix-1\">\r\n    <div id=\"content\" class=\"span-14 suffix-1\">\r\n        \r\n        \r\n\r\n\r\n\r\n        <div class=\"section\" id=\"s-prvn-aplikace-v-djangu-st-2\">\r\n<span id=\"s-intro-tutorial02\"></span><span id=\"prvn-aplikace-v-djangu-st-2\"></span><span id=\"intro-tutorial02\"></span><h1>Prvn\u00ed aplikace v Djangu, \u010d\u00e1st 2<a class=\"headerlink\" href=\"#prvn-aplikace-v-djangu-st-2\" title=\"Permalink na tento nadpis\">\u00b6</a></h1>\r\n<p>Tento n\u00e1vod za\u010d\u00edn\u00e1 tam, kde skon\u010dila <a class=\"reference external\" href=\"/dokumentace/intro/tutorial01/#intro-tutorial01\"><em>prvn\u00ed \u010d\u00e1st uk\u00e1zkov\u00e9 aplikace</em></a>. Budeme pokra\u010dovat v na\u0161\u00ed webov\u00e9 anketn\u00ed aplikaci a\r\nzam\u011b\u0159\u00edme se na automaticky generovan\u00e9 administrativn\u00ed rozhran\u00ed Djanga.</p>\r\n<div class=\"admonition-filozofie admonition \">\r\n<p class=\"first admonition-title\">Filozofie</p>\r\n<p>Vytv\u00e1\u0159en\u00ed administra\u010dn\u00edch str\u00e1nek pro b\u011b\u017enou spr\u00e1vu obsahu je \u00fanavn\u00e1\r\na nudn\u00e1 pr\u00e1ce, kter\u00e1 nevy\u017eaduje p\u0159\u00edli\u0161 mnoho kreativity. Django\r\np\u0159ich\u00e1z\u00ed s mo\u017enost\u00ed automatick\u00e9ho vytvo\u0159en\u00ed administra\u010dn\u00edho rozhran\u00ed\r\npro definovan\u00e9 modely.</p>\r\n<p>Django bylo naps\u00e1no v novin\u00e1\u0159sk\u00e9m prost\u0159ed\u00ed, kde byl jasn\u011b vymezen\r\nrozd\u00edl mezi t\u011bmi kdo tvo\u0159\u00ed obsah, a t\u011bmi kdo jej konzumuj\u00ed.\r\nSpr\u00e1vci str\u00e1nek pou\u017e\u00edvaj\u00ed administra\u010dn\u00ed syst\u00e9m pro p\u0159id\u00e1v\u00e1n\u00ed zpr\u00e1v,\r\nud\u00e1lost\u00ed, sportovn\u00edch v\u00fdsledk\u016f atd., a tento obsah je zve\u0159ej\u0148ov\u00e1n.\r\nDjango \u0159e\u0161\u00ed probl\u00e9m vytv\u00e1\u0159en\u00ed jednotn\u00e9ho rozhran\u00ed pro v\u0161echny\r\ntv\u016frce obsahu.</p>\r\n<p class=\"last\">S administra\u010dn\u00edm rozhran\u00edm se b\u011b\u017en\u00fd n\u00e1v\u0161t\u011bvn\u00edk str\u00e1nek nemus\u00ed v\u016fbec\r\npotkat &#8211; je pouze pro ty, kte\u0159\u00ed web spravuj\u00ed.</p>\r\n</div>\r\n<div class=\"section\" id=\"s-aktivace-administra-n-ho-rozhran\">\r\n<span id=\"aktivace-administra-n-ho-rozhran\"></span><h2>Aktivace administra\u010dn\u00edho rozhran\u00ed<a class=\"headerlink\" href=\"#aktivace-administra-n-ho-rozhran\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Administra\u010dn\u00ed rozhran\u00ed Djanga nen\u00ed ve v\u00fdchoz\u00ed konfiguraci zapnuto &#8211;\r\nmus\u00edte je sami aktivovat. Sta\u010d\u00ed prov\u00e9st tyto t\u0159i \u00fakony:</p>\r\n<ul>\r\n<li><p class=\"first\">P\u0159idejte <tt class=\"docutils literal\"><span class=\"pre\">&quot;django.contrib.admin&quot;</span></tt> do seznamu v\r\n<a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-INSTALLED_APPS\"><tt class=\"xref docutils literal\"><span class=\"pre\">INSTALLED_APPS</span></tt></a>.</p>\r\n</li>\r\n<li><p class=\"first\">Spus\u0165te <tt class=\"docutils literal\"><span class=\"pre\">python</span> <span class=\"pre\">manage.py</span> <span class=\"pre\">syncdb</span></tt>. Proto\u017ee jste p\u0159idali do\r\n<a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-INSTALLED_APPS\"><tt class=\"xref docutils literal\"><span class=\"pre\">INSTALLED_APPS</span></tt></a> novou aplikaci, je t\u0159eba vytvo\u0159it\r\nv\u0161echny nov\u00e9 datab\u00e1zov\u00e9 tabulky.</p>\r\n</li>\r\n<li><p class=\"first\">Upravte soubor <tt class=\"docutils literal\"><span class=\"pre\">mysite/urls.py</span></tt> a odkomentujte t\u0159i \u0159\u00e1dky, kter\u00e9\r\nse odkazuj\u00ed na administraci (admin). Soubor urls.py obsahuje\r\nv\u00fdrazy, kter\u00e9 mapuj\u00ed URL adresy na konkr\u00e9tn\u00ed aplikace. V dal\u0161\u00ed\r\n\u010d\u00e1sti n\u00e1vodu se na URLconf pod\u00edvame podrobn\u011bji, pro tentokr\u00e1t v\u00edce\r\nv\u011bd\u011bt nepot\u0159ebujete. V\u00fdsledek va\u0161ich \u00faprav by m\u011bl vypadat asi\r\ntakto:</p>\r\n<p><strong>Zm\u011bna ve v\u00fdvojov\u00e9 verzi:</strong> Metoda kter\u00e1 do pravidel p\u0159id\u00e1v\u00e1 administr\u00e1torsk\u00e9 URL adresy se v Djangu od verze 1.1 zm\u011bn\u00ed.</p>\r\n<pre class=\"literal-block\">\r\nfrom django.conf.urls.defaults import *\r\n\r\n# Uncomment the next two lines to enable the admin:\r\n<strong>from django.contrib import admin</strong>\r\n<strong>admin.autodiscover()</strong>\r\n\r\nurlpatterns = patterns('',\r\n    # Example:\r\n    # (r'^mysite/', include('mysite.foo.urls')),\r\n\r\n    # Uncomment the admin/doc line below and add 'django.contrib.admindocs'\r\n    # to INSTALLED_APPS to enable admin documentation:\r\n    # (r'^admin/doc/', include('django.contrib.admindocs.urls')),\r\n\r\n    # Uncomment the next line to enable the admin:\r\n    <strong>(r'^admin/', include(admin.site.urls)),</strong>\r\n)\r\n</pre>\r\n<p>(Tu\u010dn\u011b zv\u00fdrazn\u011bn\u00e9 \u0159\u00e1dky nesm\u00ed b\u00fdt zakomentov\u00e1ny.)</p>\r\n</li>\r\n</ul>\r\n</div>\r\n<div class=\"section\" id=\"s-spou-t-me-v-vojov-server\">\r\n<span id=\"spou-t-me-v-vojov-server\"></span><h2>Spou\u0161t\u00edme v\u00fdvojov\u00fd server<a class=\"headerlink\" href=\"#spou-t-me-v-vojov-server\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Spus\u0165te v\u00fdvojov\u00fd server a poj\u010fme se pod\u00edvat, jak admnistra\u010dn\u00ed rozhran\u00ed\r\nvypad\u00e1.</p>\r\n<p>Vzpome\u0148te si na prvn\u00ed d\u00edl tohoto pr\u016fvodce. V\u00fdvojov\u00fd server se spou\u0161t\u00ed\r\np\u0159\u00edkazem:</p>\r\n<div class=\"highlight-bash\"><div class=\"highlight\"><pre>python manage.py runserver\r\n</pre></div>\r\n</div>\r\n<p>Nastartujte prohl\u00ed\u017ee\u010d a p\u0159ejd\u011bte na &quot;/admin/&quot; na va\u0161em localhostu -- nap\u0159.,\r\n<a class=\"reference external\" href=\"http://127.0.0.1:8000/admin/\">http://127.0.0.1:8000/admin/</a>. M\u011bli by jste vid\u011bt p\u0159ihla\u0161ovac\u00ed str\u00e1nku:</p>\r\n<img alt=\"P\u0159ihla\u0161ovac\u00ed obrazovka administra\u010dn\u00edho rozhran\u00ed\" src=\"/media/images/admin01.png\" />\r\n</div>\r\n<div class=\"section\" id=\"s-uvnit-administrace\">\r\n<span id=\"uvnit-administrace\"></span><h2>Uvnit\u0159 administrace<a class=\"headerlink\" href=\"#uvnit-administrace\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Te\u010f se zkuste p\u0159ihl\u00e1sit. (V prvn\u00ed \u010d\u00e1sti na\u0161eho n\u00e1vodu jsme vytv\u00e1\u0159eli\r\n\u00fa\u010det pro superu\u017eivatele, vzpom\u00edn\u00e1te si? Pokud jste si jej nevytvo\u0159ili,\r\nnebo jste zapomn\u011bli heslo, m\u016f\u017eete si\r\n<a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/auth/#topics-auth-creating-superusers\"><em>vytvo\u0159it nov\u00fd</em></a>.) M\u011bli by jste\r\nvid\u011bt hlavn\u00ed str\u00e1nku administrace:</p>\r\n<img alt=\"Hlavn\u00ed str\u00e1nka administra\u010dn\u00edho rozhran\u00ed\" src=\"/media/images/admin02t.png\" />\r\n<p>Uvid\u00edte \u0159\u00e1dky se skupinami, u\u017eivateli a weby, tj. z\u00e1kladn\u00edmi aplikacemi,\r\nkter\u00e9 p\u0159ich\u00e1z\u00ed spole\u010dn\u011b s Djangem.</p>\r\n</div>\r\n<div class=\"section\" id=\"s-administrace-anketn-aplikace\">\r\n<span id=\"administrace-anketn-aplikace\"></span><h2>Administrace anketn\u00ed aplikace<a class=\"headerlink\" href=\"#administrace-anketn-aplikace\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Ale kdepak je na\u0161e anketn\u00ed aplikace? Na hlavn\u00ed str\u00e1nce nen\u00ed zobrazena...</p>\r\n<p>Sta\u010d\u00ed ud\u011blat jedin\u00e9: \u0159\u00edct Django administraci, \u017ee m\u00e1 spravovat i objekty\r\n<tt class=\"docutils literal\"><span class=\"pre\">Poll</span></tt>. Vytvo\u0159te soubor s n\u00e1zvem <tt class=\"docutils literal\"><span class=\"pre\">admin.py</span></tt> ve va\u0161em adres\u00e1\u0159i\r\n<tt class=\"docutils literal\"><span class=\"pre\">polls</span></tt> a upravte ho, aby vypadal asi takhle:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"kn\">from</span> <span class=\"nn\">mysite.polls.models</span> <span class=\"kn\">import</span> <span class=\"n\">Poll</span>\r\n<span class=\"kn\">from</span> <span class=\"nn\">django.contrib</span> <span class=\"kn\">import</span> <span class=\"n\">admin</span>\r\n\r\n<span class=\"n\">admin</span><span class=\"o\">.</span><span class=\"n\">site</span><span class=\"o\">.</span><span class=\"n\">register</span><span class=\"p\">(</span><span class=\"n\">Poll</span><span class=\"p\">)</span>\r\n</pre></div>\r\n</div>\r\n<p>Restartujte v\u00fdvojov\u00fd server, aby se zm\u011bny projevily. Oby\u010dejn\u011b server\r\nzm\u011bn\u011bn\u00fd k\u00f3d na\u010dte automaticky, ale vytvo\u0159en\u00ed nov\u00e9ho souboru tuto akci\r\nnevyvol\u00e1.</p>\r\n</div>\r\n<div class=\"section\" id=\"s-prohl-dka-administrace\">\r\n<span id=\"prohl-dka-administrace\"></span><h2>Prohl\u00eddka administrace<a class=\"headerlink\" href=\"#prohl-dka-administrace\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Te\u010f, kdy\u017e jsme <tt class=\"docutils literal\"><span class=\"pre\">Poll</span></tt> zaregistrovali, Django aplikaci zobraz\u00ed na\r\nhlavn\u00ed str\u00e1nce administrace:</p>\r\n<img alt=\"Hlavn\u00ed admin str\u00e1nka u\u017e zobrazuje i na\u0161i anketu\" src=\"/media/images/admin03t.png\" />\r\n<p>Klikn\u011bte na &quot;Polls.&quot; Zobraz\u00ed se v\u00e1m seznam anket z datab\u00e1ze. Moment\u00e1ln\u011b\r\nm\u00e1me v datab\u00e1zi pouze anketu &quot;What's up?&quot;, kterou jsme vytvo\u0159ili b\u011bhem\r\nprvn\u00ed \u010d\u00e1sti pr\u016fvodce:</p>\r\n<img alt=\"Seznam anket, moment\u00e1ln\u011b s jedinou polo\u017ekou\" src=\"/media/images/admin04t.png\" />\r\n<p>Pokus\u00edme se anketu zm\u011bnit. Klikn\u011bte na \u0159\u00e1dek &quot;What's up?&quot;:</p>\r\n<img alt=\"Zm\u011bnov\u00fd formul\u00e1\u0159 pro objekt ankety\" src=\"/media/images/admin05t.png\" />\r\n<p>Zde si v\u0161imn\u011bte:</p>\r\n<ul class=\"simple\">\r\n<li>Formul\u00e1\u0159 je automaticky vygenerov\u00e1n podle modelu.</li>\r\n<li>Jednotliv\u00e9 typy modelov\u00fdch pol\u00ed\r\n(<a title=\"django.db.models.DateTimeField\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.DateTimeField\"><tt class=\"xref docutils literal\"><span class=\"pre\">DateTimeField</span></tt></a>,\r\n<a title=\"django.db.models.CharField\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.CharField\"><tt class=\"xref docutils literal\"><span class=\"pre\">CharField</span></tt></a>) jsou p\u0159i\u0159azeny ke spr\u00e1vn\u00e9mu\r\nHTML widgetu. Ka\u017ed\u00e9 pole v\u00ed, jak se m\u00e1 v administraci zobrazit.</li>\r\n<li>U ka\u017ed\u00e9ho pole typu <a title=\"django.db.models.DateTimeField\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.DateTimeField\"><tt class=\"xref docutils literal\"><span class=\"pre\">DateTimeField</span></tt></a> se\r\nzobraz\u00ed JavaScriptov\u00ed pomocn\u00edci: vedle pol\u00ed\u010dka s datumem se objev\u00ed\r\nodkaz &quot;Today&quot; a kalend\u00e1\u0159, vedle \u010dasu odkaz &quot;Now&quot; se seznamem\r\nnej\u010dast\u011bji zad\u00e1van\u00fdch \u010das\u016f.</li>\r\n</ul>\r\n<p>Ve spodn\u00ed \u010d\u00e1sti str\u00e1nky je zobrazeno n\u011bkolik tla\u010d\u00edtek:</p>\r\n<ul class=\"simple\">\r\n<li>Save (Ulo\u017eit) -- Ulo\u017e\u00ed zm\u011bny a vr\u00e1t\u00ed se na str\u00e1nku s p\u0159ehledem pro\r\ntento typ objektu.</li>\r\n<li>Save and continue editing (Ulo\u017eit a pokra\u010dovat v \u00faprav\u00e1ch) --\r\nUlo\u017e\u00ed zm\u011bny a znovu na\u010dte administra\u010dn\u00ed str\u00e1nku pro \u00fapravy tohoto\r\nobjektu.</li>\r\n<li>Save and add another (Ulo\u017eit a p\u0159idat dal\u0161\u00ed) -- Ulo\u017e\u00ed zm\u011bny a\r\nna\u010dte nov\u00fd, pr\u00e1zdn\u00fd formul\u00e1\u0159 pro tento typ objektu.</li>\r\n<li>Delete (Smazat) -- Zobraz\u00ed potvrzovac\u00ed str\u00e1nku pro smaz\u00e1n\u00ed.</li>\r\n</ul>\r\n<p>Zm\u011b\u0148te hodnotu pole &quot;Date published&quot; kliknut\u00edm na odkazy &quot;Today&quot; a\r\n&quot;Now&quot;. Pak objekt s pomoc\u00ed &quot;Save and continue editing&quot; ulo\u017ete. Klikn\u011bte\r\nna &quot;History&quot; vpravo naho\u0159e. Uvid\u00edte str\u00e1nku se seznamem v\u0161ech zm\u011bn\r\nproveden\u00fdch na tomto objektu prost\u0159ednictv\u00edm administra\u010dn\u00edho rozhran\u00ed,\r\nv\u010detn\u011b informace o \u010dase a u\u017eivateli:</p>\r\n<img alt=\"Str\u00e1nka historie pro objekt ankety\" src=\"/media/images/admin06t.png\" />\r\n</div>\r\n<div class=\"section\" id=\"s-prava-vzhledu-administra-n-ch-formul\">\r\n<span id=\"prava-vzhledu-administra-n-ch-formul\"></span><h2>\u00daprava vzhledu administra\u010dn\u00edch formul\u00e1\u0159\u016f<a class=\"headerlink\" href=\"#prava-vzhledu-administra-n-ch-formul\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Nen\u00ed to b\u00e1je\u010dn\u00e9? Prost\u00fdm zavol\u00e1n\u00edm <tt class=\"docutils literal\"><span class=\"pre\">admin.site.register(Poll)</span></tt> Django\r\ndok\u00e1zalo zprovoznit zm\u011bnov\u00fd formul\u00e1\u0159 pro editaci objektu. Dok\u00e1\u017eete si\r\np\u0159edstavit tu hromadu k\u00f3du, kterou jste nemuseli ps\u00e1t? Vzhled\r\nformul\u00e1\u0159e Django odvodilo z definice modelu. Je ale docela mo\u017en\u00e9, \u017ee v\u00e1m\r\njeho podoba nevyhovuje. Na\u0161t\u011bst\u00ed m\u00e1me po ruce mechanismy, kter\u00fdmi m\u016f\u017eeme\r\nzobrazen\u00ed administra\u010dn\u00edch formul\u00e1\u0159u ovliv\u0148ovat.</p>\r\n<p>Uka\u017eme si to na konkr\u00e9tn\u00edm p\u0159\u00edpad\u011b -- v edita\u010dn\u00edm formul\u00e1\u0159i prohod\u00edme\r\npo\u0159ad\u00ed pol\u00ed\u010dek. B\u011bhem registrace objektu nahrad\u00edme vol\u00e1n\u00ed\r\n<tt class=\"docutils literal\"><span class=\"pre\">admin.site.register(Poll)</span></tt> za tyto \u0159\u00e1dky:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"k\">class</span> <span class=\"nc\">PollAdmin</span><span class=\"p\">(</span><span class=\"n\">admin</span><span class=\"o\">.</span><span class=\"n\">ModelAdmin</span><span class=\"p\">):</span>\r\n    <span class=\"n\">fields</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s\">&#39;pub_date&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;question&#39;</span><span class=\"p\">]</span>\r\n\r\n<span class=\"n\">admin</span><span class=\"o\">.</span><span class=\"n\">site</span><span class=\"o\">.</span><span class=\"n\">register</span><span class=\"p\">(</span><span class=\"n\">Poll</span><span class=\"p\">,</span> <span class=\"n\">PollAdmin</span><span class=\"p\">)</span>\r\n</pre></div>\r\n</div>\r\n<p>Postup je jednoduch\u00fd -- vytvo\u0159\u00edme administr\u00e1torsk\u00fd objekt a p\u0159ed\u00e1me jej\r\njako druh\u00fd parametr p\u0159i vol\u00e1n\u00ed <tt class=\"docutils literal\"><span class=\"pre\">admin.site.register()</span></tt>.</p>\r\n<p>Uveden\u00e1 zm\u011bna se projev\u00ed prohozen\u00edm po\u0159ad\u00ed pol\u00ed &quot;Date published&quot; a\r\n&quot;Question&quot;:</p>\r\n<img alt=\"Pole byla p\u0159ehozena\" src=\"/media/images/admin07.png\" />\r\n<p>Te\u010f to mo\u017en\u00e1 p\u016fsob\u00ed sm\u011b\u0161n\u011b (prohazovat dv\u011b pol\u00ed\u010dka), ale u model\u016f s\r\ndes\u00edtkami polo\u017eek je zm\u011bna po\u0159ad\u00ed d\u016fle\u017eit\u00fdm detailem z hlediska\r\npou\u017eitelnosti va\u0161\u00ed aplikace.</p>\r\n<p>A kdy\u017e u\u017e mluv\u00edme o formul\u00e1\u0159\u00edch s tucty pol\u00ed, mo\u017en\u00e1 budete cht\u00edt\r\nrozd\u011blit formul\u00e1\u0159 na n\u011bkolik skupin:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"k\">class</span> <span class=\"nc\">PollAdmin</span><span class=\"p\">(</span><span class=\"n\">admin</span><span class=\"o\">.</span><span class=\"n\">ModelAdmin</span><span class=\"p\">):</span>\r\n    <span class=\"n\">fieldsets</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\r\n        <span class=\"p\">(</span><span class=\"bp\">None</span><span class=\"p\">,</span>               <span class=\"p\">{</span><span class=\"s\">&#39;fields&#39;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s\">&#39;question&#39;</span><span class=\"p\">]}),</span>\r\n        <span class=\"p\">(</span><span class=\"s\">&#39;Date information&#39;</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s\">&#39;fields&#39;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s\">&#39;pub_date&#39;</span><span class=\"p\">]}),</span>\r\n    <span class=\"p\">]</span>\r\n\r\n<span class=\"n\">admin</span><span class=\"o\">.</span><span class=\"n\">site</span><span class=\"o\">.</span><span class=\"n\">register</span><span class=\"p\">(</span><span class=\"n\">Poll</span><span class=\"p\">,</span> <span class=\"n\">PollAdmin</span><span class=\"p\">)</span>\r\n</pre></div>\r\n</div>\r\n<p>Prvn\u00ed prvek ka\u017ed\u00e9 n-tice ve <tt class=\"docutils literal\"><span class=\"pre\">fieldsets</span></tt> je titulek skupiny. Takhle\r\nbude v\u00e1\u0161 formul\u00e1\u0159 po zm\u011bn\u011b vypadat:</p>\r\n<img alt=\"Formul\u00e1\u0159 m\u00e1 nyn\u00ed skupiny pol\u00ed\" src=\"/media/images/admin08t.png\" />\r\n<p>Ke ka\u017ed\u00e9mu poli m\u016f\u017eete p\u0159i\u0159adit libovolnou HTML t\u0159\u00eddu (class). Django\r\nnab\u00edz\u00ed t\u0159\u00eddu <tt class=\"docutils literal\"><span class=\"pre\">&quot;collapse&quot;</span></tt>, kter\u00e1 ur\u010denou skupinu pol\u00ed zobraz\u00ed\r\nsbalenou. To se hod\u00ed v p\u0159\u00edpadech, kdy m\u00e1te dlouh\u00fd formul\u00e1\u0159 s v\u011bt\u0161\u00edm\r\npo\u010dtem pol\u00ed, kter\u00e9 se \u010dasto nepou\u017e\u00edvaj\u00ed:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"k\">class</span> <span class=\"nc\">PollAdmin</span><span class=\"p\">(</span><span class=\"n\">admin</span><span class=\"o\">.</span><span class=\"n\">ModelAdmin</span><span class=\"p\">):</span>\r\n    <span class=\"n\">fieldsets</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\r\n        <span class=\"p\">(</span><span class=\"bp\">None</span><span class=\"p\">,</span>               <span class=\"p\">{</span><span class=\"s\">&#39;fields&#39;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s\">&#39;question&#39;</span><span class=\"p\">]}),</span>\r\n        <span class=\"p\">(</span><span class=\"s\">&#39;Date information&#39;</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s\">&#39;fields&#39;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s\">&#39;pub_date&#39;</span><span class=\"p\">],</span> <span class=\"s\">&#39;classes&#39;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s\">&#39;collapse&#39;</span><span class=\"p\">]}),</span>\r\n    <span class=\"p\">]</span>\r\n</pre></div>\r\n</div>\r\n<img alt=\"Skupina pol\u00ed je sbalen\u00e1\" src=\"/media/images/admin09.png\" />\r\n</div>\r\n<div class=\"section\" id=\"s-p-id-v-n-souvisej-c-ch-objekt\">\r\n<span id=\"p-id-v-n-souvisej-c-ch-objekt\"></span><h2>P\u0159id\u00e1v\u00e1n\u00ed souvisej\u00edc\u00edch objekt\u016f<a class=\"headerlink\" href=\"#p-id-v-n-souvisej-c-ch-objekt\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Tak, administra\u010dn\u00ed rozhran\u00ed pro <tt class=\"docutils literal\"><span class=\"pre\">Anketu</span></tt> (<tt class=\"docutils literal\"><span class=\"pre\">Poll</span></tt>) m\u00e1me hotov\u00e9. Ale\r\nka\u017ed\u00e1 <tt class=\"docutils literal\"><span class=\"pre\">Anketa</span></tt> je slo\u017eena z n\u011bkolika <tt class=\"docutils literal\"><span class=\"pre\">Voleb</span></tt> (<tt class=\"docutils literal\"><span class=\"pre\">Choices</span></tt>) a ty se\r\nn\u00e1m v administra\u010dn\u00edm rozhran\u00ed je\u0161t\u011b nezobrazuj\u00ed.</p>\r\n<p>Zat\u00edm.</p>\r\n<p>Tento probl\u00e9m lze vy\u0159e\u0161it dv\u011bma zp\u016fsoby. Bu\u010f <tt class=\"docutils literal\"><span class=\"pre\">Volby</span></tt> zaregistrujeme\r\npodobn\u011b, jako jsme to ud\u011blali u <tt class=\"docutils literal\"><span class=\"pre\">Ankety</span></tt>. \u0158e\u0161en\u00ed je jednoduch\u00e9:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"kn\">from</span> <span class=\"nn\">mysite.polls.models</span> <span class=\"kn\">import</span> <span class=\"n\">Choice</span>\r\n\r\n<span class=\"n\">admin</span><span class=\"o\">.</span><span class=\"n\">site</span><span class=\"o\">.</span><span class=\"n\">register</span><span class=\"p\">(</span><span class=\"n\">Choice</span><span class=\"p\">)</span>\r\n</pre></div>\r\n</div>\r\n<p>Te\u010f budou &quot;Volby&quot; dal\u0161\u00ed polo\u017ekou v administra\u010dn\u00edm rozhran\u00ed. Formul\u00e1\u0159 &quot;Add\r\nchoice&quot; bude vypadat asi takhle:</p>\r\n<img alt=\"Administra\u010dn\u00ed str\u00e1nka pro mo\u017enosti (Choices)\" src=\"/media/images/admin10.png\" />\r\n<p>V tomto formul\u00e1\u0159i je pole &quot;Poll&quot; zobrazeno jako &quot;selekt\u00edtko&quot;. Django v\u00ed,\r\n\u017ee <a title=\"django.db.models.ForeignKey\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey\"><tt class=\"xref docutils literal\"><span class=\"pre\">ForeignKey</span></tt></a> m\u00e1 b\u00fdt v administraci zobrazen\r\njako <tt class=\"docutils literal\"><span class=\"pre\">&lt;select&gt;</span></tt> box. Po rozbalen\u00ed zjist\u00edte, \u017ee m\u00e1me zat\u00edm definovanou\r\npouze jednu anketu.</p>\r\n<p>Tak\u00e9 si v\u0161imn\u011bte zelen\u00e9ho symbolu plus (&quot;Add Another&quot;, \u010desky &quot;P\u0159idat\r\ndal\u0161\u00ed&quot;) vedle pol\u00ed\u010dka &quot;Poll&quot;. Ka\u017ed\u00fd objekt, kter\u00fd se prost\u0159ednictv\u00edm\r\nvztahu <tt class=\"docutils literal\"><span class=\"pre\">ForeignKey</span></tt> odkazuje na jin\u00fd, dostane v administra\u010dn\u00edm\r\nrozhran\u00ed tuto volbu automaticky. Kdy\u017e na symbol kliknete, vysko\u010d\u00ed v\u00e1m\r\nokno s formul\u00e1\u0159em &quot;Add poll&quot;. Pokud v tomto okn\u011b p\u0159id\u00e1te anketu a znovu\r\nkliknete na &quot;Save,&quot; Django ulo\u017e\u00ed anketu do datab\u00e1ze a dynamicky ji\r\nnastav\u00ed jako vybranou mo\u017enost ve formul\u00e1\u0159i &quot;Add choice&quot;, na kter\u00fd se\r\npr\u00e1v\u011b d\u00edvate.</p>\r\n<p>P\u0159id\u00e1v\u00e1n\u00ed voleb &quot;Choices&quot; jde ale zrealizovat i efektivn\u011bji, u\u017e ve\r\nchv\u00edli vytv\u00e1\u0159en\u00ed ankety.</p>\r\n<p>Odstra\u0148te vol\u00e1n\u00ed <tt class=\"docutils literal\"><span class=\"pre\">register()</span></tt> pro model &quot;Choices&quot;. Upravte registra\u010dn\u00ed\r\nk\u00f3d pro <tt class=\"docutils literal\"><span class=\"pre\">Poll</span></tt>, aby vypadal takto:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"k\">class</span> <span class=\"nc\">ChoiceInline</span><span class=\"p\">(</span><span class=\"n\">admin</span><span class=\"o\">.</span><span class=\"n\">StackedInline</span><span class=\"p\">):</span>\r\n    <span class=\"n\">model</span> <span class=\"o\">=</span> <span class=\"n\">Choice</span>\r\n    <span class=\"n\">extra</span> <span class=\"o\">=</span> <span class=\"mf\">3</span>\r\n\r\n<span class=\"k\">class</span> <span class=\"nc\">PollAdmin</span><span class=\"p\">(</span><span class=\"n\">admin</span><span class=\"o\">.</span><span class=\"n\">ModelAdmin</span><span class=\"p\">):</span>\r\n    <span class=\"n\">fieldsets</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\r\n        <span class=\"p\">(</span><span class=\"bp\">None</span><span class=\"p\">,</span>               <span class=\"p\">{</span><span class=\"s\">&#39;fields&#39;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s\">&#39;question&#39;</span><span class=\"p\">]}),</span>\r\n        <span class=\"p\">(</span><span class=\"s\">&#39;Date information&#39;</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s\">&#39;fields&#39;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s\">&#39;pub_date&#39;</span><span class=\"p\">],</span> <span class=\"s\">&#39;classes&#39;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s\">&#39;collapse&#39;</span><span class=\"p\">]}),</span>\r\n    <span class=\"p\">]</span>\r\n    <span class=\"n\">inlines</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">ChoiceInline</span><span class=\"p\">]</span>\r\n\r\n<span class=\"n\">admin</span><span class=\"o\">.</span><span class=\"n\">site</span><span class=\"o\">.</span><span class=\"n\">register</span><span class=\"p\">(</span><span class=\"n\">Poll</span><span class=\"p\">,</span> <span class=\"n\">PollAdmin</span><span class=\"p\">)</span>\r\n</pre></div>\r\n</div>\r\n<p>Tento k\u00f3d Djangu \u0159\u00edk\u00e1: &quot;Volby (Choices) budou spravov\u00e1ny v administraci\r\npro Ankety (Poll). Pro spr\u00e1vu voleb zobraz 3 pole.&quot;</p>\r\n<p>Na\u010dt\u011bte si str\u00e1nku &quot;Add poll&quot; a pod\u00edvejte se, jak te\u010f vypad\u00e1:</p>\r\n<img alt=\"Str\u00e1nka pro p\u0159id\u00e1n\u00ed ankety te\u010f obsahuje i volby (Choices)\" src=\"/media/images/admin11t.png\" />\r\n<p>Funguje to n\u00e1sledovn\u011b: Na str\u00e1nce s anketou budou v\u017edy zobrazeny\r\n3 bloky pro zad\u00e1n\u00ed voleb (co\u017e je specifikov\u00e1no pomoc\u00ed <tt class=\"docutils literal\"><span class=\"pre\">extra</span></tt>).\r\nPoka\u017ed\u00e9, kdy\u017e si zobraz\u00edte str\u00e1nku s editac\u00ed existuj\u00edc\u00edho objektu, budou\r\nna v\u00e1s \u010dekat t\u0159i nov\u00e1 pole pro zad\u00e1n\u00ed dal\u0161\u00edch voleb (i p\u0159esto, \u017ee anketa u\u017e\r\nn\u011bjak\u00e9 volby definov\u00e1ny m\u00e1).</p>\r\n<p>M\u00e1 to ale mal\u00fd h\u00e1\u010dek. Zobrazen\u00ed v\u0161ech pol\u00ed zabere na str\u00e1nce hodn\u011b\r\nm\u00edsta. Pro souvisej\u00edc\u00ed objekty Django na\u0161t\u011bst\u00ed nab\u00edz\u00ed i tabulkov\u00e9\r\nzobrazen\u00ed; sta\u010d\u00ed zm\u011bnit deklaraci <tt class=\"docutils literal\"><span class=\"pre\">ChoiceInline</span></tt> aby vypadala takhle:</p>\r\n<div class=\"highlight-python\"><pre>class ChoiceInline(admin.TabularInline):\r\n    #...</pre>\r\n</div>\r\n<p>S pou\u017eit\u00edm <tt class=\"docutils literal\"><span class=\"pre\">TabularInline</span></tt> (nam\u00edsto <tt class=\"docutils literal\"><span class=\"pre\">StackedInline</span></tt>), budou\r\nsouvisej\u00edc\u00ed objekty zobrazeny v kompaktn\u011bj\u0161\u00edm tabulkov\u00e9m form\u00e1tu:</p>\r\n<img alt=\"Str\u00e1nka pro p\u0159id\u00e1v\u00e1n\u00ed ankety je te\u010f kompaktn\u011bj\u0161\u00ed\" src=\"/media/images/admin12.png\" />\r\n</div>\r\n<div class=\"section\" id=\"s-upravte-si-v-pis-objekt\">\r\n<span id=\"upravte-si-v-pis-objekt\"></span><h2>Upravte si v\u00fdpis objekt\u016f<a class=\"headerlink\" href=\"#upravte-si-v-pis-objekt\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Te\u010f, kdy\u017e u\u017e administra\u010dn\u00ed str\u00e1nka pro ankety vypad\u00e1 dob\u0159e, poj\u010fme\r\nvyladit v\u00fdpis &quot;change list&quot; -- ten zobrazuje v\u0161echny ankety v syst\u00e9mu.</p>\r\n<p>Jeho sou\u010dasn\u00e1 podoba je n\u00e1sleduj\u00edc\u00ed:</p>\r\n<img alt=\"V\u00fdpis 'Change list' pro ankety\" src=\"/media/images/admin04t.png\" />\r\n<p>Ve v\u00fdchoz\u00edm nastaven\u00ed Django zobrazuje <tt class=\"docutils literal\"><span class=\"pre\">str()</span></tt> ka\u017ed\u00e9ho objektu.  N\u011bkdy\r\nby se ale hodilo, kdybychom vid\u011bli jednotliv\u00e1 pole modelu. Pro tento\r\n\u00fa\u010del pou\u017eijte mo\u017enost <tt class=\"docutils literal\"><span class=\"pre\">list_display</span></tt> se seznamem pol\u00ed,\r\nkter\u00e9 chcete ve sloupc\u00edch zobrazit:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"k\">class</span> <span class=\"nc\">PollAdmin</span><span class=\"p\">(</span><span class=\"n\">admin</span><span class=\"o\">.</span><span class=\"n\">ModelAdmin</span><span class=\"p\">):</span>\r\n    <span class=\"c\"># ...</span>\r\n    <span class=\"n\">list_display</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"s\">&#39;question&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;pub_date&#39;</span><span class=\"p\">)</span>\r\n</pre></div>\r\n</div>\r\n<p>A je\u0161t\u011b jedna fajnovost -- p\u0159idejme u\u017eivatelskou metodu\r\n<tt class=\"docutils literal\"><span class=\"pre\">was_published_today</span></tt> z prvn\u00ed \u010d\u00e1sti tohoto pr\u016fvodce:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"k\">class</span> <span class=\"nc\">PollAdmin</span><span class=\"p\">(</span><span class=\"n\">admin</span><span class=\"o\">.</span><span class=\"n\">ModelAdmin</span><span class=\"p\">):</span>\r\n    <span class=\"c\"># ...</span>\r\n    <span class=\"n\">list_display</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"s\">&#39;question&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;pub_date&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;was_published_today&#39;</span><span class=\"p\">)</span>\r\n</pre></div>\r\n</div>\r\n<p>Po v\u0161ech t\u011bchto \u00faprav\u00e1ch bude v\u00fdpis change list pro ankety vypadat\r\ntakto:</p>\r\n<img alt=\"Aktualizovan\u00fd Change list pro ankety\" src=\"/media/images/admin13t.png\" />\r\n<p>Kliknut\u00edm na z\u00e1hlav\u00ed sloupce se\u0159ad\u00edte objekty podle hodnot ve sloupci --\r\nkrom\u011b z\u00e1hlav\u00ed <tt class=\"docutils literal\"><span class=\"pre\">was_published_today</span></tt>, proto\u017ee \u0159azen\u00ed podle v\u00fdstupu\r\nlibovoln\u00e9 metody nen\u00ed podporov\u00e1no. Tak\u00e9 si v\u0161imn\u011bte, \u017ee z\u00e1hlav\u00ed sloupce\r\n<tt class=\"docutils literal\"><span class=\"pre\">was_published_today</span></tt> m\u00e1 ve v\u00fdchoz\u00edm nastaven\u00ed stejn\u00fd n\u00e1zev jako je\r\njm\u00e9no metody (podtr\u017e\u00edtka jsou nahrazena mezerami). Tohle m\u016f\u017eete zm\u011bnit\r\np\u0159id\u00e1n\u00edm atributu <tt class=\"docutils literal\"><span class=\"pre\">short_description</span></tt> (v souboru <tt class=\"docutils literal\"><span class=\"pre\">models.py</span></tt>):</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"k\">def</span> <span class=\"nf\">was_published_today</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\r\n    <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">pub_date</span><span class=\"o\">.</span><span class=\"n\">date</span><span class=\"p\">()</span> <span class=\"o\">==</span> <span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">date</span><span class=\"o\">.</span><span class=\"n\">today</span><span class=\"p\">()</span>\r\n<span class=\"n\">was_published_today</span><span class=\"o\">.</span><span class=\"n\">short_description</span> <span class=\"o\">=</span> <span class=\"s\">&#39;Published today?&#39;</span>\r\n</pre></div>\r\n</div>\r\n<p>P\u0159idejme do change listu dal\u0161\u00ed vylep\u0161en\u00ed: filtry. Dopi\u0161te n\u00e1sleduj\u00edc\u00ed\r\n\u0159\u00e1dek do t\u0159\u00eddy <tt class=\"docutils literal\"><span class=\"pre\">PollAdmin</span></tt>:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"n\">list_filter</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s\">&#39;pub_date&#39;</span><span class=\"p\">]</span>\r\n</pre></div>\r\n</div>\r\n<p>Tato volba p\u0159id\u00e1 postran\u00ed li\u0161tu &quot;Filter&quot;, kter\u00e1 umo\u017e\u0148uje filtrovat\r\nv\u00fdpis Change list podle hodnot pole <tt class=\"docutils literal\"><span class=\"pre\">pub_date</span></tt>:</p>\r\n<img alt=\"V\u00fdpis Change list pro ankety, tentokr\u00e1t v\u010detn\u011b filtru\" src=\"/media/images/admin14t.png\" />\r\n<p>Typ zobrazen\u00e9ho filtru z\u00e1vis\u00ed na poli, podle kter\u00e9ho se m\u00e1 filtrovat.\r\nProto\u017ee <tt class=\"docutils literal\"><span class=\"pre\">pub_date</span></tt> je DateTimeField, Django v\u00ed, \u017ee m\u00e1 zobrazit volby\r\npro pole DateTimeField: &quot;Any date&quot; (Jak\u00e9koliv datum), &quot;Today&quot; (Dnes),\r\n&quot;Past 7 days&quot; (Posledn\u00edch 7 dn\u00ed),  &quot;This month&quot; (Tento m\u011bs\u00edc) a &quot;This\r\nyear&quot; (Tento rok).</p>\r\n<p>U\u017e se n\u00e1m ten admin za\u010d\u00edn\u00e1 p\u011bkn\u011b r\u00fdsovat, \u017ee? A to st\u00e1le nen\u00ed v\u0161e --\r\np\u0159idejme nyn\u00ed mo\u017enost vyhled\u00e1v\u00e1n\u00ed:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"n\">search_fields</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s\">&#39;question&#39;</span><span class=\"p\">]</span>\r\n</pre></div>\r\n</div>\r\n<p>Uveden\u00e1 formule p\u0159id\u00e1 vyhled\u00e1vac\u00ed pol\u00ed\u010dko na za\u010d\u00e1tek str\u00e1nky. Kdy\u017e\r\nu\u017eivatel zad\u00e1 n\u011bjakou hodnotu, Django prohled\u00e1 pole <tt class=\"docutils literal\"><span class=\"pre\">question</span></tt>. M\u016f\u017eete\r\npou\u017e\u00edt tolik pol\u00ed, kolik chcete -- i kdy\u017e, proto\u017ee se pro vyhled\u00e1v\u00e1n\u00ed\r\npou\u017e\u00edv\u00e1 dotaz <tt class=\"docutils literal\"><span class=\"pre\">LIKE</span></tt>, zkuste to nep\u0159eh\u00e1n\u011bt, aby to va\u0161e datab\u00e1ze\r\nvydr\u017eela.</p>\r\n<p>A jsme u posledn\u00edho vylep\u0161en\u00ed: proto\u017ee objekty anket obsahuj\u00ed pole s\r\ndatumem, bude p\u011bkn\u00e9, kdy\u017e budeme moci ankety proch\u00e1zet podle data (nap\u0159.\r\n&quot;zobraz v\u0161echny ankety publikovan\u00e9 v listopadu 2008&quot;). Dopi\u0161te tento\r\n\u0159\u00e1dek:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"n\">date_hierarchy</span> <span class=\"o\">=</span> <span class=\"s\">&#39;pub_date&#39;</span>\r\n</pre></div>\r\n</div>\r\n<p>T\u00edmto zp\u016fsobem se na za\u010d\u00e1tek str\u00e1nky p\u0159id\u00e1 hierarchick\u00e1 navigace podle\r\ndata. Nejvy\u0161\u0161\u00ed \u00farove\u0148 zobrazuje v\u0161echny dostupn\u00e9 roky, v ni\u017e\u0161\u00edch pak\r\nm\u011bs\u00edce a jejich dny.</p>\r\n<p>Na konec je dobr\u00e9 poznamenat, \u017ee m\u016f\u017eete ovlivnit i str\u00e1nkov\u00e1n\u00ed v\u00fdpisu.\r\nV\u00fdchoz\u00ed nastaven\u00ed zobrazuje 50 objekt\u016f na jedn\u00e9 str\u00e1nce.</p>\r\n</div>\r\n<div class=\"section\" id=\"s-upravte-si-kompletn-vzhled-prost-ed\">\r\n<span id=\"upravte-si-kompletn-vzhled-prost-ed\"></span><h2>Upravte si kompletn\u00ed vzhled prost\u0159ed\u00ed<a class=\"headerlink\" href=\"#upravte-si-kompletn-vzhled-prost-ed\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Je jasn\u00e9, \u017ee zobrazen\u00ed nadpisu &quot;Django administration&quot; na ka\u017ed\u00e9 str\u00e1nce\r\nadministra\u010dn\u00edho rozhran\u00ed je hrozn\u00e9. Tento text p\u0159\u00edmo vol\u00e1 po zm\u011bn\u011b.</p>\r\n<p>N\u00e1prava se d\u00e1 prov\u00e9st pom\u011brn\u011b jednodu\u0161e -- zm\u011bnou konkr\u00e9tn\u00ed \u0161ablony.</p>\r\n<p>Otev\u0159ete v\u00e1\u0161 soubor s nastaven\u00edm (<tt class=\"docutils literal\"><span class=\"pre\">mysite/settings.py</span></tt>, vzpom\u00edn\u00e1te?) a\r\npod\u00edvejte se na prom\u011bnnou <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-TEMPLATE_DIRS\"><tt class=\"xref docutils literal\"><span class=\"pre\">TEMPLATE_DIRS</span></tt></a>.\r\n<a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-TEMPLATE_DIRS\"><tt class=\"xref docutils literal\"><span class=\"pre\">TEMPLATE_DIRS</span></tt></a> je seznam adres\u00e1\u0159\u016f, kter\u00e9 se p\u0159i na\u010d\u00edt\u00e1n\u00ed\r\n\u0161ablonov\u00e9ho syst\u00e9mu postupn\u011b proch\u00e1z\u00ed. Je to vyhled\u00e1vac\u00ed cesta.</p>\r\n<p>Ve v\u00fdchoz\u00edm nastaven\u00ed je <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-TEMPLATE_DIRS\"><tt class=\"xref docutils literal\"><span class=\"pre\">TEMPLATE_DIRS</span></tt></a> pr\u00e1zdn\u00e9. P\u0159idejme\r\ntam \u0159\u00e1dek, aby Django v\u011bd\u011blo, kde hledat na\u0161e \u0161ablony:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"n\">TEMPLATE_DIRS</span> <span class=\"o\">=</span> <span class=\"p\">(</span>\r\n    <span class=\"s\">&quot;/home/my_username/mytemplates&quot;</span><span class=\"p\">,</span> <span class=\"c\"># Nastavte na svuj adresar.</span>\r\n<span class=\"p\">)</span>\r\n</pre></div>\r\n</div>\r\n<p>Zkop\u00edrujte \u0161ablonu <tt class=\"docutils literal\"><span class=\"pre\">admin/base_site.html</span></tt> ze zdrojov\u00fdch k\u00f3d\u016f Djanga\r\n(<tt class=\"docutils literal\"><span class=\"pre\">django/contrib/admin/templates</span></tt>) do podadres\u00e1\u0159e <tt class=\"docutils literal\"><span class=\"pre\">admin</span></tt> slo\u017eky,\r\nkterou jste nastavili ve volb\u011b <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-TEMPLATE_DIRS\"><tt class=\"xref docutils literal\"><span class=\"pre\">TEMPLATE_DIRS</span></tt></a>. Nap\u0159\u00edklad,\r\npokud <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-TEMPLATE_DIRS\"><tt class=\"xref docutils literal\"><span class=\"pre\">TEMPLATE_DIRS</span></tt></a> obsahuje\r\n<tt class=\"docutils literal\"><span class=\"pre\">&quot;/home/my_username/mytemplates&quot;</span></tt>, jak je uvedeno v\u00fd\u0161e, zkop\u00edrujte\r\n<tt class=\"docutils literal\"><span class=\"pre\">django/contrib/admin/templates/admin/base_site.html</span></tt> do\r\n<tt class=\"docutils literal\"><span class=\"pre\">/home/my_username/mytemplates/admin/base_site.html</span></tt>. Nezapome\u0148te na\r\nten podadres\u00e1\u0159 <tt class=\"docutils literal\"><span class=\"pre\">admin</span></tt>!</p>\r\n<p>Pak u\u017e jenom upravte soubor a nahra\u010fte standardn\u00ed text n\u011b\u010d\u00edm, co se v\u00e1m\r\ntam hod\u00ed.</p>\r\n<p>\u0160ablona obsahuje spoustu na prvn\u00ed pohled mo\u017en\u00e1 nep\u0159ehledn\u00fdch v\u00fdraz\u016f. T\u0159eba\r\n<cite>{% block branding %}`</cite> nebo <tt class=\"docutils literal\"><span class=\"pre\">{{</span> <span class=\"pre\">title</span> <span class=\"pre\">}}.</span> <span class=\"pre\">V\u00fdrazy</span> <span class=\"pre\">``{%</span></tt> a <tt class=\"docutils literal\"><span class=\"pre\">{{</span></tt> jsou\r\nsou\u010d\u00e1st\u00ed \u0161ablonov\u00e9ho syst\u00e9mu, kter\u00e9 Django v tu pravou chv\u00edli p\u0159etav\u00ed do\r\nfin\u00e1ln\u00edho HTML k\u00f3du. Podrobnosti probereme v t\u0159et\u00ed \u010d\u00e1sti n\u00e1vodu.</p>\r\n<p>Jak\u00e1koli v\u00fdchoz\u00ed \u0161ablona administra\u010dn\u00edho rozhran\u00ed m\u016f\u017ee b\u00fdt nahrazena.\r\nBudete postupovat stejn\u011b, jako tomu bylo u souboru <tt class=\"docutils literal\"><span class=\"pre\">base_site.html</span></tt> --\r\nzkop\u00edrujte \u0161ablonu z v\u00fdchoz\u00edho adres\u00e1\u0159e do va\u0161eho vlastn\u00edho adres\u00e1\u0159e a\r\ntam ji upravte dle libosti.</p>\r\n<p>Mazan\u00ed \u010dten\u00e1\u0159i se zeptaj\u00ed: Ale pokud nastaven\u00ed <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-TEMPLATE_DIRS\"><tt class=\"xref docutils literal\"><span class=\"pre\">TEMPLATE_DIRS</span></tt></a>\r\nbylo na za\u010d\u00e1tku pr\u00e1zdn\u00e9, jak Django na\u0161lo \u0161ablony? Odpov\u011bd je, \u017ee Django\r\nsi standardn\u011b ov\u011b\u0159\u00ed existenci podadres\u00e1\u0159e <tt class=\"docutils literal\"><span class=\"pre\">templates/</span></tt> v adres\u00e1\u0159i\r\nka\u017ed\u00e9 aplikace, pro p\u0159\u00edpad, kdyby u\u017eivatel \u017e\u00e1dn\u00e9 cesty k \u0161ablon\u00e1m\r\nnedefinoval. Dal\u0161\u00ed podrobnosti naleznete v <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/templates/api/#template-loaders\"><em>dokumentaci pro\r\ntemplate loader</em></a>.</p>\r\n</div>\r\n<div class=\"section\" id=\"s-upravte-si-hlavn-str-nku-administrace\">\r\n<span id=\"upravte-si-hlavn-str-nku-administrace\"></span><h2>Upravte si hlavn\u00ed str\u00e1nku administrace<a class=\"headerlink\" href=\"#upravte-si-hlavn-str-nku-administrace\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Kdy\u017e u\u017e jsme u toho, asi si budete cht\u00edt zm\u011bnit tak\u00e9 vzhled hlavn\u00ed\r\nstr\u00e1nky administrace.</p>\r\n<p>Ve v\u00fdchoz\u00edm nastaven\u00ed zobrazuje v abecedn\u00edm po\u0159ad\u00ed v\u0161echny aplikace z\r\nprom\u011bnn\u00e9 <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-INSTALLED_APPS\"><tt class=\"xref docutils literal\"><span class=\"pre\">INSTALLED_APPS</span></tt></a>, kter\u00e9 byly zaregistrovany do\r\nadministra\u010dn\u00edho rozhran\u00ed.  Mo\u017en\u00e1 budete cht\u00edt ud\u011blat v rozlo\u017een\u00ed str\u00e1nky\r\nv\u00fdznamn\u00e9 zm\u011bny. Hlavn\u00ed str\u00e1nka je p\u0159eci jen jednou z nejd\u016fle\u017eit\u011bj\u0161\u00edch a\r\nm\u011bla by se d\u00e1t jednodu\u0161e pou\u017e\u00edvat.</p>\r\n<p>\u0160ablona t\u00e9to str\u00e1nky je schovan\u00e1 v <tt class=\"docutils literal\"><span class=\"pre\">admin/index.html</span></tt>.  (D\u011blejte to\r\nsam\u00e9 jako s <tt class=\"docutils literal\"><span class=\"pre\">admin/base_site.html</span></tt> v p\u0159edchoz\u00ed \u010d\u00e1sti -- zkop\u00edrujte ji\r\nz v\u00fdchoz\u00edho adres\u00e1\u0159e do u\u017eivatelsk\u00e9ho adres\u00e1\u0159e). Prozkoum\u00e1n\u00edm t\u00e9to\r\n\u0161ablony zjist\u00edte, \u017ee pou\u017e\u00edv\u00e1 \u0161ablonovou prom\u011bnnou <tt class=\"docutils literal\"><span class=\"pre\">app_list</span></tt>.  Tato\r\nprom\u011bnn\u00e1 obsahuje ka\u017edou nainstalovanou Django aplikaci. M\u00edsto t\u00e9to\r\nprom\u011bnn\u00e9 m\u016f\u017eete ve sv\u00e9 \u0161ablon\u011b vytvo\u0159it &quot;tvrd\u00e9&quot; odkazy na administra\u010dn\u00ed\r\nstr\u00e1nky pro jednotliv\u00e9 objekty -- prost\u011b tak, jak v\u00e1m to bude vyhovovat.\r\nPokud nerozum\u00edte, nezoufejte. Jak u\u017e bylo zm\u00edn\u011bno, podrobnosti probereme v\r\nt\u0159et\u00ed \u010d\u00e1sti n\u00e1vodu.</p>\r\n<p>A\u017e budete se sv\u00fdm administra\u010dn\u00edm rozhran\u00edm spokojeni, p\u0159e\u010dt\u011bte si\r\n<a class=\"reference external\" href=\"/dokumentace/intro/tutorial03/#intro-tutorial03\"><em>t\u0159et\u00ed \u010d\u00e1st tohoto n\u00e1vodu</em></a> a za\u010dn\u011bte pracovat na\r\nve\u0159ejn\u00fdch views (pohledech) pro ankety.</p>\r\n</div>\r\n</div>\r\n    </div>\r\n    <div id=\"rightSideBar\" class=\"span-7 last\">\r\n        <h3><a href=\"http://docs.djangoproject.com/en/dev/contents/\">Obsah</a></h3><ul>\r\n<li><a class=\"reference external\" href=\"#\">Prvn\u00ed aplikace v Djangu, \u010d\u00e1st 2</a><ul>\r\n<li><a class=\"reference external\" href=\"#aktivace-administra-n-ho-rozhran\">Aktivace administra\u010dn\u00edho rozhran\u00ed</a></li>\r\n<li><a class=\"reference external\" href=\"#spou-t-me-v-vojov-server\">Spou\u0161t\u00edme v\u00fdvojov\u00fd server</a></li>\r\n<li><a class=\"reference external\" href=\"#uvnit-administrace\">Uvnit\u0159 administrace</a></li>\r\n<li><a class=\"reference external\" href=\"#administrace-anketn-aplikace\">Administrace anketn\u00ed aplikace</a></li>\r\n<li><a class=\"reference external\" href=\"#prohl-dka-administrace\">Prohl\u00eddka administrace</a></li>\r\n<li><a class=\"reference external\" href=\"#prava-vzhledu-administra-n-ch-formul\">\u00daprava vzhledu administra\u010dn\u00edch formul\u00e1\u0159\u016f</a></li>\r\n<li><a class=\"reference external\" href=\"#p-id-v-n-souvisej-c-ch-objekt\">P\u0159id\u00e1v\u00e1n\u00ed souvisej\u00edc\u00edch objekt\u016f</a></li>\r\n<li><a class=\"reference external\" href=\"#upravte-si-v-pis-objekt\">Upravte si v\u00fdpis objekt\u016f</a></li>\r\n<li><a class=\"reference external\" href=\"#upravte-si-kompletn-vzhled-prost-ed\">Upravte si kompletn\u00ed vzhled prost\u0159ed\u00ed</a></li>\r\n<li><a class=\"reference external\" href=\"#upravte-si-hlavn-str-nku-administrace\">Upravte si hlavn\u00ed str\u00e1nku administrace</a></li>\r\n</ul>\r\n</li>\r\n</ul><h3>Listov\u00e1n\u00ed</h3><ul>\r\n<li>P\u0159edchoz\u00ed: <a href=\"/dokumentace/intro/tutorial01/\">Prvn\u00ed aplikace v Djangu, \u010d\u00e1st 1</a></li>\r\n<li>Dal\u0161\u00ed: <a href=\"/dokumentace/intro/tutorial03/\">Prvn\u00ed aplikace v Djangu, \u010d\u00e1st 3</a></li>\r\n</ul>\r\n        \r\n        \r\n<table class=\"revision\">\r\n    \r\n    \r\n    <tr>\r\n        <th>P\u0159eklad</th>\r\n        <td>Vojta Pol\u00e1\u0161ek</td>\r\n    </tr>\r\n    \r\n    \r\n    <tr>\r\n        <th>Korekce</th>\r\n        <td>Michal Valou\u0161ek</td>\r\n    </tr>\r\n    \r\n</table>\r\n\r\n\r\n    </div>\r\n    <br class=\"clear\" />\r\n</div>\r\n\r\n", 
            "enable_comments": true
        }
    }, 
    {
        "pk": 13, 
        "model": "flatpages.flatpage", 
        "fields": {
            "registration_required": false, 
            "title": "Prvn\u00ed aplikace v Djangu, \u010d\u00e1st 3", 
            "url": "/dokumentace/intro/tutorial03/", 
            "template_name": "flatpages/doc.html", 
            "sites": [
                1
            ], 
            "content": "<div id=\"wrapcontent\" class=\"span-22 last prefix-1 suffix-1\">\r\n    <div id=\"content\" class=\"span-14 suffix-1\">\r\n        \r\n        \r\n\r\n\r\n\r\n        <div class=\"section\" id=\"s-prvn-aplikace-v-djangu-st-3\">\r\n<span id=\"s-intro-tutorial03\"></span><span id=\"prvn-aplikace-v-djangu-st-3\"></span><span id=\"intro-tutorial03\"></span><h1>Prvn\u00ed aplikace v Djangu, \u010d\u00e1st 3<a class=\"headerlink\" href=\"#prvn-aplikace-v-djangu-st-3\" title=\"Permalink na tento nadpis\">\u00b6</a></h1>\r\n<p>Tento n\u00e1vod za\u010d\u00edn\u00e1 tam, kde kde skon\u010dila <a class=\"reference external\" href=\"/dokumentace/intro/tutorial02/#intro-tutorial02\"><em>druh\u00e1 \u010d\u00e1st uk\u00e1zkov\u00e9\r\naplikace</em></a>. Budeme pokra\u010dovat v na\u0161\u00ed webov\u00e9 anketn\u00ed\r\naplikaci a zam\u011b\u0159\u00edme se na jej\u00ed ve\u0159ejnou \u010d\u00e1st &#8211; &#8220;views&#8221; (pohledy).</p>\r\n<div class=\"section\" id=\"s-filozofie\">\r\n<span id=\"filozofie\"></span><h2>Filozofie<a class=\"headerlink\" href=\"#filozofie\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>View je &#8220;druh&#8221; webov\u00e9 str\u00e1nky, kter\u00e1 m\u00e1 ve va\u0161\u00ed aplikaci ur\u010dit\u00fd \u00fakol a\r\nv\u00fdsledek sv\u00e9 \u010dinnosti prezentuje prost\u0159ednictv\u00edm \u0161ablony. Nap\u0159\u00edklad, v\r\nblogovac\u00ed aplikaci by jste mohli naj\u00edt tato views:</p>\r\n<ul class=\"simple\">\r\n<li>\u00davodn\u00ed str\u00e1nka blogu &#8211; zobrazuje n\u011bkolik posledn\u00edch z\u00e1znam\u016f.</li>\r\n<li>Str\u00e1nka s detailem z\u00e1znamu  &#8211; str\u00e1nka s pevnou adresou\r\n(permalinkem) pro konkr\u00e9tn\u00ed z\u00e1znam.</li>\r\n<li>Archiv pro rok &#8211; zobraz\u00ed v\u0161echny m\u011bs\u00edce roku s po\u010dtem z\u00e1znam\u016f pro\r\nka\u017ed\u00fd z nich.</li>\r\n<li>Archiv pro m\u011bs\u00edc &#8211; zobraz\u00ed v\u0161echny dny m\u011bs\u00edce s po\u010dty z\u00e1znam\u016f pro\r\nka\u017ed\u00fd z nich.</li>\r\n<li>Archiv pro den &#8211; zobraz\u00ed v\u0161echny z\u00e1znamy pro zadan\u00fd den.</li>\r\n<li>Koment\u00e1\u0159 &#8211; zpracuje odesl\u00e1n\u00ed koment\u00e1\u0159e ke konkr\u00e9tn\u00edmu z\u00e1znamu.</li>\r\n</ul>\r\n<p>V na\u0161\u00ed anketn\u00ed aplikaci budeme m\u00edt tyto \u010dty\u0159i views:</p>\r\n<ul class=\"simple\">\r\n<li>Archiv anket &#8211; zobraz\u00ed n\u011bkolik posledn\u00edch anket.</li>\r\n<li>Detail ankety &#8211; zobraz\u00ed anketn\u00ed ot\u00e1zku bez v\u00fdsledk\u016f, ale s\r\nformul\u00e1\u0159em pro hlasov\u00e1n\u00ed.</li>\r\n<li>Str\u00e1nka s v\u00fdsledky &#8211; zobraz\u00ed v\u00fdsledky pro ur\u010ditou anketu.</li>\r\n<li>Hlasov\u00e1n\u00ed &#8211; zpracuje hlasov\u00e1n\u00ed pro konkr\u00e9tn\u00ed volbu v anket\u011b.</li>\r\n</ul>\r\n<p>V Djangu je ka\u017ed\u00e9 view zrealizov\u00e1no jednoduchou funkc\u00ed v Pythonu.</p>\r\n</div>\r\n<div class=\"section\" id=\"s-vytvo-te-si-svoje-url\">\r\n<span id=\"vytvo-te-si-svoje-url\"></span><h2>Vytvo\u0159te si svoje URL<a class=\"headerlink\" href=\"#vytvo-te-si-svoje-url\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Prvn\u00ed krokem p\u0159i psan\u00ed views je definov\u00e1n\u00ed struktury URL adres. Toho\r\ndoc\u00edl\u00edme vytvo\u0159en\u00edm jednoduch\u00e9ho Python modulu naz\u00fdvan\u00e9ho URLconf.\r\nSoubory URLconf se staraj\u00ed o p\u0159i\u0159azen\u00ed URL adresy k ur\u010dit\u00e9mu k\u00f3du.</p>\r\n<p>Kdy\u017e si u\u017eivatel vy\u017e\u00e1d\u00e1 konkr\u00e9tn\u00ed str\u00e1nku, Django se pod\u00edv\u00e1 do nastaven\u00ed\r\n<a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-ROOT_URLCONF\"><tt class=\"xref docutils literal\"><span class=\"pre\">ROOT_URLCONF</span></tt></a>, kter\u00e9 obsahuje \u0159et\u011bzec zapsan\u00fd v te\u010dkovan\u00e9\r\nsyntaxi Pythonu. Django tento modul na\u010dte a hled\u00e1 v n\u011bm prom\u011bnnou\r\n<tt class=\"docutils literal\"><span class=\"pre\">urlpatterns</span></tt>, co\u017e je sekvence n-tic ve form\u00e1tu:</p>\r\n<div class=\"highlight-python\"><pre>(regul\u00e1rn\u00ed v\u00fdraz, Python callback funkce [, nepovinn\u00fd slovn\u00edk])</pre>\r\n</div>\r\n<p>Django za\u010dne s prvn\u00edm regul\u00e1rn\u00edm v\u00fdrazem a postupn\u011b porovn\u00e1v\u00e1 vy\u017e\u00e1danou\r\nURL adresu se v\u0161emi dal\u0161\u00edmi v\u00fdrazy v seznamu, dokud nenajde shodu.</p>\r\n<p>Kdy\u017e je shoda nalezena, Django zavol\u00e1 Python callback funkci, a jako\r\nprvn\u00ed argument p\u0159ed\u00e1 objekt <a title=\"django.http.HttpRequest\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest\"><tt class=\"xref docutils literal\"><span class=\"pre\">HttpRequest</span></tt></a>. Ve\u0161ker\u00e9\r\n&quot;zachycen\u00e9&quot; hodnoty z regul\u00e1rn\u00edho v\u00fdrazu p\u0159ed\u00e1 jako jako keyword\r\nargumenty (spole\u010dn\u011b s prom\u011bnn\u00fdmi z nepovinn\u00e9ho slovn\u00edku -- pokud byly\r\nn\u011bjak\u00e9 definov\u00e1ny; viz t\u0159et\u00ed polo\u017eka v urlpatterns).</p>\r\n<p>Podrobn\u011bj\u0161\u00ed informace o objektech <a title=\"django.http.HttpRequest\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest\"><tt class=\"xref docutils literal\"><span class=\"pre\">HttpRequest</span></tt></a>\r\nnaleznete v <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#ref-request-response\"><em>Request and response objects</em></a>, detaily o souborech\r\nURLconf v <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/http/urls/#topics-http-urls\"><em>URL dispatcher</em></a>.</p>\r\n<p>Kdy\u017e jste na za\u010d\u00e1tku prvn\u00edho n\u00e1vodu spou\u0161t\u011bli <tt class=\"docutils literal\"><span class=\"pre\">django-admin.py</span>\r\n<span class=\"pre\">startproject</span> <span class=\"pre\">mysite</span></tt>, vytvo\u0159il se v\u00fdchoz\u00ed URLconf v <tt class=\"docutils literal\"><span class=\"pre\">mysite/urls.py</span></tt>.\r\nVolba <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-ROOT_URLCONF\"><tt class=\"xref docutils literal\"><span class=\"pre\">ROOT_URLCONF</span></tt></a> (v <tt class=\"docutils literal\"><span class=\"pre\">settings.py</span></tt>) byla automaticky\r\nnastavena tak, aby ukazovala pr\u00e1v\u011b na tento soubor:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"n\">ROOT_URLCONF</span> <span class=\"o\">=</span> <span class=\"s\">&#39;mysite.urls&#39;</span>\r\n</pre></div>\r\n</div>\r\n<p>Upravte nyn\u00ed <tt class=\"docutils literal\"><span class=\"pre\">mysite/urls.py</span></tt>:</p>\r\n<div class=\"highlight-python\"><pre>from django.conf.urls.defaults import *\r\n\r\nfrom django.contrib import admin\r\n    admin.autodiscover()\r\n\r\nurlpatterns = patterns('',\r\n    (r'^polls/$', 'mysite.polls.views.index'),\r\n    (r'^polls/(?P&lt;poll_id&gt;\\d+)/$', 'mysite.polls.views.detail'),\r\n    (r'^polls/(?P&lt;poll_id&gt;\\d+)/results/$', 'mysite.polls.views.results'),\r\n    (r'^polls/(?P&lt;poll_id&gt;\\d+)/vote/$', 'mysite.polls.views.vote'),\r\n    (r'^admin/', include(admin.site.urls)),\r\n)</pre>\r\n</div>\r\n<p>Rozeberme si \u00fapravu podrobn\u011bji. Kdy\u017e si n\u011bkdo vy\u017e\u00e1d\u00e1 va\u0161i str\u00e1nku\r\n-- \u0159ekn\u011bme &quot;/polls/23/&quot;, Django na\u010dte tento modul, proto\u017ee na n\u011bj\r\nukazuje volba <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-ROOT_URLCONF\"><tt class=\"xref docutils literal\"><span class=\"pre\">ROOT_URLCONF</span></tt></a>. Hled\u00e1 prom\u011bnnou s n\u00e1zvem\r\n<tt class=\"docutils literal\"><span class=\"pre\">urlpatterns</span></tt> a proch\u00e1z\u00ed po po\u0159\u00e1dku regul\u00e1rn\u00ed v\u00fdrazy. Kdy\u017e najde\r\nshoduj\u00edc\u00ed se regul\u00e1rn\u00ed v\u00fdraz -- <tt class=\"docutils literal\"><span class=\"pre\">r'^polls/(?P&lt;poll_id&gt;\\d+)/$'</span></tt> --\r\ntak na\u010dte p\u0159i\u0159azen\u00fd bal\u00ed\u010dek/modul: <tt class=\"docutils literal\"><span class=\"pre\">mysite.polls.views.detail</span></tt>. To\r\nodpov\u00edd\u00e1 funkci <tt class=\"docutils literal\"><span class=\"pre\">detail()</span></tt> v <tt class=\"docutils literal\"><span class=\"pre\">mysite/polls/views.py</span></tt>. Nakonec funkci\r\n<tt class=\"docutils literal\"><span class=\"pre\">detail()</span></tt> zavol\u00e1 t\u00edmto zp\u016fsobem:</p>\r\n<div class=\"highlight-python\"><pre>detail(request=&lt;HttpRequest object&gt;, poll_id='23')</pre>\r\n</div>\r\n<p>\u010c\u00e1st <tt class=\"docutils literal\"><span class=\"pre\">poll_id='23'</span></tt> p\u0159ich\u00e1z\u00ed z pravidla <tt class=\"docutils literal\"><span class=\"pre\">(?P&lt;poll_id&gt;\\d+)</span></tt>. Kulat\u00e9\r\nz\u00e1vorky &quot;zachyt\u00ed&quot; text ze shoduj\u00edc\u00edho se v\u00fdrazu a po\u0161lou jej jako\r\nargument do view funkce; <tt class=\"docutils literal\"><span class=\"pre\">?P&lt;poll_id&gt;</span></tt> definuje n\u00e1zev, kter\u00fdm se\r\nzachycen\u00e1 \u010d\u00e1st pojmenuje; a <tt class=\"docutils literal\"><span class=\"pre\">\\d+</span></tt> je regul\u00e1rn\u00ed v\u00fdraz pro sekvenci\r\n\u010d\u00edslic (\u010d\u00edslo).</p>\r\n<p>Proto\u017ee URL pravidla jsou definov\u00e1na za pomoc\u00ed regul\u00e1rn\u00edch v\u00fdraz\u016f,\r\nm\u016f\u017eete s jejich pomoc\u00ed d\u011blat t\u00e9m\u011b\u0159 cokoliv. S klidem zapome\u0148te\r\nna ty hromady adres kon\u010d\u00edc\u00edch v\u00fdrazem <tt class=\"docutils literal\"><span class=\"pre\">.php</span></tt> -- pokud ov\u0161em nem\u00e1te\r\n\u0161patn\u00fd smysl pro humor; v tom p\u0159\u00edpad\u011b by jste mohli napsat n\u011bco jako:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"p\">(</span><span class=\"s\">r&#39;^polls/latest\\.php$&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;mysite.polls.views.index&#39;</span><span class=\"p\">),</span>\r\n</pre></div>\r\n</div>\r\n<p>Ale ned\u011blejte to. Je to hloup\u00e9.</p>\r\n<p>Pamatujte, \u017ee tyto regul\u00e1rn\u00ed v\u00fdrazy neprohled\u00e1vaj\u00ed parametry GET, POST,\r\na ani n\u00e1zvy dom\u00e9n. Nap\u0159\u00edklad, p\u0159i po\u017eadavku na\r\n<tt class=\"docutils literal\"><span class=\"pre\">http://www.example.com/myapp/</span></tt>, bude URLconf hledat pravidlo pro\r\n<tt class=\"docutils literal\"><span class=\"pre\">myapp/</span></tt>. P\u0159i po\u017eadavku na <tt class=\"docutils literal\"><span class=\"pre\">http://www.example.com/myapp/?page=3</span></tt>,\r\nbude op\u011bt hledat <tt class=\"docutils literal\"><span class=\"pre\">myapp/</span></tt>.</p>\r\n<p>Pokud pot\u0159ebujete pomoc s regul\u00e1rn\u00edmi v\u00fdrazy, pod\u00edvejte se do\r\n<a class=\"reference external\" href=\"http://en.wikipedia.org/wiki/Regular_expression\">Wikipedie</a> a <a class=\"reference external\" href=\"http://docs.python.org/library/re.html\">dokumentace Pythonu</a>. Tak\u00e9 kniha O'Reilly &quot;Mastering\r\nRegular Expressions&quot; od Jeffreyho Friedla je fantastick\u00e1.</p>\r\n<p>Nakonec pozn\u00e1mka k v\u00fdkonu: regul\u00e1rn\u00ed v\u00fdrazy jsou kompilov\u00e1ny pouze p\u0159i\r\nprvn\u00edm spu\u0161t\u011bn\u00ed URLconf. Jsou b\u00e1je\u010dn\u011b rychl\u00e9.</p>\r\n</div>\r\n<div class=\"section\" id=\"s-napi-te-sv-prvn-view\">\r\n<span id=\"napi-te-sv-prvn-view\"></span><h2>Napi\u0161te sv\u00e9 prvn\u00ed view<a class=\"headerlink\" href=\"#napi-te-sv-prvn-view\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Zat\u00edm jsme \u017e\u00e1dn\u00e9 view nevytvo\u0159ili -- definovali jsme pouze seznam\r\npravidel v souboru URLconf. Poj\u010fme se p\u0159esv\u011bd\u010dit, \u017ee Django\r\nna obsah souboru URLconf spr\u00e1vn\u011b reaguje.</p>\r\n<p>Spus\u0165te v\u00fdvojov\u00fd server Djanga:</p>\r\n<div class=\"highlight-bash\"><div class=\"highlight\"><pre>python manage.py runserver\r\n</pre></div>\r\n</div>\r\n<p>Ve va\u0161em webov\u00e9m prohl\u00ed\u017ee\u010di nav\u0161tivte adresu\r\n&quot;<a class=\"reference external\" href=\"http://localhost:8000/polls/\">http://localhost:8000/polls/</a>&quot;. M\u011bla by se V\u00e1m zobrazit p\u0159\u00edtuln\u011b\r\nnamodral\u00e1 chybov\u00e1 str\u00e1nka s n\u00e1sleduj\u00edc\u00ed zpr\u00e1vou:</p>\r\n<div class=\"highlight-python\"><pre>ViewDoesNotExist at /polls/\r\n\r\nTried index in module mysite.polls.views. Error was: 'module'\r\nobject has no attribute 'index'</pre>\r\n</div>\r\n<p>Uveden\u00e1 chyba nastala kv\u016fli tomu, \u017ee jsme je\u0161t\u011b nevytvo\u0159ili funkci\r\n<tt class=\"docutils literal\"><span class=\"pre\">index()</span></tt> v modulu <tt class=\"docutils literal\"><span class=\"pre\">mysite/polls/views.py</span></tt>.</p>\r\n<p>Zkuste nav\u0161\u00edvit i adresy &quot;/polls/23/&quot;, &quot;/polls/23/results/&quot; a\r\n&quot;/polls/23/vote/&quot;. Chybov\u00e9 zpr\u00e1vy v\u00e1m \u0159eknou, kter\u00e9 views se Django\r\npoukou\u0161elo naj\u00edt (a nena\u0161lo, proto\u017ee je\u0161t\u011b nejsou naps\u00e1ny).</p>\r\n<p>Je na \u010dase napsat prvn\u00ed view. Otev\u0159ete soubor <tt class=\"docutils literal\"><span class=\"pre\">mysite/polls/views.py</span></tt>\r\na vlo\u017ete do n\u011bj n\u00e1sleduj\u00edc\u00ed Python k\u00f3d:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"kn\">from</span> <span class=\"nn\">django.http</span> <span class=\"kn\">import</span> <span class=\"n\">HttpResponse</span>\r\n\r\n<span class=\"k\">def</span> <span class=\"nf\">index</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>\r\n    <span class=\"k\">return</span> <span class=\"n\">HttpResponse</span><span class=\"p\">(</span><span class=\"s\">&quot;Hello, world. You&#39;re at the poll index.&quot;</span><span class=\"p\">)</span>\r\n</pre></div>\r\n</div>\r\n<p>Toto je nejjednodu\u0161\u0161\u00ed mo\u017en\u00e9 view. Nav\u0161tivte v prohl\u00ed\u017ee\u010di adresu\r\n&quot;/polls/&quot; a m\u011bli by jste uvid\u011bt v\u00fd\u0161e uveden\u00fd text.</p>\r\n<p>Poj\u010fme napsat dal\u0161\u00ed views. Jsou tro\u0161ku jin\u00e1, proto\u017ee p\u0159ij\u00edmaj\u00ed argument\r\n(kter\u00fd je p\u0159ijat z adresy pomoc\u00ed regul\u00e1rn\u00edho v\u00fdrazu definovan\u00e9ho v\r\nsouboru URLconf):</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"k\">def</span> <span class=\"nf\">detail</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">poll_id</span><span class=\"p\">):</span>\r\n    <span class=\"k\">return</span> <span class=\"n\">HttpResponse</span><span class=\"p\">(</span><span class=\"s\">&quot;You&#39;re looking at poll </span><span class=\"si\">%s</span><span class=\"s\">.&quot;</span> <span class=\"o\">%</span> <span class=\"n\">poll_id</span><span class=\"p\">)</span>\r\n\r\n<span class=\"k\">def</span> <span class=\"nf\">results</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">poll_id</span><span class=\"p\">):</span>\r\n    <span class=\"k\">return</span> <span class=\"n\">HttpResponse</span><span class=\"p\">(</span><span class=\"s\">&quot;You&#39;re looking at the results of poll </span><span class=\"si\">%s</span><span class=\"s\">.&quot;</span> <span class=\"o\">%</span> <span class=\"n\">poll_id</span><span class=\"p\">)</span>\r\n\r\n<span class=\"k\">def</span> <span class=\"nf\">vote</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">poll_id</span><span class=\"p\">):</span>\r\n    <span class=\"k\">return</span> <span class=\"n\">HttpResponse</span><span class=\"p\">(</span><span class=\"s\">&quot;You&#39;re voting on poll </span><span class=\"si\">%s</span><span class=\"s\">.&quot;</span> <span class=\"o\">%</span> <span class=\"n\">poll_id</span><span class=\"p\">)</span>\r\n</pre></div>\r\n</div>\r\n<p>Pod\u00edvejte se na &quot;/polls/34/&quot;. Na str\u00e1nce se v\u00e1m zobraz\u00ed takov\u00e9 ID, jak\u00e9</p>\r\n<p>Pod\u00edvejte se na &quot;/polls/34/&quot;. Nav\u0161t\u00edven\u00edm t\u00e9to adresy dojde ke spu\u0161t\u011bn\u00ed\r\nfunkce <cite>detail()</cite> a zobrazen\u00ed ID, kter\u00e9 zad\u00e1te v URL. Zkuste nav\u0161t\u00edvit\r\ni dal\u0161\u00ed adresy &quot;/polls/34/results/&quot; a &quot;/polls/34/vote/&quot; -- uk\u00e1\u017eou se\r\nv\u00e1m str\u00e1nky s v\u00fdsledky a hlasov\u00e1n\u00edm.</p>\r\n</div>\r\n<div class=\"section\" id=\"s-napi-te-views-kter-opravdu-n-co-d-laj\">\r\n<span id=\"napi-te-views-kter-opravdu-n-co-d-laj\"></span><h2>Napi\u0161te views, kter\u00e9 opravdu n\u011bco d\u011blaj\u00ed<a class=\"headerlink\" href=\"#napi-te-views-kter-opravdu-n-co-d-laj\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Ka\u017ed\u00e9 view je zodpov\u011bdn\u00e9 za jednu ze dvou v\u011bc\u00ed: vr\u00e1cen\u00ed objektu\r\n<a title=\"django.http.HttpResponse\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponse\"><tt class=\"xref docutils literal\"><span class=\"pre\">HttpResponse</span></tt></a> obsahuj\u00edc\u00edho vy\u017e\u00e1danou str\u00e1nku, nebo\r\nvyvol\u00e1n\u00ed vyj\u00edmky, nap\u0159. <tt class=\"xref docutils literal\"><span class=\"pre\">Http404</span></tt>. Zbytek je na v\u00e1s.</p>\r\n<p>Va\u0161e view m\u016f\u017ee \u010d\u00edst z\u00e1znamy z datab\u00e1ze, nebo tak\u00e9 ne. M\u016f\u017ee pou\u017e\u00edvat\r\n\u0161ablonov\u00fd syst\u00e9m Djanga -- nebo \u0161ablonov\u00fd syst\u00e9m t\u0159et\u00edch stran napsan\u00fd v\r\nPythonu -- nebo tak\u00e9 nemus\u00ed pou\u017e\u00edvat \u017e\u00e1dn\u00fd. M\u016f\u017ee vytv\u00e1\u0159et PDF soubor,\r\nvypisovat XML, vytv\u00e1\u0159et za chodu soubory ZIP, cokoli budete cht\u00edt, za\r\npou\u017eit\u00ed jak\u00fdchkoliv Python knihoven.</p>\r\n<p>Jedin\u00e9, co Django chce, je <a title=\"django.http.HttpResponse\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponse\"><tt class=\"xref docutils literal\"><span class=\"pre\">HttpResponse</span></tt></a>. Nebo\r\nvyj\u00edmku.</p>\r\n<p>Proto\u017ee jde o b\u011b\u017enou praxi, vyu\u017eijeme nyn\u00ed datab\u00e1zov\u00e9 API Djanga, kter\u00e9\r\njsme probrali v <a class=\"reference external\" href=\"/dokumentace/intro/tutorial01/#intro-tutorial01\"><em>prvn\u00ed \u010d\u00e1sti</em></a>. N\u00e1sleduj\u00edc\u00ed view\r\n<tt class=\"docutils literal\"><span class=\"pre\">index()</span></tt> zobraz\u00ed posledn\u00edch p\u011bt ot\u00e1zek z anket, odd\u011blen\u00fdch \u010d\u00e1rkami a\r\nse\u0159azen\u00fdch podle data publikov\u00e1n\u00ed:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"kn\">from</span> <span class=\"nn\">mysite.polls.models</span> <span class=\"kn\">import</span> <span class=\"n\">Poll</span>\r\n<span class=\"kn\">from</span> <span class=\"nn\">django.http</span> <span class=\"kn\">import</span> <span class=\"n\">HttpResponse</span>\r\n\r\n<span class=\"k\">def</span> <span class=\"nf\">index</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>\r\n    <span class=\"n\">latest_poll_list</span> <span class=\"o\">=</span> <span class=\"n\">Poll</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">order_by</span><span class=\"p\">(</span><span class=\"s\">&#39;-pub_date&#39;</span><span class=\"p\">)[:</span><span class=\"mf\">5</span><span class=\"p\">]</span>\r\n    <span class=\"n\">output</span> <span class=\"o\">=</span> <span class=\"s\">&#39;, &#39;</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">([</span><span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">question</span> <span class=\"k\">for</span> <span class=\"n\">p</span> <span class=\"ow\">in</span> <span class=\"n\">latest_poll_list</span><span class=\"p\">])</span>\r\n    <span class=\"k\">return</span> <span class=\"n\">HttpResponse</span><span class=\"p\">(</span><span class=\"n\">output</span><span class=\"p\">)</span>\r\n</pre></div>\r\n</div>\r\n<p>Toto \u0159e\u0161en\u00ed m\u00e1 ale jeden probl\u00e9m: Vzhled str\u00e1nky je &quot;zadr\u00e1tovan\u00fd&quot; p\u0159\u00edmo\r\ndo k\u00f3du view. Kdy\u017e budete cht\u00edt zm\u011bnit podobu str\u00e1nky, budete muset\r\nupravovat Python k\u00f3d. Lep\u0161\u00edm \u0159e\u0161en\u00edm je odd\u011blit vzhled od\r\nk\u00f3du s pomoc\u00ed \u0161ablonov\u00e9ho syst\u00e9mu Djanga:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"kn\">from</span> <span class=\"nn\">django.template</span> <span class=\"kn\">import</span> <span class=\"n\">Context</span><span class=\"p\">,</span> <span class=\"n\">loader</span>\r\n<span class=\"kn\">from</span> <span class=\"nn\">mysite.polls.models</span> <span class=\"kn\">import</span> <span class=\"n\">Poll</span>\r\n<span class=\"kn\">from</span> <span class=\"nn\">django.http</span> <span class=\"kn\">import</span> <span class=\"n\">HttpResponse</span>\r\n\r\n<span class=\"k\">def</span> <span class=\"nf\">index</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>\r\n    <span class=\"n\">latest_poll_list</span> <span class=\"o\">=</span> <span class=\"n\">Poll</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">order_by</span><span class=\"p\">(</span><span class=\"s\">&#39;-pub_date&#39;</span><span class=\"p\">)[:</span><span class=\"mf\">5</span><span class=\"p\">]</span>\r\n    <span class=\"n\">t</span> <span class=\"o\">=</span> <span class=\"n\">loader</span><span class=\"o\">.</span><span class=\"n\">get_template</span><span class=\"p\">(</span><span class=\"s\">&#39;polls/index.html&#39;</span><span class=\"p\">)</span>\r\n    <span class=\"n\">c</span> <span class=\"o\">=</span> <span class=\"n\">Context</span><span class=\"p\">({</span>\r\n        <span class=\"s\">&#39;latest_poll_list&#39;</span><span class=\"p\">:</span> <span class=\"n\">latest_poll_list</span><span class=\"p\">,</span>\r\n    <span class=\"p\">})</span>\r\n    <span class=\"k\">return</span> <span class=\"n\">HttpResponse</span><span class=\"p\">(</span><span class=\"n\">t</span><span class=\"o\">.</span><span class=\"n\">render</span><span class=\"p\">(</span><span class=\"n\">c</span><span class=\"p\">))</span>\r\n</pre></div>\r\n</div>\r\n<p>Tento k\u00f3d na\u010dte \u0161ablonu nazvanou &quot;polls/index.html&quot; a p\u0159ed\u00e1 j\u00ed kontext,\r\nco\u017e je slovn\u00edk, kter\u00fd mapuje \u0161ablonov\u00e9 prom\u011bnn\u00e9 na objekty Pythonu.</p>\r\n<p>Znovu ve sv\u00e9m prohl\u00ed\u017ee\u010di na\u010dt\u011bte str\u00e1nku. Chybov\u00e1 hl\u00e1\u0161ka se zm\u011bn\u00ed:</p>\r\n<div class=\"highlight-python\"><pre>TemplateDoesNotExist at /polls/\r\npolls/index.html</pre>\r\n</div>\r\n<p>Aha. Je\u0161t\u011b jsme nenapsali \u0161ablonu! Poj\u010fme tedy na to. Nejprve vytvo\u0159te\r\nadres\u00e1\u0159, kam bude m\u00edt Django p\u0159\u00edstup. (Django b\u011b\u017e\u00ed pod u\u017eivatelsk\u00fdm\r\njm\u00e9nem va\u0161eho serveru.) Ned\u00e1vejte jej ale p\u0159\u00edmo pod ko\u0159enov\u00fd adres\u00e1\u0159\r\nwebov\u00e9ho serveru. Nen\u00ed dobr\u00e9 zp\u0159\u00edstup\u0148ovat \u0161ablony ve\u0159ejnosti. Kdy\u017e u\u017e\r\npro nic jin\u00e9ho, tak pro pocit v\u011bt\u0161\u00ed bezpe\u010dnosti va\u0161\u00ed aplikace. Upravte\r\n<a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-TEMPLATE_DIRS\"><tt class=\"xref docutils literal\"><span class=\"pre\">TEMPLATE_DIRS</span></tt></a> v souboru <tt class=\"docutils literal\"><span class=\"pre\">settings.py</span></tt> tak, aby Django\r\nv\u011bd\u011blo, kde m\u00e1 hledat \u0161ablony -- stejn\u011b jako jste to ud\u011blali v druh\u00e9\r\n\u010d\u00e1sti n\u00e1vodu (viz kapitola &quot;Upravte si kompletn\u00ed vzhled prost\u0159ed\u00ed&quot;).</p>\r\n<p>D\u00e1le vytvo\u0159te podadres\u00e1\u0159 <tt class=\"docutils literal\"><span class=\"pre\">polls</span></tt> a um\u00edst\u011bte do n\u011bj soubor\r\n<tt class=\"docutils literal\"><span class=\"pre\">index.html</span></tt>. Pozn\u00e1mka: v\u00fd\u0161e uveden\u00fd k\u00f3d\r\n<tt class=\"docutils literal\"><span class=\"pre\">loader.get_template('polls/index.html')</span></tt> je nasm\u011brov\u00e1n na\r\n&quot;[template_directory]/polls/index.html&quot;.</p>\r\n<p>Do \u0161ablony vlo\u017ete n\u00e1sleduj\u00edc\u00ed:</p>\r\n<div class=\"highlight-html+django\"><div class=\"highlight\"><pre><span class=\"cp\">{%</span> <span class=\"k\">if</span> <span class=\"nv\">latest_poll_list</span> <span class=\"cp\">%}</span>\r\n    <span class=\"nt\">&lt;ul&gt;</span>\r\n    <span class=\"cp\">{%</span> <span class=\"k\">for</span> <span class=\"nv\">poll</span> <span class=\"k\">in</span> <span class=\"nv\">latest_poll_list</span> <span class=\"cp\">%}</span>\r\n        <span class=\"nt\">&lt;li&gt;&lt;a</span> <span class=\"na\">href=</span><span class=\"s\">&quot;/polls/</span><span class=\"cp\">{{</span> <span class=\"nv\">poll.id</span> <span class=\"cp\">}}</span><span class=\"s\">/&quot;</span><span class=\"nt\">&gt;</span><span class=\"cp\">{{</span> <span class=\"nv\">poll.question</span> <span class=\"cp\">}}</span><span class=\"nt\">&lt;/a&gt;&lt;/li&gt;</span>\r\n    <span class=\"cp\">{%</span> <span class=\"k\">endfor</span> <span class=\"cp\">%}</span>\r\n    <span class=\"nt\">&lt;/ul&gt;</span>\r\n<span class=\"cp\">{%</span> <span class=\"k\">else</span> <span class=\"cp\">%}</span>\r\n    <span class=\"nt\">&lt;p&gt;</span>No polls are available.<span class=\"nt\">&lt;/p&gt;</span>\r\n<span class=\"cp\">{%</span> <span class=\"k\">endif</span> <span class=\"cp\">%}</span>\r\n</pre></div>\r\n</div>\r\n<p>Na\u010dt\u011bte znovu str\u00e1nku ve sv\u00e9m prohl\u00ed\u017ee\u010di a uvid\u00edte seznam s\r\nodr\u00e1\u017ekami obsahuj\u00edc\u00ed anketu &quot;What's up&quot; z prvn\u00ed \u010d\u00e1sti n\u00e1vodu.\r\nJednotliv\u00e9 odkazy povedou na str\u00e1nku s detailem ankety.</p>\r\n<div class=\"section\" id=\"s-zjednodu-en-render-to-response\">\r\n<span id=\"zjednodu-en-render-to-response\"></span><h3>Zjednodu\u0161en\u00ed: render_to_response()<a class=\"headerlink\" href=\"#zjednodu-en-render-to-response\" title=\"Permalink na tento nadpis\">\u00b6</a></h3>\r\n<p>B\u011b\u017en\u00fd postup je na\u010d\u00edst \u0161ablonu, naplnit kontext a vr\u00e1tit objekt\r\n<a title=\"django.http.HttpResponse\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponse\"><tt class=\"xref docutils literal\"><span class=\"pre\">HttpResponse</span></tt></a> s vykreslen\u00fdm obsahem \u0161ablony. Django\r\npro tyto p\u0159\u00edpady nab\u00edz\u00ed praktickou zkratku:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"kn\">from</span> <span class=\"nn\">django.shortcuts</span> <span class=\"kn\">import</span> <span class=\"n\">render_to_response</span>\r\n<span class=\"kn\">from</span> <span class=\"nn\">mysite.polls.models</span> <span class=\"kn\">import</span> <span class=\"n\">Poll</span>\r\n\r\n<span class=\"k\">def</span> <span class=\"nf\">index</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>\r\n    <span class=\"n\">latest_poll_list</span> <span class=\"o\">=</span> <span class=\"n\">Poll</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">order_by</span><span class=\"p\">(</span><span class=\"s\">&#39;-pub_date&#39;</span><span class=\"p\">)[:</span><span class=\"mf\">5</span><span class=\"p\">]</span>\r\n    <span class=\"k\">return</span> <span class=\"n\">render_to_response</span><span class=\"p\">(</span><span class=\"s\">&#39;polls/index.html&#39;</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s\">&#39;latest_poll_list&#39;</span><span class=\"p\">:</span> <span class=\"n\">latest_poll_list</span><span class=\"p\">})</span>\r\n</pre></div>\r\n</div>\r\n<p>Pozn\u00e1mka: Pokud takto uprav\u00edme v\u0161echna view, u\u017e nemus\u00edme importovat\r\n<tt class=\"xref docutils literal\"><span class=\"pre\">loader</span></tt>, <tt class=\"xref docutils literal\"><span class=\"pre\">Context</span></tt> a\r\n<a title=\"django.http.HttpResponse\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponse\"><tt class=\"xref docutils literal\"><span class=\"pre\">HttpResponse</span></tt></a>.</p>\r\n<p>Funkce <a title=\"django.shortcuts.render_to_response\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/http/shortcuts/#django.shortcuts.render_to_response\"><tt class=\"xref docutils literal\"><span class=\"pre\">render_to_response()</span></tt></a> p\u0159ij\u00edm\u00e1 jako prvn\u00ed\r\nargument jm\u00e9no \u0161ablony a jako druh\u00fd (nepovinn\u00fd) argument slovn\u00edk.\r\nV\u00fdstupem z funkce je objekt <a title=\"django.http.HttpResponse\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponse\"><tt class=\"xref docutils literal\"><span class=\"pre\">HttpResponse</span></tt></a> s\r\n\u0161ablonou vykreslenou podle dodan\u00fdch kontextov\u00fdch prom\u011bnn\u00fdch.</p>\r\n</div>\r\n</div>\r\n<div class=\"section\" id=\"s-vyvol-n-404\">\r\n<span id=\"vyvol-n-404\"></span><h2>Vyvol\u00e1n\u00ed 404<a class=\"headerlink\" href=\"#vyvol-n-404\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Te\u010f se pod\u00edv\u00e1me na view pro detail ankety -- str\u00e1nku, kter\u00e1 zobrazuje\r\not\u00e1zku dan\u00e9 ankety:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"kn\">from</span> <span class=\"nn\">django.http</span> <span class=\"kn\">import</span> <span class=\"n\">Http404</span>\r\n<span class=\"c\"># ...</span>\r\n<span class=\"k\">def</span> <span class=\"nf\">detail</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">poll_id</span><span class=\"p\">):</span>\r\n    <span class=\"k\">try</span><span class=\"p\">:</span>\r\n        <span class=\"n\">p</span> <span class=\"o\">=</span> <span class=\"n\">Poll</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">pk</span><span class=\"o\">=</span><span class=\"n\">poll_id</span><span class=\"p\">)</span>\r\n    <span class=\"k\">except</span> <span class=\"n\">Poll</span><span class=\"o\">.</span><span class=\"n\">DoesNotExist</span><span class=\"p\">:</span>\r\n        <span class=\"k\">raise</span> <span class=\"n\">Http404</span>\r\n    <span class=\"k\">return</span> <span class=\"n\">render_to_response</span><span class=\"p\">(</span><span class=\"s\">&#39;polls/detail.html&#39;</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s\">&#39;poll&#39;</span><span class=\"p\">:</span> <span class=\"n\">p</span><span class=\"p\">})</span>\r\n</pre></div>\r\n</div>\r\n<p>Tady je k\u00f3d zrealizov\u00e1n n\u00e1sledovn\u011b: view vyvol\u00e1 v\u00fdj\u00edmku\r\n<tt class=\"xref docutils literal\"><span class=\"pre\">Http404</span></tt>, pokud anketa s po\u017eadovan\u00fdm ID neexistuje.</p>\r\n<p>Za chv\u00edli se budeme podrobn\u011bji v\u011bnovat tomu, \u010d\u00edm naplnit soubor\r\n<tt class=\"docutils literal\"><span class=\"pre\">polls/detail.html</span></tt>, aby na\u0161e view p\u011bkn\u011b fungovalo. Pokud jej ale\r\nchcete rychle zprovoznit, vlo\u017ete do n\u011bj:</p>\r\n<div class=\"highlight-python\"><pre>{{ poll }}</pre>\r\n</div>\r\n<p>(pro tentokr\u00e1t to sta\u010d\u00ed).</p>\r\n<div class=\"section\" id=\"s-zkratka-get-object-or-404\">\r\n<span id=\"zkratka-get-object-or-404\"></span><h3>Zkratka: get_object_or_404()<a class=\"headerlink\" href=\"#zkratka-get-object-or-404\" title=\"Permalink na tento nadpis\">\u00b6</a></h3>\r\n<p>B\u011b\u017en\u00fd postupem je vyt\u00e1hnout objekt z datab\u00e1ze pomoc\u00ed vol\u00e1n\u00ed\r\n<a title=\"django.db.models.QuerySet.get\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.QuerySet.get\"><tt class=\"xref docutils literal\"><span class=\"pre\">get()</span></tt></a>, a v p\u0159\u00edpad\u011b \u017ee neexistuje\r\nvyvolat vyj\u00edmku <tt class=\"xref docutils literal\"><span class=\"pre\">Http404</span></tt>. Django nab\u00edz\u00ed p\u0159\u00edjemnou\r\nzkratku:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"kn\">from</span> <span class=\"nn\">django.shortcuts</span> <span class=\"kn\">import</span> <span class=\"n\">render_to_response</span><span class=\"p\">,</span> <span class=\"n\">get_object_or_404</span>\r\n<span class=\"c\"># ...</span>\r\n<span class=\"k\">def</span> <span class=\"nf\">detail</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">poll_id</span><span class=\"p\">):</span>\r\n    <span class=\"n\">p</span> <span class=\"o\">=</span> <span class=\"n\">get_object_or_404</span><span class=\"p\">(</span><span class=\"n\">Poll</span><span class=\"p\">,</span> <span class=\"n\">pk</span><span class=\"o\">=</span><span class=\"n\">poll_id</span><span class=\"p\">)</span>\r\n    <span class=\"k\">return</span> <span class=\"n\">render_to_response</span><span class=\"p\">(</span><span class=\"s\">&#39;polls/detail.html&#39;</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s\">&#39;poll&#39;</span><span class=\"p\">:</span> <span class=\"n\">p</span><span class=\"p\">})</span>\r\n</pre></div>\r\n</div>\r\n<p>Funkce <a title=\"django.shortcuts.get_object_or_404\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/http/shortcuts/#django.shortcuts.get_object_or_404\"><tt class=\"xref docutils literal\"><span class=\"pre\">get_object_or_404()</span></tt></a> p\u0159ij\u00edm\u00e1 jako prvn\u00ed\r\nargument model Djanga, a na dal\u0161\u00edch pozic\u00edch libovoln\u00fd po\u010det argument\u016f ,\r\nkter\u00e9 se p\u0159edaj\u00ed funkci <a title=\"django.db.models.QuerySet.get\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.QuerySet.get\"><tt class=\"xref docutils literal\"><span class=\"pre\">get()</span></tt></a>. Pokud se\r\npodle dodan\u00fdch parametr\u016f objekt nenalezne, vyvol\u00e1 se vyj\u00edmka\r\n<tt class=\"xref docutils literal\"><span class=\"pre\">Http404</span></tt>.</p>\r\n<div class=\"admonition-zamy-len admonition \">\r\n<p class=\"first admonition-title\">Zamy\u0161len\u00ed</p>\r\n<p>Pro\u010d pou\u017e\u00edv\u00e1me pomocnou funkci\r\n<a title=\"django.shortcuts.get_object_or_404\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/http/shortcuts/#django.shortcuts.get_object_or_404\"><tt class=\"xref docutils literal\"><span class=\"pre\">get_object_or_404()</span></tt></a> nam\u00edsto automatick\u00e9ho\r\nzachyt\u00e1v\u00e1n\u00ed vyj\u00edmek\r\n<tt class=\"xref docutils literal\"><span class=\"pre\">ObjectDoesNotExist</span></tt> na vy\u0161\u0161\u00ed \u00farovni,\r\nanebo pro\u010d model rovnou nevyvol\u00e1 vyj\u00edmku <tt class=\"xref docutils literal\"><span class=\"pre\">Http404</span></tt>\r\nnam\u00edsto <tt class=\"xref docutils literal\"><span class=\"pre\">ObjectDoesNotExist</span></tt>?</p>\r\n<p class=\"last\">Proto\u017ee by se vrstva modelu a pohledu (views) propojila vazbou.\r\nJedn\u00edm z hlavn\u00edch c\u00edl\u016f Djanga je udr\u017eovat podobn\u00e9 vazby co\r\nnejslab\u0161\u00ed (proto\u017ee pak je mnohem snadn\u011bj\u0161\u00ed nahradit ur\u010ditou funk\u010dn\u00ed\r\n\u010d\u00e1st jinou).</p>\r\n</div>\r\n<p>Existuje tak\u00e9 funkce <a title=\"django.shortcuts.get_list_or_404\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/http/shortcuts/#django.shortcuts.get_list_or_404\"><tt class=\"xref docutils literal\"><span class=\"pre\">get_list_or_404()</span></tt></a>, kter\u00e1\r\nfunguje stejn\u011b jako <a title=\"django.shortcuts.get_object_or_404\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/http/shortcuts/#django.shortcuts.get_object_or_404\"><tt class=\"xref docutils literal\"><span class=\"pre\">get_object_or_404()</span></tt></a> -- s t\u00edm\r\nrozd\u00edlem, \u017ee pou\u017e\u00edv\u00e1 metodu <a title=\"django.db.models.QuerySet.filter\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.QuerySet.filter\"><tt class=\"xref docutils literal\"><span class=\"pre\">filter()</span></tt></a>\r\nnam\u00edsto <a title=\"django.db.models.QuerySet.get\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.QuerySet.get\"><tt class=\"xref docutils literal\"><span class=\"pre\">get()</span></tt></a>. Funkce\r\n<a title=\"django.shortcuts.get_list_or_404\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/http/shortcuts/#django.shortcuts.get_list_or_404\"><tt class=\"xref docutils literal\"><span class=\"pre\">get_list_or_404()</span></tt></a> vyvol\u00e1 vyj\u00edmku\r\n<tt class=\"xref docutils literal\"><span class=\"pre\">Http404</span></tt> pokud je seznam pr\u00e1zdn\u00fd.</p>\r\n</div>\r\n</div>\r\n<div class=\"section\" id=\"s-napi-te-view-pro-404-str-nka-nenalezena\">\r\n<span id=\"napi-te-view-pro-404-str-nka-nenalezena\"></span><h2>Napi\u0161te view pro 404 (str\u00e1nka nenalezena)<a class=\"headerlink\" href=\"#napi-te-view-pro-404-str-nka-nenalezena\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Kdy\u017e je vyvol\u00e1no <tt class=\"xref docutils literal\"><span class=\"pre\">Http404</span></tt>, Django na\u010dte speci\u00e1ln\u00ed\r\nview ur\u010den\u00e9 pro zpracov\u00e1v\u00e1n\u00ed vyj\u00edmek 404. Toto view se hled\u00e1 v prom\u011bnn\u00e9\r\n<tt class=\"docutils literal\"><span class=\"pre\">handler404</span></tt>, co\u017e je \u0159et\u011bzec v te\u010dkovan\u00e9 syntaxi Pythonu -- ve stejn\u00e9m\r\nform\u00e1tu jak\u00fd pou\u017e\u00edvaj\u00ed URLconf callback funkce. Na view 404 nen\u00ed nic\r\nzvl\u00e1\u0161tn\u00edho: Je to prachoby\u010dejn\u00e9 view.</p>\r\n<p>Psan\u00edm view pro 404 se b\u011b\u017en\u011b nemus\u00edte zab\u00fdvat. Soubory URLconf standardn\u011b\r\nza\u010d\u00ednaj\u00ed \u0159\u00e1dkem:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"kn\">from</span> <span class=\"nn\">django.conf.urls.defaults</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\r\n</pre></div>\r\n</div>\r\n<p>T\u00edmto zp\u016fsobem dojde automaticky k nastaven\u00ed <tt class=\"docutils literal\"><span class=\"pre\">handler404</span></tt>.  Jak se\r\nm\u016f\u017eete sami p\u0159esv\u011bd\u010dit, v souboru <tt class=\"docutils literal\"><span class=\"pre\">django/conf/urls/defaults.py</span></tt> je\r\n<tt class=\"docutils literal\"><span class=\"pre\">handler404</span></tt> standardn\u011b nastaven na\r\n<tt class=\"xref docutils literal\"><span class=\"pre\">django.views.defaults.page_not_found()</span></tt>.</p>\r\n<p>Posledn\u00ed \u010dty\u0159i pozn\u00e1mky k view 404:</p>\r\n<ul class=\"simple\">\r\n<li>Pokud je <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-DEBUG\"><tt class=\"xref docutils literal\"><span class=\"pre\">DEBUG</span></tt></a> nastaveno na <tt class=\"xref docutils literal\"><span class=\"pre\">True</span></tt> (v souboru <tt class=\"docutils literal\"><span class=\"pre\">settings.py</span></tt>),\r\npak va\u0161e view 404 nebude nikdy pou\u017eito (a \u0161ablona <tt class=\"docutils literal\"><span class=\"pre\">404.html</span></tt> nebude nikdy\r\nvykreslena). M\u00edsto n\u011bj se v\u00e1m uk\u00e1\u017ee &quot;traceback&quot;.</li>\r\n<li>Pokud Django nenajde shodu s regul\u00e1rn\u00edmi v\u00fdrazy v souboru URLconf,\r\nje vyvol\u00e1no view 404.</li>\r\n<li>Pokud nedefinujete vlastn\u00ed view pro 404 -- a pou\u017eijete\r\nv\u00fdchoz\u00ed (co\u017e se doporu\u010duje) -- stejn\u011b mus\u00edte ud\u011blat jednu v\u011bc:\r\nVytvo\u0159it \u0161ablonu <tt class=\"docutils literal\"><span class=\"pre\">404.html</span></tt> v ko\u0159enov\u00e9m adres\u00e1\u0159i \u0161ablon. V\u00fdchoz\u00ed\r\nview 404 pou\u017eije tuto \u0161ablonu pro v\u0161echny chyby 404.</li>\r\n<li>Pokud je volba <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#setting-DEBUG\"><tt class=\"xref docutils literal\"><span class=\"pre\">DEBUG</span></tt></a> (v souboru <tt class=\"docutils literal\"><span class=\"pre\">settings.py</span></tt>)\r\nnastavena na <tt class=\"xref docutils literal\"><span class=\"pre\">False</span></tt> a nem\u00e1te vytvo\u0159enu \u0161ablonu <tt class=\"docutils literal\"><span class=\"pre\">404.html</span></tt>, vyvol\u00e1\r\nse vyj\u00edmka <tt class=\"docutils literal\"><span class=\"pre\">Http500</span></tt>. Moudr\u00e9 v\u011bdmy proto rad\u00ed: nezapom\u011b\u0148te si vytvo\u0159it\r\n\u0161ablonu <tt class=\"docutils literal\"><span class=\"pre\">404.html</span></tt>!</li>\r\n</ul>\r\n</div>\r\n<div class=\"section\" id=\"s-napi-te-view-500-chyba-serveru\">\r\n<span id=\"napi-te-view-500-chyba-serveru\"></span><h2>Napi\u0161te view 500 (chyba serveru)<a class=\"headerlink\" href=\"#napi-te-view-500-chyba-serveru\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Podobn\u011b m\u016f\u017ee b\u00fdt v souborech URLconf definov\u00e1n <tt class=\"docutils literal\"><span class=\"pre\">handler500</span></tt>, ukazuj\u00edc\u00ed\r\nna view, kter\u00e9 se vol\u00e1 v p\u0159\u00edpad\u011b chyby serveru. Chyby serveru mohou\r\nnastat, pokud se ve va\u0161em k\u00f3du objev\u00ed runtime chyby.</p>\r\n</div>\r\n<div class=\"section\" id=\"s-pou-vejte-ablonov-syst-m\">\r\n<span id=\"pou-vejte-ablonov-syst-m\"></span><h2>Pou\u017e\u00edvejte \u0161ablonov\u00fd syst\u00e9m<a class=\"headerlink\" href=\"#pou-vejte-ablonov-syst-m\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Vra\u0165me se k view <tt class=\"docutils literal\"><span class=\"pre\">detail()</span></tt> z na\u0161\u00ed anketn\u00ed aplikace. S kontextovou\r\nprom\u011bnnou <tt class=\"docutils literal\"><span class=\"pre\">poll</span></tt> (obsahuj\u00edc\u00ed konkr\u00e9tn\u00ed objekt modelu Poll) by\r\n\u0161ablona &quot;polls/detail.html&quot; mohla nalo\u017eit nap\u0159\u00edklad takto:</p>\r\n<div class=\"highlight-html+django\"><div class=\"highlight\"><pre><span class=\"nt\">&lt;h1&gt;</span><span class=\"cp\">{{</span> <span class=\"nv\">poll.question</span> <span class=\"cp\">}}</span><span class=\"nt\">&lt;/h1&gt;</span>\r\n<span class=\"nt\">&lt;ul&gt;</span>\r\n<span class=\"cp\">{%</span> <span class=\"k\">for</span> <span class=\"nv\">choice</span> <span class=\"k\">in</span> <span class=\"nv\">poll.choice_set.all</span> <span class=\"cp\">%}</span>\r\n    <span class=\"nt\">&lt;li&gt;</span><span class=\"cp\">{{</span> <span class=\"nv\">choice.choice</span> <span class=\"cp\">}}</span><span class=\"nt\">&lt;/li&gt;</span>\r\n<span class=\"cp\">{%</span> <span class=\"k\">endfor</span> <span class=\"cp\">%}</span>\r\n<span class=\"nt\">&lt;/ul&gt;</span>\r\n</pre></div>\r\n</div>\r\n<p>\u0160ablonov\u00fd syst\u00e9m pou\u017e\u00edv\u00e1 &quot;te\u010dkovac\u00ed&quot; syntaxi pro p\u0159\u00edstup k prom\u011bnn\u00fdm\r\nobjektu. K v\u00fdrazu <tt class=\"docutils literal\"><span class=\"pre\">{{</span> <span class=\"pre\">poll.question</span> <span class=\"pre\">}}</span></tt> Django nejprve p\u0159istoup\u00ed tak,\r\njako by se jednalo o slovn\u00edk, ve kter\u00e9m hled\u00e1 pat\u0159i\u010dn\u00fd kl\u00ed\u010d.  Pokud se\r\nmu to nepovede, pokus\u00ed se v objektu nal\u00e9zt atribut -- co\u017e v tomto\r\np\u0159\u00edpad\u011b funguje. Naposledy se pokus\u00ed zavolat metodu <tt class=\"docutils literal\"><span class=\"pre\">question()</span></tt> na\r\nobjektu poll.</p>\r\n<p>Vol\u00e1n\u00ed metody se uskute\u010d\u0148uje ve smy\u010dce <tt class=\"docutils literal\"><span class=\"pre\">{%</span> <span class=\"pre\">for</span> <span class=\"pre\">%}</span></tt>:\r\nv\u00fdraz <tt class=\"docutils literal\"><span class=\"pre\">poll.choice_set.all</span></tt> je br\u00e1n jako Python k\u00f3d\r\n<tt class=\"docutils literal\"><span class=\"pre\">poll.choice_set.all()</span></tt>. Ten vr\u00e1t\u00ed iter\u00e1tor nad objekty voleb\r\n(Choice), se kter\u00fdm n\u00e1sledn\u011b m\u016f\u017ee tag <tt class=\"docutils literal\"><span class=\"pre\">{%</span> <span class=\"pre\">for</span> <span class=\"pre\">%}</span></tt> bez probl\u00e9m\u016f pracovat. V\u00edce\r\ninformac\u00ed o \u0161ablon\u00e1ch naleznete v <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/templates/#topics-templates\"><em>jejich pr\u016fvodci</em></a>.</p>\r\n</div>\r\n<div class=\"section\" id=\"s-zjednodu-en-soubor-urlconf\">\r\n<span id=\"zjednodu-en-soubor-urlconf\"></span><h2>Zjednodu\u0161en\u00ed soubor\u016f URLconf<a class=\"headerlink\" href=\"#zjednodu-en-soubor-urlconf\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Zkuste si te\u010f sami pohr\u00e1t s vytv\u00e1\u0159en\u00ed views a \u0161ablon, a\u0165 s jejich\r\npou\u017e\u00edv\u00e1n\u00ed dostanete cvik. B\u011bhem toho si mo\u017en\u00e1 v\u0161imnete, \u017ee v souboru\r\nURLconf se zbyte\u010dn\u011b opakuj\u00ed n\u011bkter\u00e9 shodn\u00e9 \u010d\u00e1sti:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"n\">patterns</span><span class=\"p\">(</span><span class=\"s\">&#39;&#39;</span><span class=\"p\">,</span>\r\n    <span class=\"p\">(</span><span class=\"s\">r&#39;^polls/$&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;mysite.polls.views.index&#39;</span><span class=\"p\">),</span>\r\n    <span class=\"p\">(</span><span class=\"s\">r&#39;^polls/(?P&lt;poll_id&gt;\\d+)/$&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;mysite.polls.views.detail&#39;</span><span class=\"p\">),</span>\r\n    <span class=\"p\">(</span><span class=\"s\">r&#39;^polls/(?P&lt;poll_id&gt;\\d+)/results/$&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;mysite.polls.views.results&#39;</span><span class=\"p\">),</span>\r\n    <span class=\"p\">(</span><span class=\"s\">r&#39;^polls/(?P&lt;poll_id&gt;\\d+)/vote/$&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;mysite.polls.views.vote&#39;</span><span class=\"p\">),</span>\r\n<span class=\"p\">)</span>\r\n</pre></div>\r\n</div>\r\n<p>Abychom byli p\u0159esn\u00ed, v ka\u017ed\u00e9m callbacku se objevuje\r\n<tt class=\"docutils literal\"><span class=\"pre\">mysite.polls.views</span></tt>.</p>\r\n<p>Proto\u017ee jsou podobn\u00e9 situace docela b\u011b\u017en\u00e9, framework pro URLconf nab\u00edz\u00ed\r\npro neust\u00e1le se opakuj\u00edc\u00ed p\u0159edpony zjednodu\u0161en\u00ed. Shodn\u00e9 p\u0159edpony m\u016f\u017eete\r\nvyjmout a dosadit je jako prvn\u00ed argument ve funkci\r\n<tt class=\"xref docutils literal\"><span class=\"pre\">patterns()</span></tt>. T\u0159eba takto:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"n\">patterns</span><span class=\"p\">(</span><span class=\"s\">&#39;mysite.polls.views&#39;</span><span class=\"p\">,</span>\r\n    <span class=\"p\">(</span><span class=\"s\">r&#39;^polls/$&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;index&#39;</span><span class=\"p\">),</span>\r\n    <span class=\"p\">(</span><span class=\"s\">r&#39;^polls/(?P&lt;poll_id&gt;\\d+)/$&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;detail&#39;</span><span class=\"p\">),</span>\r\n    <span class=\"p\">(</span><span class=\"s\">r&#39;^polls/(?P&lt;poll_id&gt;\\d+)/results/$&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;results&#39;</span><span class=\"p\">),</span>\r\n    <span class=\"p\">(</span><span class=\"s\">r&#39;^polls/(?P&lt;poll_id&gt;\\d+)/vote/$&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;vote&#39;</span><span class=\"p\">),</span>\r\n<span class=\"p\">)</span>\r\n</pre></div>\r\n</div>\r\n<p>Z funk\u010dn\u00edho hlediska jde o identick\u00fd k\u00f3d. Druh\u00fd zp\u016fsob je ale\r\np\u0159ehledn\u011bj\u0161\u00ed.</p>\r\n</div>\r\n<div class=\"section\" id=\"s-odd-lov-n-soubor-urlconf\">\r\n<span id=\"odd-lov-n-soubor-urlconf\"></span><h2>Odd\u011blov\u00e1n\u00ed soubor\u016f URLconf<a class=\"headerlink\" href=\"#odd-lov-n-soubor-urlconf\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Kdy\u017e u\u017e jsme u toho, m\u011bli bychom tak\u00e9 odd\u011blit URL adresy na\u0161\u00ed aplikace\r\nod konfigurace Django projektu. Django aplikace maj\u00ed b\u00fdt z\u00e1suvn\u00e9 -- co\u017e\r\nznamen\u00e1, \u017ee jak\u00e1koliv aplikace by se m\u011bla d\u00e1t p\u0159en\u00e9st do jin\u00e9\r\ninstalace Djanga s minim\u00e1ln\u00edmi komplikacemi.</p>\r\n<p>Na\u0161e aplikace je na dobr\u00e9 cest\u011b, d\u00edky striktn\u00ed adres\u00e1\u0159ov\u00e9 struktu\u0159e\r\nvytvo\u0159en\u00e9 pomoc\u00ed <tt class=\"docutils literal\"><span class=\"pre\">python</span> <span class=\"pre\">manage.py</span> <span class=\"pre\">startapp</span></tt>, ale jedna jej\u00ed \u010d\u00e1st je\r\nnapevno spojena s nastaven\u00edm Djanga: URLconf.</p>\r\n<p>URL adresy jsme upravovali v souboru <tt class=\"docutils literal\"><span class=\"pre\">mysite/urls.py</span></tt>, ale design URL\r\nadres by m\u011bl b\u00fdt specifick\u00fd pro aplikaci a ne pro celou Django instalaci\r\n-- tak\u017ee p\u0159esuneme URL adresy do adres\u00e1\u0159e s aplikac\u00ed.</p>\r\n<p>Zkop\u00edrujte soubor <tt class=\"docutils literal\"><span class=\"pre\">mysite/urls.py</span></tt> do <tt class=\"docutils literal\"><span class=\"pre\">mysite/polls/urls.py</span></tt>. Ze\r\nsouboru <tt class=\"docutils literal\"><span class=\"pre\">mysite/urls.py</span></tt> odstra\u0148te URL adresy specifick\u00e9 pro anketn\u00ed\r\naplikaci a vlo\u017ete m\u00edsto nich\r\n<tt class=\"xref docutils literal\"><span class=\"pre\">include()</span></tt>:</p>\r\n<div class=\"highlight-python\"><pre># ...\r\n    urlpatterns = patterns('',\r\n        (r'^polls/', include('mysite.polls.urls')),\r\n        # ...</pre>\r\n</div>\r\n<p><tt class=\"xref docutils literal\"><span class=\"pre\">include()</span></tt> odkazuje na jin\u00fd URLconf.\r\nV\u0161imn\u011bte si, \u017ee regul\u00e1rn\u00ed v\u00fdraz nekon\u010d\u00ed znakem <tt class=\"docutils literal\"><span class=\"pre\">$</span></tt> (znak pro konec\r\n\u0159et\u011bzce), ale lom\u00edtkem. Kdy\u017e se Django setk\u00e1 s\r\n<tt class=\"xref docutils literal\"><span class=\"pre\">include()</span></tt>, odd\u011bl\u00ed \u010d\u00e1st URL, kter\u00e1 se do\r\nt\u00e9 doby shodovala a zbytek ode\u0161le do odkazovan\u00e9ho souboru URLconf pro\r\ndal\u0161\u00ed zpracov\u00e1n\u00ed.</p>\r\n<p>Kdyby u\u017eivatel zadal adresu &quot;/polls/34/&quot;, stalo by se toto:</p>\r\n<ul class=\"simple\">\r\n<li>Django najde shodu v <tt class=\"docutils literal\"><span class=\"pre\">'^polls/'</span></tt></li>\r\n<li>Pak vyjme shoduj\u00edc\u00ed se text (<tt class=\"docutils literal\"><span class=\"pre\">&quot;polls/&quot;</span></tt>) a ode\u0161le jeho zbytek\r\n-- <tt class=\"docutils literal\"><span class=\"pre\">&quot;34/&quot;</span></tt> -- do souboru 'mysite.polls.urls' pro dal\u0161\u00ed\r\nzpracov\u00e1n\u00ed.</li>\r\n</ul>\r\n<p>Te\u010f je\u0161t\u011b mus\u00edme odstranit &quot;polls/&quot; z ka\u017ed\u00e9ho \u0159\u00e1dku URLconf v souboru\r\n'mysite.polls.urls' a smazat \u0159\u00e1dky registruj\u00edc\u00ed administra\u010dn\u00ed rozhran\u00ed:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"n\">patterns</span><span class=\"p\">(</span><span class=\"s\">&#39;mysite.polls.views&#39;</span><span class=\"p\">,</span>\r\n    <span class=\"p\">(</span><span class=\"s\">r&#39;^$&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;index&#39;</span><span class=\"p\">),</span>\r\n    <span class=\"p\">(</span><span class=\"s\">r&#39;^(?P&lt;poll_id&gt;\\d+)/$&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;detail&#39;</span><span class=\"p\">),</span>\r\n    <span class=\"p\">(</span><span class=\"s\">r&#39;^(?P&lt;poll_id&gt;\\d+)/results/$&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;results&#39;</span><span class=\"p\">),</span>\r\n    <span class=\"p\">(</span><span class=\"s\">r&#39;^(?P&lt;poll_id&gt;\\d+)/vote/$&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;vote&#39;</span><span class=\"p\">),</span>\r\n<span class=\"p\">)</span>\r\n</pre></div>\r\n</div>\r\n<p>My\u0161lenka rozdd\u011blen\u00ed souboru URLconf a pou\u017eit\u00ed\r\n<tt class=\"xref docutils literal\"><span class=\"pre\">include()</span></tt> spo\u010d\u00edv\u00e1 tom, \u017ee zjednodu\u0161\u00ed\r\nzapojen\u00ed URL adres kdekoli. Te\u010f, kdy\u017e maj\u00ed ankety sv\u016fj vlastn\u00ed URLconf,\r\nmohou b\u00fdt um\u00edst\u011bny za &quot;/polls/&quot;, nebo &quot;/fun_polls/&quot;, nebo\r\n&quot;/content/polls/&quot;, nebo za jak\u00fdkoli jin\u00fd URL prefix a aplikace bude\r\nst\u00e1le fungovat.</p>\r\n<p>Aplikace se star\u00e1 jen o relativn\u00ed adresy a ne o absolutn\u00ed.</p>\r\n<p>A\u017e budete se sv\u00fdmi views spokojeni, p\u0159e\u010dt\u011bte si <a class=\"reference external\" href=\"/dokumentace/intro/tutorial04/#intro-tutorial04\"><em>\u010dtvrtou \u010d\u00e1st\r\ntohoto n\u00e1vodu</em></a>, kde se dozv\u00edte n\u011bco o zpracov\u00e1n\u00ed\r\njednoduch\u00fdch formul\u00e1\u0159\u016f a o generick\u00fdch views.</p>\r\n</div>\r\n</div>\r\n    </div>\r\n    <div id=\"rightSideBar\" class=\"span-7 last\">\r\n        <h3><a href=\"http://docs.djangoproject.com/en/dev/contents/\">Obsah</a></h3><ul>\r\n<li><a class=\"reference external\" href=\"#\">Prvn\u00ed aplikace v Djangu, \u010d\u00e1st 3</a><ul>\r\n<li><a class=\"reference external\" href=\"#filozofie\">Filozofie</a></li>\r\n<li><a class=\"reference external\" href=\"#vytvo-te-si-svoje-url\">Vytvo\u0159te si svoje URL</a></li>\r\n<li><a class=\"reference external\" href=\"#napi-te-sv-prvn-view\">Napi\u0161te sv\u00e9 prvn\u00ed view</a></li>\r\n<li><a class=\"reference external\" href=\"#napi-te-views-kter-opravdu-n-co-d-laj\">Napi\u0161te views, kter\u00e9 opravdu n\u011bco d\u011blaj\u00ed</a><ul>\r\n<li><a class=\"reference external\" href=\"#zjednodu-en-render-to-response\">Zjednodu\u0161en\u00ed: render_to_response()</a></li>\r\n</ul>\r\n</li>\r\n<li><a class=\"reference external\" href=\"#vyvol-n-404\">Vyvol\u00e1n\u00ed 404</a><ul>\r\n<li><a class=\"reference external\" href=\"#zkratka-get-object-or-404\">Zkratka: get_object_or_404()</a></li>\r\n</ul>\r\n</li>\r\n<li><a class=\"reference external\" href=\"#napi-te-view-pro-404-str-nka-nenalezena\">Napi\u0161te view pro 404 (str\u00e1nka nenalezena)</a></li>\r\n<li><a class=\"reference external\" href=\"#napi-te-view-500-chyba-serveru\">Napi\u0161te view 500 (chyba serveru)</a></li>\r\n<li><a class=\"reference external\" href=\"#pou-vejte-ablonov-syst-m\">Pou\u017e\u00edvejte \u0161ablonov\u00fd syst\u00e9m</a></li>\r\n<li><a class=\"reference external\" href=\"#zjednodu-en-soubor-urlconf\">Zjednodu\u0161en\u00ed soubor\u016f URLconf</a></li>\r\n<li><a class=\"reference external\" href=\"#odd-lov-n-soubor-urlconf\">Odd\u011blov\u00e1n\u00ed soubor\u016f URLconf</a></li>\r\n</ul>\r\n</li>\r\n</ul><h3>Listov\u00e1n\u00ed</h3><ul>\r\n<li>P\u0159edchoz\u00ed: <a href=\"/dokumentace/intro/tutorial02/\">Prvn\u00ed aplikace v Djangu, \u010d\u00e1st 2</a></li>\r\n<li>Dal\u0161\u00ed: <a href=\"/dokumentace/intro/tutorial04/\">Prvn\u00ed aplikace v Djangu, \u010d\u00e1st 4</a></li>\r\n</ul>\r\n        \r\n        \r\n<table class=\"revision\">\r\n    \r\n    \r\n    <tr>\r\n        <th>P\u0159eklad</th>\r\n        <td>Vojta Pol\u00e1\u0161ek</td>\r\n    </tr>\r\n    \r\n    \r\n    <tr>\r\n        <th>Korekce</th>\r\n        <td>Michal Valou\u0161ek</td>\r\n    </tr>\r\n    \r\n</table>\r\n\r\n\r\n    </div>\r\n    <br class=\"clear\" />\r\n</div>\r\n\r\n", 
            "enable_comments": true
        }
    }, 
    {
        "pk": 12, 
        "model": "flatpages.flatpage", 
        "fields": {
            "registration_required": false, 
            "title": "Prvn\u00ed aplikace v Djangu, \u010d\u00e1st 4", 
            "url": "/dokumentace/intro/tutorial04/", 
            "template_name": "flatpages/doc.html", 
            "sites": [
                1
            ], 
            "content": "<div id=\"wrapcontent\" class=\"span-22 last prefix-1 suffix-1\">\r\n    <div id=\"content\" class=\"span-14 suffix-1\">\r\n        \r\n        \r\n\r\n\r\n\r\n        <div class=\"section\" id=\"s-prvn-aplikace-v-djangu-st-4\">\r\n<span id=\"s-intro-tutorial04\"></span><span id=\"prvn-aplikace-v-djangu-st-4\"></span><span id=\"intro-tutorial04\"></span><h1>Prvn\u00ed aplikace v Djangu, \u010d\u00e1st 4<a class=\"headerlink\" href=\"#prvn-aplikace-v-djangu-st-4\" title=\"Permalink na tento nadpis\">\u00b6</a></h1>\r\n<p>Tento n\u00e1vod za\u010d\u00edn\u00e1 tam, kde skon\u010dila <a class=\"reference external\" href=\"/dokumentace/intro/tutorial03/#intro-tutorial03\"><em>t\u0159et\u00ed \u010d\u00e1st</em></a> uk\u00e1zkov\u00e9 aplikace. Budeme pokra\u010dovat v na\u0161\u00ed webov\u00e9\r\nanketn\u00ed aplikaci a zam\u011b\u0159\u00edme se na jednoduch\u00e9 zpracov\u00e1n\u00ed formul\u00e1\u0159\u016f a na\r\nmetody, kter\u00e9 povedou k ze\u0161t\u00edhlen\u00ed ji\u017e napsan\u00e9ho k\u00f3du.</p>\r\n<div class=\"section\" id=\"s-jednoduch-formul\">\r\n<span id=\"jednoduch-formul\"></span><h2>Jednoduch\u00fd formul\u00e1\u0159<a class=\"headerlink\" href=\"#jednoduch-formul\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Otev\u0159ete si \u0161ablonu s detailem ankety (&#8220;polls/detail.html&#8221;), kterou jsme\r\nvytvo\u0159ili v p\u0159edchoz\u00ed \u010d\u00e1sti tohoto n\u00e1vodu a vlo\u017eme do n\u00ed HTML formul\u00e1\u0159:</p>\r\n<div class=\"highlight-html+django\"><div class=\"highlight\"><pre><span class=\"nt\">&lt;h1&gt;</span><span class=\"cp\">{{</span> <span class=\"nv\">poll.question</span> <span class=\"cp\">}}</span><span class=\"nt\">&lt;/h1&gt;</span>\r\n\r\n<span class=\"cp\">{%</span> <span class=\"k\">if</span> <span class=\"nv\">error_message</span> <span class=\"cp\">%}</span><span class=\"nt\">&lt;p&gt;&lt;strong&gt;</span><span class=\"cp\">{{</span> <span class=\"nv\">error_message</span> <span class=\"cp\">}}</span><span class=\"nt\">&lt;/strong&gt;&lt;/p&gt;</span><span class=\"cp\">{%</span> <span class=\"k\">endif</span> <span class=\"cp\">%}</span>\r\n\r\n<span class=\"nt\">&lt;form</span> <span class=\"na\">action=</span><span class=\"s\">&quot;/polls/</span><span class=\"cp\">{{</span> <span class=\"nv\">poll.id</span> <span class=\"cp\">}}</span><span class=\"s\">/vote/&quot;</span> <span class=\"na\">method=</span><span class=\"s\">&quot;post&quot;</span><span class=\"nt\">&gt;</span>\r\n<span class=\"cp\">{%</span> <span class=\"k\">csrf_token</span> <span class=\"cp\">%}</span>\r\n<span class=\"cp\">{%</span> <span class=\"k\">for</span> <span class=\"nv\">choice</span> <span class=\"k\">in</span> <span class=\"nv\">poll.choice_set.all</span> <span class=\"cp\">%}</span>\r\n    <span class=\"nt\">&lt;input</span> <span class=\"na\">type=</span><span class=\"s\">&quot;radio&quot;</span> <span class=\"na\">name=</span><span class=\"s\">&quot;choice&quot;</span> <span class=\"na\">id=</span><span class=\"s\">&quot;choice</span><span class=\"cp\">{{</span> <span class=\"nb\">forloop</span><span class=\"nv\">.counter</span> <span class=\"cp\">}}</span><span class=\"s\">&quot;</span> <span class=\"na\">value=</span><span class=\"s\">&quot;</span><span class=\"cp\">{{</span> <span class=\"nv\">choice.id</span> <span class=\"cp\">}}</span><span class=\"s\">&quot;</span> <span class=\"nt\">/&gt;</span>\r\n    <span class=\"nt\">&lt;label</span> <span class=\"na\">for=</span><span class=\"s\">&quot;choice</span><span class=\"cp\">{{</span> <span class=\"nb\">forloop</span><span class=\"nv\">.counter</span> <span class=\"cp\">}}</span><span class=\"s\">&quot;</span><span class=\"nt\">&gt;</span><span class=\"cp\">{{</span> <span class=\"nv\">choice.choice</span> <span class=\"cp\">}}</span><span class=\"nt\">&lt;/label&gt;&lt;br</span> <span class=\"nt\">/&gt;</span>\r\n<span class=\"cp\">{%</span> <span class=\"k\">endfor</span> <span class=\"cp\">%}</span>\r\n<span class=\"nt\">&lt;input</span> <span class=\"na\">type=</span><span class=\"s\">&quot;submit&quot;</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Vote&quot;</span> <span class=\"nt\">/&gt;</span>\r\n<span class=\"nt\">&lt;/form&gt;</span>\r\n</pre></div>\r\n</div>\r\n<p>Stru\u010dn\u011b k funkci:</p>\r\n<ul class=\"simple\">\r\n<li>D\u00edky proveden\u00e9 \u00faprav\u011b se na str\u00e1nce zobraz\u00ed sada radio buttonu.\r\nAtribut <tt class=\"docutils literal\"><span class=\"pre\">value</span></tt> ka\u017ed\u00e9ho buttonu bude odpov\u00eddat konkr\u00e9tn\u00edmu ID\r\nanketn\u00ed volby (ID z datab\u00e1zov\u00e9 tabulky).  Atribut <tt class=\"docutils literal\"><span class=\"pre\">name</span></tt> bude\r\nnastaven na hodnotu <tt class=\"docutils literal\"><span class=\"pre\">&quot;choice&quot;</span></tt>. Pokud n\u011bkdo ode\u0161le formul\u00e1\u0159,\r\ndoraz\u00ed do view POST data, nap\u0159. <tt class=\"docutils literal\"><span class=\"pre\">choice=3</span></tt>.</li>\r\n<li>Akce formul\u00e1\u0159e (atribut <tt class=\"docutils literal\"><span class=\"pre\">action</span></tt>) je nastavena na hodnotu\r\n<tt class=\"docutils literal\"><span class=\"pre\">/polls/{{</span> <span class=\"pre\">poll.id</span> <span class=\"pre\">}}/vote/</span></tt>, metoda (atribut <tt class=\"docutils literal\"><span class=\"pre\">method</span></tt>) na\r\n<tt class=\"docutils literal\"><span class=\"pre\">&quot;post&quot;</span></tt>. Pou\u017eit\u00ed <tt class=\"docutils literal\"><span class=\"pre\">method=&quot;post&quot;</span></tt> (nam\u00edsto <tt class=\"docutils literal\"><span class=\"pre\">method=&quot;get&quot;</span></tt>)\r\nje velmi d\u016fle\u017eit\u00e9, proto\u017ee data odeslan\u00e1 z formul\u00e1\u0159e zp\u016fsob\u00ed zm\u011bnu\r\ndat na stran\u011b serveru. Kdykoliv budete \u0159e\u0161it podobnou situaci,\r\nvyu\u017e\u00edvejte v\u00fdhradn\u011b <tt class=\"docutils literal\"><span class=\"pre\">method=&quot;post&quot;</span></tt>. Nejde o specifikum\r\nDjanga, tato rada plat\u00ed obecn\u011b pro v\u0161echny webov\u00e9 aplikace.</li>\r\n<li>V\u00fdraz <tt class=\"docutils literal\"><span class=\"pre\">forloop.counter</span></tt> vrac\u00ed \u010d\u00edselnou hodnotu odpov\u00eddaj\u00edc\u00ed\r\npo\u010dtu proveden\u00fd cykl\u016f smy\u010dky <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/templates/builtins/#ttag-for\"><tt class=\"xref docutils literal\"><span class=\"pre\">for</span></tt></a>.</li>\r\n<li>Proto\u017ee vytv\u00e1\u0159\u00edme POST formul\u00e1\u0159 (kter\u00fd m\u016f\u017ee na stran\u011b serveru vyvolat\r\nmodifikaci dat), nem\u011bli bychom zapomenout na CSRF (Cross Site Request\r\nForgeries). Django na\u0161t\u011bst\u00ed obsahuje syst\u00e9m, kter\u00fd n\u00e1s p\u0159ed t\u00edmto rizikem\r\ndok\u00e1\u017ee ochr\u00e1nit -- sta\u010d\u00ed v\u0161echny POST formul\u00e1\u0159e vedouc\u00ed na intern\u00ed URL\r\nvybavit tagem <tt class=\"docutils literal\"><span class=\"pre\">{%</span> <span class=\"pre\">csrf_token</span> <span class=\"pre\">%}</span></tt>.</li>\r\n</ul>\r\n<p>Tak. Formul\u00e1\u0159 jsme v \u0161ablon\u011b definovali, te\u010f je na \u010dase napsat view,\r\nkter\u00e9 se postar\u00e1 o zpracov\u00e1n\u00ed dat. Vzpome\u0148te si na <a class=\"reference external\" href=\"/dokumentace/intro/tutorial03/#intro-tutorial03\"><em>t\u0159et\u00ed \u010d\u00e1st\r\ntohoto n\u00e1vodu</em></a>, ve kter\u00e9m jsme definovali URL\r\npravidlo:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"p\">(</span><span class=\"s\">r&#39;^(?P&lt;poll_id&gt;\\d+)/vote/$&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;vote&#39;</span><span class=\"p\">),</span>\r\n</pre></div>\r\n</div>\r\n<p>Tehd\u00e1 jsme vytvo\u0159ili &quot;fale\u0161nou&quot; implementaci hlasov\u00e1n\u00ed -- funkci\r\n<tt class=\"docutils literal\"><span class=\"pre\">vote()</span></tt>. Poj\u010fme te\u010f napsat k\u00f3d, kter\u00fd bude opravdu n\u011bco d\u011blat.\r\nP\u0159idejte do souboru <tt class=\"docutils literal\"><span class=\"pre\">mysite/polls/views.py</span></tt> n\u00e1sleduj\u00edc\u00ed \u0159\u00e1dky:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"kn\">from</span> <span class=\"nn\">django.shortcuts</span> <span class=\"kn\">import</span> <span class=\"n\">get_object_or_404</span><span class=\"p\">,</span> <span class=\"n\">render_to_response</span>\r\n<span class=\"kn\">from</span> <span class=\"nn\">django.http</span> <span class=\"kn\">import</span> <span class=\"n\">HttpResponseRedirect</span><span class=\"p\">,</span> <span class=\"n\">HttpResponse</span>\r\n<span class=\"kn\">from</span> <span class=\"nn\">django.core.urlresolvers</span> <span class=\"kn\">import</span> <span class=\"n\">reverse</span>\r\n<span class=\"kn\">from</span> <span class=\"nn\">django.template</span> <span class=\"kn\">import</span> <span class=\"n\">RequestContext</span>\r\n<span class=\"kn\">from</span> <span class=\"nn\">mysite.polls.models</span> <span class=\"kn\">import</span> <span class=\"n\">Choice</span><span class=\"p\">,</span> <span class=\"n\">Poll</span>\r\n<span class=\"c\"># ...</span>\r\n<span class=\"k\">def</span> <span class=\"nf\">vote</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">poll_id</span><span class=\"p\">):</span>\r\n    <span class=\"n\">p</span> <span class=\"o\">=</span> <span class=\"n\">get_object_or_404</span><span class=\"p\">(</span><span class=\"n\">Poll</span><span class=\"p\">,</span> <span class=\"n\">pk</span><span class=\"o\">=</span><span class=\"n\">poll_id</span><span class=\"p\">)</span>\r\n    <span class=\"k\">try</span><span class=\"p\">:</span>\r\n        <span class=\"n\">selected_choice</span> <span class=\"o\">=</span> <span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">choice_set</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">pk</span><span class=\"o\">=</span><span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">POST</span><span class=\"p\">[</span><span class=\"s\">&#39;choice&#39;</span><span class=\"p\">])</span>\r\n    <span class=\"k\">except</span> <span class=\"p\">(</span><span class=\"ne\">KeyError</span><span class=\"p\">,</span> <span class=\"n\">Choice</span><span class=\"o\">.</span><span class=\"n\">DoesNotExist</span><span class=\"p\">):</span>\r\n        <span class=\"c\"># zobrazime formular znovu, tentokrat s chybovou hlaskou</span>\r\n        <span class=\"k\">return</span> <span class=\"n\">render_to_response</span><span class=\"p\">(</span><span class=\"s\">&#39;polls/detail.html&#39;</span><span class=\"p\">,</span> <span class=\"p\">{</span>\r\n            <span class=\"s\">&#39;poll&#39;</span><span class=\"p\">:</span> <span class=\"n\">p</span><span class=\"p\">,</span>\r\n            <span class=\"s\">&#39;error_message&#39;</span><span class=\"p\">:</span> <span class=\"s\">&quot;Nevybral(-a) jste zadnou anketni volbu.&quot;</span><span class=\"p\">,</span>\r\n        <span class=\"p\">},</span> <span class=\"n\">context_instance</span><span class=\"o\">=</span><span class=\"n\">RequestContext</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">))</span>\r\n    <span class=\"k\">else</span><span class=\"p\">:</span>\r\n        <span class=\"n\">selected_choice</span><span class=\"o\">.</span><span class=\"n\">votes</span> <span class=\"o\">+=</span> <span class=\"mf\">1</span>\r\n        <span class=\"n\">selected_choice</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">()</span>\r\n        <span class=\"c\"># Po kazdem uspesnem zpracovani POST dat je treba vyvolat</span>\r\n        <span class=\"c\"># HttpResponseRedirect. Tato praktika zabrani dvojimu</span>\r\n        <span class=\"c\"># odeslani (a uzlozeni) dat z formulare v situacich, kdy</span>\r\n        <span class=\"c\"># uzivatel klikne na tlacitko &quot;Zpet&quot; ve svem webovem</span>\r\n        <span class=\"c\"># prohlizeci.</span>\r\n        <span class=\"k\">return</span> <span class=\"n\">HttpResponseRedirect</span><span class=\"p\">(</span><span class=\"n\">reverse</span><span class=\"p\">(</span><span class=\"s\">&#39;mysite.polls.views.results&#39;</span><span class=\"p\">,</span> <span class=\"n\">args</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">id</span><span class=\"p\">,)))</span>\r\n</pre></div>\r\n</div>\r\n<p>V k\u00f3du se n\u00e1m objevilo n\u011bkolik novinek:</p>\r\n<ul>\r\n<li><p class=\"first\"><a title=\"django.http.HttpRequest.POST\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.POST\"><tt class=\"xref docutils literal\"><span class=\"pre\">request.POST</span></tt></a> je objekt\r\npodobn\u00fd slovn\u00edku, ze kter\u00e9ho m\u016f\u017eeme vytahovat odeslan\u00e1 data s\r\npomoc\u00ed jejich jm\u00e9na. Nap\u0159. <tt class=\"docutils literal\"><span class=\"pre\">request.POST['choice']</span></tt> vr\u00e1t\u00ed ID\r\nvybran\u00e9 volby ve form\u011b \u0159et\u011bzce. Hodnoty z <a title=\"django.http.HttpRequest.POST\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.POST\"><tt class=\"xref docutils literal\"><span class=\"pre\">request.POST</span></tt></a> se vrac\u00ed v\u017edy v podob\u011b \u0159et\u011bzce.</p>\r\n<p>Pamatujte, \u017ee Django prost\u0159ednictv\u00edm <a title=\"django.http.HttpRequest.GET\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.GET\"><tt class=\"xref docutils literal\"><span class=\"pre\">request.GET</span></tt></a> zp\u0159\u00edstup\u0148uje rovn\u011b\u017e GET data -- v\r\nna\u0161em uk\u00e1zkov\u00e9m k\u00f3du ale explicitn\u011b pou\u017e\u00edv\u00e1me <a title=\"django.http.HttpRequest.POST\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.POST\"><tt class=\"xref docutils literal\"><span class=\"pre\">request.POST</span></tt></a>, abychom m\u011bli jistotu, \u017ee data\r\np\u0159ich\u00e1z\u00ed skute\u010dn\u011b z POSTu.</p>\r\n</li>\r\n<li><p class=\"first\"><tt class=\"docutils literal\"><span class=\"pre\">request.POST['choice']</span></tt> vyvol\u00e1 vyj\u00edmku <tt class=\"xref docutils literal\"><span class=\"pre\">KeyError</span></tt> v\r\np\u0159\u00edpad\u011b, \u017ee <tt class=\"docutils literal\"><span class=\"pre\">choice</span></tt> nebude v POST datech p\u0159\u00edtomno. N\u00e1\u0161 k\u00f3d tuto\r\nsituaci o\u0161et\u0159uje, a pokud by nastala, zobraz\u00ed formul\u00e1\u0159 znovu spolu s\r\nchybovou hl\u00e1\u0161kou.</p>\r\n</li>\r\n<li><p class=\"first\">Po zapo\u010d\u00edt\u00e1n\u00ed vybran\u00e9 volby vr\u00e1t\u00ed n\u00e1\u0161 k\u00f3d\r\n<a title=\"django.http.HttpResponseRedirect\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponseRedirect\"><tt class=\"xref docutils literal\"><span class=\"pre\">HttpResponseRedirect</span></tt></a> (nam\u00edsto obvykl\u00e9ho\r\n<a title=\"django.http.HttpResponse\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponse\"><tt class=\"xref docutils literal\"><span class=\"pre\">HttpResponse</span></tt></a>).\r\n<a title=\"django.http.HttpResponseRedirect\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponseRedirect\"><tt class=\"xref docutils literal\"><span class=\"pre\">HttpResponseRedirect</span></tt></a> p\u0159ij\u00edm\u00e1 jedin\u00fd\r\nargument: URL na kter\u00e9 bude u\u017eivatel p\u0159esm\u011brov\u00e1n (nep\u0159ehl\u00e9dn\u011bte\r\nn\u00e1sleduj\u00edc\u00ed bod, ve kter\u00e9m se vysv\u011btluje zp\u016fsob konstrukce URL\r\nadresy).</p>\r\n<p>Jak ji\u017e zmi\u0148uje koment\u00e1\u0159 v k\u00f3du -- po ka\u017ed\u00e9m \u00fasp\u011b\u0161n\u00e9m zpracov\u00e1n\u00ed\r\nPOST dat by m\u011blo n\u00e1sledovat p\u0159esm\u011brov\u00e1n\u00ed s pomoc\u00ed\r\n<a title=\"django.http.HttpResponseRedirect\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponseRedirect\"><tt class=\"xref docutils literal\"><span class=\"pre\">HttpResponseRedirect</span></tt></a>; jde o obecn\u011b platnou\r\nradu, kterou uplatn\u00edte nejen v Djangu, ale p\u0159i jak\u00e9mkoliv v\u00fdvoji\r\nwebov\u00fdch aplikac\u00ed.</p>\r\n</li>\r\n<li><p class=\"first\">Pro vytvo\u0159en\u00ed URL adresy (viz konstruktor\r\n<a title=\"django.http.HttpResponseRedirect\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponseRedirect\"><tt class=\"xref docutils literal\"><span class=\"pre\">HttpResponseRedirect</span></tt></a>) jsme pou\u017eili funkci\r\n<a title=\"django.core.urlresolvers.reverse\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/http/urls/#django.core.urlresolvers.reverse\"><tt class=\"xref docutils literal\"><span class=\"pre\">reverse()</span></tt></a>. D\u00edky t\u00e9to funkci\r\nnemus\u00edme do k\u00f3du &quot;zadr\u00e1tov\u00e1vat&quot; pevn\u00e1 URL, kter\u00e9 bychom v p\u0159\u00edpad\u011b\r\njejich zm\u011bny museli pracn\u011b hledat a opravovat. Funkci\r\n<a title=\"django.core.urlresolvers.reverse\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/http/urls/#django.core.urlresolvers.reverse\"><tt class=\"xref docutils literal\"><span class=\"pre\">reverse()</span></tt></a> p\u0159ed\u00e1me jm\u00e9no view, na\r\nkter\u00e9 chceme p\u0159esm\u011brovat a data, kter\u00e1 odpov\u00eddaj\u00ed prom\u011bnn\u00fdm \u010d\u00e1stem\r\nv URL pravidlu. V na\u0161em konkr\u00e9tn\u00edm p\u0159\u00edpad\u011b m\u016f\u017ee funkce\r\n<a title=\"django.core.urlresolvers.reverse\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/http/urls/#django.core.urlresolvers.reverse\"><tt class=\"xref docutils literal\"><span class=\"pre\">reverse()</span></tt></a> vr\u00e1tit nap\u0159.:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"s\">&#39;/polls/3/results/&#39;</span>\r\n</pre></div>\r\n</div>\r\n<p>... kde <tt class=\"docutils literal\"><span class=\"pre\">3</span></tt> je hodnota <tt class=\"docutils literal\"><span class=\"pre\">p.id</span></tt>. Po p\u0159esm\u011brov\u00e1n\u00ed bude zavol\u00e1no\r\nview <tt class=\"docutils literal\"><span class=\"pre\">'results'</span></tt>, kter\u00e9 zobraz\u00ed v\u00fdsledky ankety. V\u0161imn\u011bte si, \u017ee\r\njm\u00e9no view mus\u00edme definovat v pln\u00e9 form\u011b (v\u010detn\u011b prefix\u016f).</p>\r\n</li>\r\n</ul>\r\n<p>Jak u\u017e bylo v p\u0159edchoz\u00ed t\u0159et\u00ed \u010d\u00e1sti tohoto n\u00e1vodu zmi\u0148ov\u00e1no,\r\n<tt class=\"docutils literal\"><span class=\"pre\">request</span></tt> je objekt <a title=\"django.http.HttpRequest\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest\"><tt class=\"xref docutils literal\"><span class=\"pre\">HttpRequest</span></tt></a>. V\u00edce informac\u00ed\r\no jeho vlastnostech naleznete v dokumentaci <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#ref-request-response\"><em>request a response</em></a>.</p>\r\n<p>Po proveden\u00ed hlasov\u00e1n\u00ed v anket\u011b, bude u\u017eivatel p\u0159esm\u011brov\u00e1n na fin\u00e1ln\u00ed\r\nstr\u00e1nku s v\u00fdsledky. Napi\u0161me pro ni view:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"k\">def</span> <span class=\"nf\">results</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">poll_id</span><span class=\"p\">):</span>\r\n    <span class=\"n\">p</span> <span class=\"o\">=</span> <span class=\"n\">get_object_or_404</span><span class=\"p\">(</span><span class=\"n\">Poll</span><span class=\"p\">,</span> <span class=\"n\">pk</span><span class=\"o\">=</span><span class=\"n\">poll_id</span><span class=\"p\">)</span>\r\n    <span class=\"k\">return</span> <span class=\"n\">render_to_response</span><span class=\"p\">(</span><span class=\"s\">&#39;polls/results.html&#39;</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s\">&#39;poll&#39;</span><span class=\"p\">:</span> <span class=\"n\">p</span><span class=\"p\">})</span>\r\n</pre></div>\r\n</div>\r\n<p>P\u0159i pohledu na tento k\u00f3d si mo\u017en\u00e1 vzpomenete na view <tt class=\"docutils literal\"><span class=\"pre\">detail()</span></tt>\r\nz <a class=\"reference external\" href=\"/dokumentace/intro/tutorial03/#intro-tutorial03\"><em>t\u0159et\u00ed \u010d\u00e1sti n\u00e1vodu</em></a>. Oba k\u00f3dy jsou si velmi\r\npodobn\u00e9, rozd\u00edl je pouze v n\u00e1zvu \u0161ablony. Za chv\u00edli se t\u00e9to\r\nnadbyte\u010dnosti zbav\u00edme.</p>\r\n<p>Vytvo\u0159me \u0161ablonu <tt class=\"docutils literal\"><span class=\"pre\">results.html</span></tt>:</p>\r\n<div class=\"highlight-html+django\"><div class=\"highlight\"><pre><span class=\"nt\">&lt;h1&gt;</span><span class=\"cp\">{{</span> <span class=\"nv\">poll.question</span> <span class=\"cp\">}}</span><span class=\"nt\">&lt;/h1&gt;</span>\r\n\r\n<span class=\"nt\">&lt;ul&gt;</span>\r\n<span class=\"cp\">{%</span> <span class=\"k\">for</span> <span class=\"nv\">choice</span> <span class=\"k\">in</span> <span class=\"nv\">poll.choice_set.all</span> <span class=\"cp\">%}</span>\r\n    <span class=\"nt\">&lt;li&gt;</span><span class=\"cp\">{{</span> <span class=\"nv\">choice.choice</span> <span class=\"cp\">}}</span> -- <span class=\"cp\">{{</span> <span class=\"nv\">choice.votes</span> <span class=\"cp\">}}</span> vote<span class=\"cp\">{{</span> <span class=\"nv\">choice.votes</span><span class=\"o\">|</span><span class=\"nf\">pluralize</span> <span class=\"cp\">}}</span><span class=\"nt\">&lt;/li&gt;</span>\r\n<span class=\"cp\">{%</span> <span class=\"k\">endfor</span> <span class=\"cp\">%}</span>\r\n<span class=\"nt\">&lt;/ul&gt;</span>\r\n\r\n<span class=\"nt\">&lt;a</span> <span class=\"na\">href=</span><span class=\"s\">&quot;/polls/</span><span class=\"cp\">{{</span> <span class=\"nv\">poll.id</span> <span class=\"cp\">}}</span><span class=\"s\">/&quot;</span><span class=\"nt\">&gt;</span>Chcete znovu hlasovat?<span class=\"nt\">&lt;/a&gt;</span>\r\n</pre></div>\r\n</div>\r\n<p>P\u0159epn\u011bte se do sv\u00e9ho prohl\u00ed\u017ee\u010de, nav\u0161tivte str\u00e1nku <tt class=\"docutils literal\"><span class=\"pre\">/polls/1/</span></tt> a\r\nhlasujte pro n\u011bkterou z mo\u017enost\u00ed. M\u011bla by se v\u00e1m zobrazit str\u00e1nka s\r\nv\u00fdsledky, kter\u00e1 bude po ka\u017ed\u00e9 proveden\u00e9 volb\u011b aktualizovan\u00e1. Pokud se\r\npokus\u00edte odeslat formul\u00e1\u0159 bez zvolen\u00ed n\u011bkter\u00e9 z mo\u017enost\u00ed, m\u011bla by se v\u00e1m\r\nzobrazit chybov\u00e1 hl\u00e1\u0161ka.</p>\r\n</div>\r\n<div class=\"section\" id=\"s-generick-view-kr-tk-k-d-dobr-k-d\">\r\n<span id=\"generick-view-kr-tk-k-d-dobr-k-d\"></span><h2>Generick\u00e1 view: Kr\u00e1tk\u00fd k\u00f3d, dobr\u00fd k\u00f3d<a class=\"headerlink\" href=\"#generick-view-kr-tk-k-d-dobr-k-d\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>View <tt class=\"docutils literal\"><span class=\"pre\">detail()</span></tt> (z <a class=\"reference external\" href=\"/dokumentace/intro/tutorial03/#intro-tutorial03\"><em>t\u0159et\u00ed \u010d\u00e1sti n\u00e1vodu</em></a>) a <tt class=\"docutils literal\"><span class=\"pre\">results()</span></tt>\r\njsou velice jednoduch\u00e9 -- a redundantn\u00ed. View <tt class=\"docutils literal\"><span class=\"pre\">index()</span></tt> (rovn\u011b\u017e z\r\nt\u0159et\u00ed \u010d\u00e1sti), kter\u00e9 se star\u00e1 o zobrazen\u00ed seznamu anket, je na tom\r\npodobn\u011b.</p>\r\n<p>Tato view reprezentuj\u00ed obvykl\u00e9 procesy ve v\u00fdvoji webov\u00fdch aplikac\u00ed:\r\npodle parametr\u016f z URL z\u00edskej data z datab\u00e1ze, nahrej \u0161ablonu a vra\u0165\r\nu\u017eivateli jej\u00ed vykreslenou (rendered) podobu. Proto\u017ee se s podobnou\r\nsituac\u00ed budete setk\u00e1vat st\u00e1le, Django pro v\u00e1s p\u0159ipravilo sadu\r\npomocn\u00fdch &quot;generic views&quot;.</p>\r\n<p>Generick\u00e9 view abstrahuj\u00ed obvykl\u00e9 postupy do t\u00e9 m\u00edry, \u017ee pro svou\r\naplikaci nebudete muset napsat ani \u0159\u00e1dek Python k\u00f3du.</p>\r\n<p>Poj\u010fme nyn\u00ed p\u0159epsat na\u0161i anketn\u00ed aplikaci tak, aby vyu\u017e\u00edvala generick\u00e1\r\nview. Sami uvid\u00edte kolik k\u00f3du n\u00e1m \u00faprava u\u0161et\u0159\u00ed. Bude to jednoduch\u00e9:</p>\r\n<ol class=\"arabic simple\">\r\n<li>Uprav\u00edme URLconf.</li>\r\n<li>P\u0159ejmenujeme p\u00e1r \u0161ablon.</li>\r\n<li>Sma\u017eeme n\u011bkter\u00e1 nepot\u0159ebn\u00e1 view.</li>\r\n<li>Oprav\u00edme URL pravidla pro nov\u00e1 view.</li>\r\n</ol>\r\n<p>\u010ct\u011bte d\u00e1l.</p>\r\n<div class=\"admonition-pro-zasahovat-do-hotov-ho-funk-n-ho-k-du admonition \">\r\n<p class=\"first admonition-title\">Pro\u010d zasahovat do hotov\u00e9ho, funk\u010dn\u00edho k\u00f3du?</p>\r\n<p>Obvykle se pro generick\u00e1 view rozhodnete hned na za\u010d\u00e1tku vytv\u00e1\u0159en\u00ed\r\naplikace. Zv\u00e1\u017e\u00edte jejich v\u00fdhody pro v\u00e1\u0161 konkr\u00e9tn\u00ed z\u00e1m\u011br a\r\nbu\u010f je pou\u017eijete, nebo si view nap\u00ed\u0161ete vlastn\u00ed. V tomto n\u00e1vodu\r\npostupujeme naopak -- nejd\u0159\u00edve jsme volili pracnou cestu, abychom\r\nz\u00edskali z\u00e1kladn\u00ed p\u0159edstavu o fungov\u00e1n\u00ed Djanga, a kdy\u017e u\u017e v tom m\u00e1me\r\njasno, poukazujeme na snadn\u011bj\u0161\u00ed postupy.</p>\r\n<p class=\"last\">Jin\u00fdmi slovy: ne\u017e pou\u017eijete kalkula\u010dku, mus\u00edte zn\u00e1t z\u00e1klady\r\nmatematiky.</p>\r\n</div>\r\n<p>Nejd\u0159\u00edve otev\u0159ete soubor <tt class=\"docutils literal\"><span class=\"pre\">polls/urls.py</span></tt>. Bude vypadat n\u011bjak takto:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"kn\">from</span> <span class=\"nn\">django.conf.urls.defaults</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\r\n\r\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"n\">patterns</span><span class=\"p\">(</span><span class=\"s\">&#39;mysite.polls.views&#39;</span><span class=\"p\">,</span>\r\n    <span class=\"p\">(</span><span class=\"s\">r&#39;^$&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;index&#39;</span><span class=\"p\">),</span>\r\n    <span class=\"p\">(</span><span class=\"s\">r&#39;^(?P&lt;poll_id&gt;\\d+)/$&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;detail&#39;</span><span class=\"p\">),</span>\r\n    <span class=\"p\">(</span><span class=\"s\">r&#39;^(?P&lt;poll_id&gt;\\d+)/results/$&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;results&#39;</span><span class=\"p\">),</span>\r\n    <span class=\"p\">(</span><span class=\"s\">r&#39;^(?P&lt;poll_id&gt;\\d+)/vote/$&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;vote&#39;</span><span class=\"p\">),</span>\r\n<span class=\"p\">)</span>\r\n</pre></div>\r\n</div>\r\n<p>Zm\u011bn\u00edme jej do n\u00e1sleduj\u00edc\u00ed podoby:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"kn\">from</span> <span class=\"nn\">django.conf.urls.defaults</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\r\n<span class=\"kn\">from</span> <span class=\"nn\">mysite.polls.models</span> <span class=\"kn\">import</span> <span class=\"n\">Poll</span>\r\n\r\n<span class=\"n\">info_dict</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\r\n    <span class=\"s\">&#39;queryset&#39;</span><span class=\"p\">:</span> <span class=\"n\">Poll</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">(),</span>\r\n<span class=\"p\">}</span>\r\n\r\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"n\">patterns</span><span class=\"p\">(</span><span class=\"s\">&#39;&#39;</span><span class=\"p\">,</span>\r\n    <span class=\"p\">(</span><span class=\"s\">r&#39;^$&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;django.views.generic.list_detail.object_list&#39;</span><span class=\"p\">,</span> <span class=\"n\">info_dict</span><span class=\"p\">),</span>\r\n    <span class=\"p\">(</span><span class=\"s\">r&#39;^(?P&lt;object_id&gt;\\d+)/$&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;django.views.generic.list_detail.object_detail&#39;</span><span class=\"p\">,</span> <span class=\"n\">info_dict</span><span class=\"p\">),</span>\r\n    <span class=\"n\">url</span><span class=\"p\">(</span><span class=\"s\">r&#39;^(?P&lt;object_id&gt;\\d+)/results/$&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;django.views.generic.list_detail.object_detail&#39;</span><span class=\"p\">,</span> <span class=\"nb\">dict</span><span class=\"p\">(</span><span class=\"n\">info_dict</span><span class=\"p\">,</span> <span class=\"n\">template_name</span><span class=\"o\">=</span><span class=\"s\">&#39;polls/results.html&#39;</span><span class=\"p\">),</span> <span class=\"s\">&#39;poll_results&#39;</span><span class=\"p\">),</span>\r\n    <span class=\"p\">(</span><span class=\"s\">r&#39;^(?P&lt;poll_id&gt;\\d+)/vote/$&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;mysite.polls.views.vote&#39;</span><span class=\"p\">),</span>\r\n<span class=\"p\">)</span>\r\n</pre></div>\r\n</div>\r\n<p>Pou\u017eijeme dv\u011b generick\u00e1 view:\r\n<tt class=\"xref docutils literal\"><span class=\"pre\">object_list()</span></tt> a\r\n<tt class=\"xref docutils literal\"><span class=\"pre\">object_detail()</span></tt>. Tato view\r\nabstrahuj\u00ed obvykl\u00e9 postupy &quot;zobraz seznam objekt\u016f&quot; a &quot;zobraz detailn\u00ed\r\nstr\u00e1nku pro konkretn\u00ed typ objektu&quot;.</p>\r\n<ul class=\"simple\">\r\n<li>Ka\u017ed\u00e9 generick\u00e9 view pot\u0159ebuje v\u011bd\u011bt, s jak\u00fdmi daty m\u00e1 pracovat.\r\nTato data p\u0159ij\u00edm\u00e1 ve form\u011b slovn\u00edku, p\u0159i\u010dem\u017e pod kl\u00ed\u010dem\r\n<tt class=\"docutils literal\"><span class=\"pre\">queryset</span></tt> o\u010dek\u00e1v\u00e1 seznam objekt\u016f.</li>\r\n<li>Generick\u00e9 view <tt class=\"xref docutils literal\"><span class=\"pre\">object_detail()</span></tt>\r\no\u010dek\u00e1v\u00e1 p\u0159\u00edtomnost kl\u00ed\u010de <tt class=\"docutils literal\"><span class=\"pre\">&quot;object_id&quot;</span></tt> v URL pravidlu. Podle n\u011bj\r\nn\u00e1sledn\u011b vyt\u00e1hne objekt z datab\u00e1ze (podle ID). Z tohoto d\u016fvodu\r\np\u0159ejmenujeme <tt class=\"docutils literal\"><span class=\"pre\">poll_id</span></tt> na <tt class=\"docutils literal\"><span class=\"pre\">object_id</span></tt>.</li>\r\n<li>URL pravidlo vedouc\u00ed na str\u00e1nku s v\u00fdsledky jsme pojmenovali jako\r\n<tt class=\"docutils literal\"><span class=\"pre\">poll_results</span></tt> (dal\u0161\u00ed <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/http/urls/#naming-url-patterns\"><em>podrobnosti o pojmenov\u00e1v\u00e1n\u00ed pravidel</em></a>). Definici pravidla jsme p\u0159epsali za\r\npomoci funkce <tt class=\"xref docutils literal\"><span class=\"pre\">url()</span></tt></li>\r\n</ul>\r\n<p>V\u00fdchoz\u00ed nastaven\u00ed generick\u00e9ho view\r\n<tt class=\"xref docutils literal\"><span class=\"pre\">object_detail()</span></tt> pou\u017eije \u0161ablonu\r\npojmenovanou podle vzoru <tt class=\"docutils literal\"><span class=\"pre\">&lt;app</span> <span class=\"pre\">name&gt;/&lt;model</span> <span class=\"pre\">name&gt;_detail.html</span></tt>. V\r\nna\u0161em p\u0159\u00edpad\u011b to bude \u0161ablona <tt class=\"docutils literal\"><span class=\"pre\">&quot;polls/poll_detail.html&quot;</span></tt>. P\u0159ejmenujme\r\ntedy \u0161ablonu <tt class=\"docutils literal\"><span class=\"pre\">polls/detail.html</span></tt> na <tt class=\"docutils literal\"><span class=\"pre\">polls/poll_detail.html</span></tt>, a\r\nzm\u011b\u0148me jej\u00ed jm\u00e9no i ve view <tt class=\"docutils literal\"><span class=\"pre\">vote()</span></tt> (viz vol\u00e1n\u00ed\r\n<a title=\"django.shortcuts.render_to_response\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/http/shortcuts/#django.shortcuts.render_to_response\"><tt class=\"xref docutils literal\"><span class=\"pre\">render_to_response()</span></tt></a>).</p>\r\n<p>Podobn\u011b p\u0159ejmenujeme \u0161ablony pro generick\u00e9 view\r\n<tt class=\"xref docutils literal\"><span class=\"pre\">object_list()</span></tt> (podle vzoru\r\n<tt class=\"docutils literal\"><span class=\"pre\">&lt;app</span> <span class=\"pre\">name&gt;/&lt;model</span> <span class=\"pre\">name&gt;_list.html</span></tt>). Konkr\u00e9tn\u011b, ze \u0161ablony\r\n<tt class=\"docutils literal\"><span class=\"pre\">polls/index.html</span></tt> ud\u011bl\u00e1me <tt class=\"docutils literal\"><span class=\"pre\">polls/poll_list.html</span></tt>.</p>\r\n<p>Proto\u017ee m\u00e1me v definici URL pravidel v\u00edce z\u00e1znam\u016f, kter\u00e9 shodn\u011b\r\npou\u017e\u00edvaj\u00ed <tt class=\"xref docutils literal\"><span class=\"pre\">object_detail()</span></tt>,\r\nzadefinujeme manu\u00e1ln\u011b jm\u00e9no \u0161ablony pro str\u00e1nku s v\u00fdsledky:\r\n<tt class=\"docutils literal\"><span class=\"pre\">template_name='polls/results.html'</span></tt>. Kdybychom to neud\u011blali, ob\u011b\r\ndetailn\u00ed view by pou\u017eila stejnou \u0161ablonu. Odbo\u010dka: v\u0161imn\u011bte si pou\u017eit\u00ed\r\n<tt class=\"docutils literal\"><span class=\"pre\">dict()</span></tt> -- vr\u00e1t\u00ed pozm\u011bn\u011bn\u00fd slovn\u00edk &quot;in-place&quot;.</p>\r\n<div class=\"admonition note\">\r\n<p class=\"first admonition-title\">Pozn\u00e1mka</p>\r\n<p><a title=\"django.db.models.QuerySet.all\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.QuerySet.all\"><tt class=\"xref docutils literal\"><span class=\"pre\">django.db.models.QuerySet.all()</span></tt></a> je lenoch</p>\r\n<p>Co\u017ee? Pro zobrazen\u00ed detailu str\u00e1nky se vol\u00e1 <tt class=\"docutils literal\"><span class=\"pre\">Poll.objects.all()</span></tt> (tj. z datab\u00e1ze se tahaj\u00ed v\u0161echny ankety)?\r\nNen\u00ed t\u0159eba podl\u00e9hat p\u0159ed\u010dasn\u00fdm mrzutostem p\u0159\u00e1tel\u00e9.\r\n<tt class=\"docutils literal\"><span class=\"pre\">Poll.objects.all()</span></tt> je ve skute\u010dnosti speci\u00e1ln\u00ed objekt\r\n<tt class=\"xref docutils literal\"><span class=\"pre\">QuerySet</span></tt>, kter\u00fd je &quot;l\u00edn\u00fd&quot; -- datab\u00e1zov\u00fd\r\ndotaz nen\u00ed vykon\u00e1n, dokud to nen\u00ed nezbytn\u011b nutn\u00e9. Ne\u017e si generick\u00e9\r\nview vy\u017e\u00e1d\u00e1 z datab\u00e1ze konkr\u00e9tn\u00ed objekt, je v\u00fdraz\r\n<tt class=\"docutils literal\"><span class=\"pre\">Poll.objects.all()</span></tt> dostate\u010dn\u011b up\u0159esn\u011bn a SQL bude v ide\u00e1ln\u00edm\r\np\u0159\u00edpad\u011b vytahovat jedin\u00fd \u0159\u00e1dek z tabulky.</p>\r\n<p class=\"last\">Pokud se chcete dozv\u011bd\u011bt dal\u0161\u00ed podrobnosti, nahl\u00e9dn\u011bte do dokumentace o\r\ndatab\u00e1zov\u00e9m API, kter\u00e9 obsahuje samostatnou kapitolu <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/db/queries/#querysets-are-lazy\"><em>o leniv\u00e9 povaze\r\nobjekt\u016f QuerySet</em></a>.</p>\r\n</div>\r\n<p>V p\u0159edchoz\u00edch \u010d\u00e1stech n\u00e1vodu jsme uvnit\u0159 \u0161ablon pracovali s kontextov\u00fdmi\r\nprom\u011bnn\u00fdmi <tt class=\"docutils literal\"><span class=\"pre\">poll</span></tt> and <tt class=\"docutils literal\"><span class=\"pre\">latest_poll_list</span></tt>. Generick\u00e1 view ale maj\u00ed\r\nprom\u011bnn\u00e9 pojmenovan\u00e9 obecn\u011bji, konkr\u00e9tn\u011b <tt class=\"docutils literal\"><span class=\"pre\">object</span></tt> a <tt class=\"docutils literal\"><span class=\"pre\">object_list</span></tt>.\r\nProjd\u011bte si v\u0161echny sv\u00e9 \u0161ablony a zm\u011b\u0148te prom\u011bnn\u00e9\r\n<tt class=\"docutils literal\"><span class=\"pre\">latest_poll_list</span></tt> na <tt class=\"docutils literal\"><span class=\"pre\">object_list</span></tt>, a <tt class=\"docutils literal\"><span class=\"pre\">poll</span></tt> na <tt class=\"docutils literal\"><span class=\"pre\">object</span></tt>.</p>\r\n<p>V t\u00e9to chv\u00edli ji\u017e m\u016f\u017eete ze souboru <tt class=\"docutils literal\"><span class=\"pre\">polls/views.py</span></tt> smazat view\r\n<tt class=\"docutils literal\"><span class=\"pre\">index()</span></tt>, <tt class=\"docutils literal\"><span class=\"pre\">detail()</span></tt> a <tt class=\"docutils literal\"><span class=\"pre\">results()</span></tt>. U\u017e je na nic nepot\u0159ebujeme --\r\nbyly nahrazeny generick\u00fdmi view.</p>\r\n<p>View <tt class=\"docutils literal\"><span class=\"pre\">vote()</span></tt> zachov\u00e1me, star\u00e1 se o zpracov\u00e1n\u00ed odeslan\u00fdch dat z formul\u00e1\u0159e. Mus\u00edme jej ale lehce upravit -- ve vol\u00e1n\u00ed\r\n<a title=\"django.shortcuts.render_to_response\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/http/shortcuts/#django.shortcuts.render_to_response\"><tt class=\"xref docutils literal\"><span class=\"pre\">render_to_response()</span></tt></a> p\u0159ejmenujeme kontextovou\r\nprom\u011bnnou <tt class=\"docutils literal\"><span class=\"pre\">poll</span></tt> na <tt class=\"docutils literal\"><span class=\"pre\">object</span></tt>.</p>\r\n<p>Posledn\u00ed v\u011bc\u00ed kterou mus\u00edme upravit je zp\u016fsob, jak\u00fdm pracujeme s URL\r\nadresami. Ve view <tt class=\"docutils literal\"><span class=\"pre\">vote()</span></tt> pou\u017e\u00edv\u00e1me funkci\r\n<a title=\"django.core.urlresolvers.reverse\" class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/http/urls/#django.core.urlresolvers.reverse\"><tt class=\"xref docutils literal\"><span class=\"pre\">reverse()</span></tt></a>. Proto\u017ee generick\u00e1 view mohou\r\nb\u00fdt pou\u017e\u00edv\u00e1na na v\u00edce m\u00edstech aplikace, nem\u016f\u017eeme se na n\u011b odkazovat\r\njm\u00e9nem funkce.  V\u00fdraz uprav\u00edme tak, \u017ee bude obsahovat jm\u00e9no URL\r\npravidla:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"k\">return</span> <span class=\"n\">HttpResponseRedirect</span><span class=\"p\">(</span><span class=\"n\">reverse</span><span class=\"p\">(</span><span class=\"s\">&#39;poll_results&#39;</span><span class=\"p\">,</span> <span class=\"n\">args</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">id</span><span class=\"p\">,)))</span>\r\n</pre></div>\r\n</div>\r\n<p>Hotovo. Na\u0161e aplikace nyn\u00ed vyu\u017e\u00edv\u00e1 mo\u017enost\u00ed generick\u00fdch view. Spus\u0165e si\r\nv\u00fdvojov\u00fd server a ov\u011b\u0159te si jej\u00ed chov\u00e1n\u00ed v praxi.</p>\r\n<p>Dal\u0161\u00ed podrobnosti o generick\u00fdch view najdete v <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/topics/http/generic-views/#topics-http-generic-views\"><em>samostatn\u00e9\r\ndokumentaci</em></a>.</p>\r\n</div>\r\n<div class=\"section\" id=\"s-ji-brzy\">\r\n<span id=\"ji-brzy\"></span><h2>Ji\u017e brzy<a class=\"headerlink\" href=\"#ji-brzy\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>V tomto m\u00edst\u011b n\u00e1\u0161 n\u00e1vod kon\u010d\u00ed. V budoucnu bude dopln\u011bn o popisy dal\u0161\u00edch\r\nzaj\u00edmav\u00fdch \u010d\u00e1st\u00ed Djanga:</p>\r\n<ul class=\"simple\">\r\n<li>Pokro\u010dil\u00e9 metody zpracov\u00e1n\u00ed formul\u00e1\u0159\u016f</li>\r\n<li>Vyu\u017eit\u00ed RSS frameworku</li>\r\n<li>Vyu\u017eit\u00ed cache frameworku</li>\r\n<li>Vyu\u017eit\u00ed koment\u00e1\u0159ov\u00e9ho frameworku</li>\r\n<li>Pokro\u010dil\u00e9 vlastnosti administra\u010dn\u00edho rozhran\u00ed: Pr\u00e1va</li>\r\n<li>Pokro\u010dil\u00e9 vlastnosti administra\u010dn\u00edho rozhran\u00ed: U\u017eivatelsk\u00fd\r\nJavaScript</li>\r\n</ul>\r\n<p>Ne\u017e k tomu dojde, sami se porozhl\u00e9dn\u011bte na str\u00e1nce <a class=\"reference external\" href=\"http://docs.djangoproject.com/en/dev/intro/whatsnext/#intro-whatsnext\"><em>Co si p\u0159e\u010d\u00edst d\u00e1l</em></a>.</p>\r\n</div>\r\n</div>\r\n    </div>\r\n    <div id=\"rightSideBar\" class=\"span-7 last\">\r\n        <h3><a href=\"http://docs.djangoproject.com/en/dev/contents/\">Obsah</a></h3><ul>\r\n<li><a class=\"reference external\" href=\"#\">Prvn\u00ed aplikace v Djangu, \u010d\u00e1st 4</a><ul>\r\n<li><a class=\"reference external\" href=\"#jednoduch-formul\">Jednoduch\u00fd formul\u00e1\u0159</a></li>\r\n<li><a class=\"reference external\" href=\"#generick-view-kr-tk-k-d-dobr-k-d\">Generick\u00e1 view: Kr\u00e1tk\u00fd k\u00f3d, dobr\u00fd k\u00f3d</a></li>\r\n<li><a class=\"reference external\" href=\"#ji-brzy\">Ji\u017e brzy</a></li>\r\n</ul>\r\n</li>\r\n</ul><h3>Listov\u00e1n\u00ed</h3><ul>\r\n<li>P\u0159edchoz\u00ed: <a href=\"/dokumentace/intro/tutorial03/\">Prvn\u00ed aplikace v Djangu, \u010d\u00e1st 3</a></li>\r\n<li>Dal\u0161\u00ed: <a href=\"http://docs.djangoproject.com/en/dev/intro/whatsnext/\">What to read next</a></li>\r\n</ul>\r\n        \r\n        \r\n<table class=\"revision\">\r\n    \r\n    \r\n    <tr>\r\n        <th>P\u0159eklad</th>\r\n        <td>Michal Valou\u0161ek</td>\r\n    </tr>\r\n    \r\n    \r\n    <tr>\r\n        <th>Korekce</th>\r\n        <td>Michal Valou\u0161ek</td>\r\n    </tr>\r\n    \r\n</table>\r\n\r\n\r\n    </div>\r\n    <br class=\"clear\" />\r\n</div>\r\n\r\n", 
            "enable_comments": true
        }
    }, 
    {
        "pk": 15, 
        "model": "flatpages.flatpage", 
        "fields": {
            "registration_required": false, 
            "title": "P\u00ed\u0161eme views", 
            "url": "/dokumentace/topics/http/views/", 
            "template_name": "flatpages/doc.html", 
            "sites": [
                1
            ], 
            "content": "<div id=\"wrapcontent\" class=\"span-22 last prefix-1 suffix-1\">\r\n    <div id=\"content\" class=\"span-14 suffix-1\">\r\n        \r\n        \r\n\r\n\r\n\r\n        <div class=\"section\" id=\"s-piseme-views\">\r\n<span id=\"piseme-views\"></span><h1>P\u00ed\u0161eme views<a class=\"headerlink\" href=\"#piseme-views\" title=\"Permalink na tento nadpis\">\u00b6</a></h1>\r\n<p>&#8220;View function&#8221; nebo zkr\u00e1cen\u011b <em>view</em> je jednoduch\u00e1 Python\u00ed funkce, kter\u00e1\r\nzpracuje \u017e\u00e1dost z prohl\u00ed\u017ee\u010de (web request) a vr\u00e1t\u00ed mu odpov\u011b\u010f (web\r\nresponse). Ta m\u016f\u017ee b\u00fdt ve form\u011b HTML dokumentu, p\u0159esm\u011brov\u00e1n\u00ed, chyby 404, XML\r\ndokumentu, obr\u00e1zku ... prost\u011b cokoliv. K\u00f3d view m\u016f\u017ee b\u00fdt um\u00edst\u011bn kdekoliv na\r\n&#8220;Python path&#8221;. A to\u0165 v\u0161e &#8211; \u017e\u00e1dn\u00e1 dal\u0161\u00ed kouzla nejsou t\u0159eba. Jeliko\u017e k\u00f3d\r\nobsahuj\u00edc\u00ed view <em>n\u011bkam</em> d\u00e1t mus\u00edme, je nejlep\u0161\u00ed ho spolu s ostatn\u00edmi views vlo\u017eit\r\ndo souboru <tt class=\"docutils literal\"><span class=\"pre\">views.py</span></tt>, kter\u00fd se nach\u00e1z\u00ed v ko\u0159enov\u00e9m adres\u00e1\u0159i projektu nebo\r\naplikace.</p>\r\n<div class=\"section\" id=\"s-jednoduche-view\">\r\n<span id=\"jednoduche-view\"></span><h2>Jednoduch\u00e9 view<a class=\"headerlink\" href=\"#jednoduche-view\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Poj\u010fme se pod\u00edvat na jednoduch\u00fd p\u0159\u00edklad &#8211; view, kter\u00e9 vrac\u00ed aktu\u00e1ln\u00ed datum a \u010das\r\nve form\u011b HTML str\u00e1nky:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"kn\">from</span> <span class=\"nn\">django.http</span> <span class=\"kn\">import</span> <span class=\"n\">HttpResponse</span>\r\n<span class=\"kn\">import</span> <span class=\"nn\">datetime</span>\r\n\r\n<span class=\"k\">def</span> <span class=\"nf\">current_datetime</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>\r\n    <span class=\"n\">now</span> <span class=\"o\">=</span> <span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">now</span><span class=\"p\">()</span>\r\n    <span class=\"n\">html</span> <span class=\"o\">=</span> <span class=\"s\">&quot;&lt;html&gt;&lt;body&gt;Prave je </span><span class=\"si\">%s</span><span class=\"s\">.&lt;/body&gt;&lt;/html&gt;&quot;</span> <span class=\"o\">%</span> <span class=\"n\">now</span>\r\n    <span class=\"k\">return</span> <span class=\"n\">HttpResponse</span><span class=\"p\">(</span><span class=\"n\">html</span><span class=\"p\">)</span>\r\n</pre></div>\r\n</div>\r\n<p>Poj\u010fme si k\u00f3d rozebrat:</p>\r\n<ul>\r\n<li><p class=\"first\">Nejd\u0159\u00edve importujeme t\u0159\u00eddu <a class=\"reference internal\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponse\" title=\"django.http.HttpResponse\"><tt class=\"xref py py-class docutils literal\"><span class=\"pre\">HttpResponse</span></tt></a> z modulu\r\n<a class=\"reference internal\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#module-django.http\" title=\"django.http: Classes dealing with HTTP requests and responses.\"><tt class=\"xref py py-mod docutils literal\"><span class=\"pre\">django.http</span></tt></a> a k tomu importujeme i Python knihovnu <tt class=\"docutils literal\"><span class=\"pre\">datetime</span></tt>.</p>\r\n</li>\r\n<li><p class=\"first\">Jako dal\u0161\u00ed si nadefinujeme funkci <tt class=\"docutils literal\"><span class=\"pre\">current_datetime</span></tt>. Ta je nyn\u00ed view\r\nfunkc\u00ed (&quot;view function&quot;). Ka\u017ed\u00e1 view funkce p\u0159eb\u00edr\u00e1 v prvn\u00edm parametru\r\nobjekt <a class=\"reference internal\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest\" title=\"django.http.HttpRequest\"><tt class=\"xref py py-class docutils literal\"><span class=\"pre\">HttpRequest</span></tt></a>, kter\u00fd je v\u011bt\u0161inou pojmenov\u00e1n\r\n<tt class=\"docutils literal\"><span class=\"pre\">request</span></tt>.</p>\r\n<p>Svoj\u00ed view funkci si m\u016f\u017eete pojmenovat jakkoliv.  Nemus\u00ed m\u00edt n\u011bjak\u00e9\r\nspeci\u00e1ln\u00ed jm\u00e9no, aby Django rozpoznalo. V na\u0161em uk\u00e1zkov\u00e9m k\u00f3du ji m\u00e1me\r\npojmenovanou <tt class=\"docutils literal\"><span class=\"pre\">current_datetime</span></tt> (tak\u017ee n\u00e1s hned trkne co d\u011bl\u00e1).</p>\r\n</li>\r\n<li><p class=\"first\">View n\u00e1m pot\u00e9 vrac\u00ed objekt <a class=\"reference internal\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponse\" title=\"django.http.HttpResponse\"><tt class=\"xref py py-class docutils literal\"><span class=\"pre\">HttpResponse</span></tt></a> obsahuj\u00edc\u00ed\r\nvygenerovanou odpov\u011b\u010f. Ka\u017ed\u00e1 view funkce je zodpov\u011bdn\u00e1 za vr\u00e1cen\u00ed objektu\r\n<a class=\"reference internal\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponse\" title=\"django.http.HttpResponse\"><tt class=\"xref py py-class docutils literal\"><span class=\"pre\">HttpResponse</span></tt></a>. (Jsou zde n\u011bjak\u00e9 v\u00fdjimky, k t\u011bm se\r\ndostaneme pozd\u011bji)</p>\r\n</li>\r\n</ul>\r\n<div class=\"admonition-casove-pasmo-djanga admonition\">\r\n<p class=\"first admonition-title\">\u010casov\u00e9 p\u00e1smo Djanga</p>\r\n<p class=\"last\">Ve v\u00fdchoz\u00ed konfiguraci je Django nastaveno na \u010dasov\u00e9 p\u00e1smo\r\n<tt class=\"docutils literal\"><span class=\"pre\">America/Chicago</span></tt>.  Potomk\u016fm praotce \u010cecha doporu\u010dujeme zm\u011bnit prom\u011bnnou\r\n<a class=\"reference internal\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#std:setting-TIME_ZONE\"><tt class=\"xref std std-setting docutils literal\"><span class=\"pre\">TIME_ZONE</span></tt></a> na hodnotu <tt class=\"docutils literal\"><span class=\"pre\">Europe/Prague</span></tt>.</p>\r\n</div>\r\n</div>\r\n<div class=\"section\" id=\"s-prirazovani-url-adres-k-views\">\r\n<span id=\"prirazovani-url-adres-k-views\"></span><h2>P\u0159i\u0159azov\u00e1n\u00ed URL adres k views<a class=\"headerlink\" href=\"#prirazovani-url-adres-k-views\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Kr\u00e1tk\u00e9 op\u00e1\u010dko: na\u0161e view funkce vrac\u00ed HTML str\u00e1nku s aktu\u00e1ln\u00edm \u010dasem. Pokud\r\njej chceme zobrazit po zad\u00e1n\u00ed ur\u010dit\u00e9 URL adresy, mus\u00edme vytvo\u0159it <em>URLconf</em>; pro\r\ninstrukce se pod\u00edvejte na <a class=\"reference internal\" href=\"http://docs.djangoproject.com/en/dev/topics/http/urls/\"><em>URL dispatcher</em></a>.</p>\r\n</div>\r\n<div class=\"section\" id=\"s-vraceni-chyb\">\r\n<span id=\"vraceni-chyb\"></span><h2>Vracen\u00ed chyb<a class=\"headerlink\" href=\"#vraceni-chyb\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<p>Vracen\u00ed chybov\u00fdch k\u00f3d\u016f HTTP je v Djangu snadn\u00e9. V\u0161echny k\u00f3dy jsou\r\nodvozeny z t\u0159\u00eddy <a class=\"reference internal\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponse\" title=\"django.http.HttpResponse\"><tt class=\"xref py py-class docutils literal\"><span class=\"pre\">HttpResponse</span></tt></a> (jejich kompletn\u00ed seznam\r\nnaleznete v dokumentaci <a class=\"reference internal\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#ref-httpresponse-subclasses\"><em>request/response</em></a>).\r\nSta\u010d\u00ed kdy\u017e nam\u00edsto <a class=\"reference internal\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponse\" title=\"django.http.HttpResponse\"><tt class=\"xref py py-class docutils literal\"><span class=\"pre\">HttpResponse</span></tt></a> vr\u00e1t\u00edte n\u011bkterou z definovan\u00fdch podt\u0159\u00edd\r\n<a class=\"reference internal\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponse\" title=\"django.http.HttpResponse\"><tt class=\"xref py py-class docutils literal\"><span class=\"pre\">HttpResponse</span></tt></a>, a chybov\u00e9 hl\u00e1\u0161en\u00ed je na sv\u011bt\u011b:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"k\">def</span> <span class=\"nf\">muj_view</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>\r\n    <span class=\"c\"># ...</span>\r\n    <span class=\"k\">if</span> <span class=\"n\">foo</span><span class=\"p\">:</span>\r\n        <span class=\"k\">return</span> <span class=\"n\">HttpResponseNotFound</span><span class=\"p\">(</span><span class=\"s\">&#39;&lt;h1&gt;Stranka neexistuje&lt;/h1&gt;&#39;</span><span class=\"p\">)</span>\r\n    <span class=\"k\">else</span><span class=\"p\">:</span>\r\n        <span class=\"k\">return</span> <span class=\"n\">HttpResponse</span><span class=\"p\">(</span><span class=\"s\">&#39;&lt;h1&gt;Stranka existuje&lt;/h1&gt;&#39;</span><span class=\"p\">)</span>\r\n</pre></div>\r\n</div>\r\n<p>HTTP specifikace definuje velk\u00e9 mno\u017estv\u00ed stav\u016f a Django p\u0159in\u00e1\u0161\u00ed definice\r\npouze t\u011bch nejobvyklej\u0161\u00edch. Pokud ve va\u0161\u00ed aplikaci budete pot\u0159ebovat vracet\r\njin\u00fd typ chyby, m\u016f\u017eete poslat stavov\u00fd k\u00f3d HTTP p\u0159\u00edmo p\u0159es konstuktor t\u0159\u00eddy\r\n<a class=\"reference internal\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponse\" title=\"django.http.HttpResponse\"><tt class=\"xref py py-class docutils literal\"><span class=\"pre\">HttpResponse</span></tt></a>:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"k\">def</span> <span class=\"nf\">muj_view</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>\r\n    <span class=\"c\"># ...</span>\r\n\r\n    <span class=\"c\"># Vratime &quot;vytvoreny&quot; stavovy kod (201).</span>\r\n    <span class=\"k\">return</span> <span class=\"n\">HttpResponse</span><span class=\"p\">(</span><span class=\"n\">status</span><span class=\"o\">=</span><span class=\"mi\">201</span><span class=\"p\">)</span>\r\n</pre></div>\r\n</div>\r\n<div class=\"section\" id=\"s-vyjimka-http404\">\r\n<span id=\"vyjimka-http404\"></span><h3>V\u00fdjimka Http404<a class=\"headerlink\" href=\"#vyjimka-http404\" title=\"Permalink na tento nadpis\">\u00b6</a></h3>\r\n<dl class=\"class\">\r\n<dt id=\"django.http.Http404\">\r\n<em class=\"property\">class </em><tt class=\"descclassname\">django.http.</tt><tt class=\"descname\">Http404</tt><a class=\"headerlink\" href=\"#django.http.Http404\" title=\"Permalink to this definition\">\u00b6</a></dt>\r\n<dd></dd></dl>\r\n<p>P\u0159i vr\u00e1cen\u00ed chyby <a class=\"reference internal\" href=\"http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponseNotFound\" title=\"django.http.HttpResponseNotFound\"><tt class=\"xref py py-class docutils literal\"><span class=\"pre\">HttpResponseNotFound</span></tt></a> mus\u00edme dodat\r\ni HTML obsah chybov\u00e9 str\u00e1nky:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"k\">return</span> <span class=\"n\">HttpResponseNotFound</span><span class=\"p\">(</span><span class=\"s\">&#39;&lt;h1&gt;Stranka nenalezena&lt;/h1&gt;&#39;</span><span class=\"p\">)</span>\r\n</pre></div>\r\n</div>\r\n<p>Pro v\u011bt\u0161\u00ed pohodl\u00ed (a taky proto\u017ee je dobr\u00e9 generovat pro chybu 404 v\u017edy stejnou\r\nstr\u00e1nku) n\u00e1m Django poskytuje v\u00fdjimku <tt class=\"docutils literal\"><span class=\"pre\">Http404</span></tt>. Jakmile ji kdekoliv ve view\r\nfunkci vyvol\u00e1me, Django ji odchyt\u00ed a vr\u00e1t\u00ed standardn\u00ed chybovou str\u00e1nku pro va\u0161\u00ed\r\naplikaci v\u010detn\u011b chybov\u00e9ho HTTP k\u00f3du 404.</p>\r\n<p>N\u00e1zorn\u00e9 vyu\u017eit\u00ed:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"kn\">from</span> <span class=\"nn\">django.http</span> <span class=\"kn\">import</span> <span class=\"n\">Http404</span>\r\n\r\n<span class=\"k\">def</span> <span class=\"nf\">detail</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">poll_id</span><span class=\"p\">):</span>\r\n    <span class=\"k\">try</span><span class=\"p\">:</span>\r\n        <span class=\"n\">p</span> <span class=\"o\">=</span> <span class=\"n\">Poll</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">pk</span><span class=\"o\">=</span><span class=\"n\">poll_id</span><span class=\"p\">)</span>\r\n    <span class=\"k\">except</span> <span class=\"n\">Poll</span><span class=\"o\">.</span><span class=\"n\">DoesNotExist</span><span class=\"p\">:</span>\r\n        <span class=\"k\">raise</span> <span class=\"n\">Http404</span>\r\n    <span class=\"k\">return</span> <span class=\"n\">render_to_response</span><span class=\"p\">(</span><span class=\"s\">&#39;polls/detail.html&#39;</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s\">&#39;poll&#39;</span><span class=\"p\">:</span> <span class=\"n\">p</span><span class=\"p\">})</span>\r\n</pre></div>\r\n</div>\r\n<p>Pokud chcete v\u00fdjimku <tt class=\"docutils literal\"><span class=\"pre\">Http404</span></tt> vyu\u017e\u00edt naplno, je vhodn\u00e9 um\u00edstit do adres\u00e1\u0159e s\r\n\u0161ablonami soubor <tt class=\"docutils literal\"><span class=\"pre\">404.html</span></tt>, jeho\u017e obsah se u\u017eivatel\u016fm va\u0161\u00ed aplikace zobraz\u00ed\r\nv\u017edy, pokud vyj\u00edmka nastane.</p>\r\n</div>\r\n</div>\r\n<div class=\"section\" id=\"s-prizpusobeni-chybovych-view\">\r\n<span id=\"prizpusobeni-chybovych-view\"></span><h2>P\u0159izp\u016fsoben\u00ed chybov\u00fdch view<a class=\"headerlink\" href=\"#prizpusobeni-chybovych-view\" title=\"Permalink na tento nadpis\">\u00b6</a></h2>\r\n<div class=\"section\" id=\"s-view-404-stranka-nenalezena\">\r\n<span id=\"view-404-stranka-nenalezena\"></span><h3>View 404 (str\u00e1nka nenalezena)<a class=\"headerlink\" href=\"#view-404-stranka-nenalezena\" title=\"Permalink na tento nadpis\">\u00b6</a></h3>\r\n<p>Po vyvol\u00e1n\u00ed v\u00fdjimky <tt class=\"docutils literal\"><span class=\"pre\">Http404</span></tt> Django zavol\u00e1 speci\u00e1ln\u00ed view, kter\u00e9 na\u010dte a\r\nvykresl\u00ed \u0161ablonu <tt class=\"docutils literal\"><span class=\"pre\">404.html</span></tt> (viz <tt class=\"docutils literal\"><span class=\"pre\">django.views.defaults.page_not_found</span></tt>).</p>\r\n<p>To znamen\u00e1, \u017ee mus\u00edme vytvo\u0159it soubor <tt class=\"docutils literal\"><span class=\"pre\">404.html</span></tt> v ko\u0159enov\u00e9m adres\u00e1\u0159i \u0161ablon.\r\nTato \u0161ablona bude vyu\u017eita pro v\u0161echny chyby 404. Defaultn\u00ed view pro 404 nav\u00edc do\r\nkontextu \u0161ablony po\u0161le prom\u011bnnou <tt class=\"docutils literal\"><span class=\"pre\">request_path</span></tt> s URL adresou na kter\u00e9 chyba\r\nnastala.</p>\r\n<p>View <tt class=\"docutils literal\"><span class=\"pre\">page_not_found</span></tt> by m\u011blo b\u00fdt dostate\u010dn\u00e9 pro 99% webov\u00fdch aplikac\u00edch, ale\r\nkdyby jste ho z n\u011bjak\u00e9ho d\u016fvodu necht\u011bli pou\u017e\u00edt, sta\u010d\u00ed ve va\u0161em URLconf\r\nnadefinovat prom\u011bnnou <tt class=\"docutils literal\"><span class=\"pre\">handler404</span></tt>:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"n\">handler404</span> <span class=\"o\">=</span> <span class=\"s\">&#39;mysite.views.my_custom_404_view&#39;</span>\r\n</pre></div>\r\n</div>\r\n<p>Aby jste v\u011bd\u011bli: fach\u00e1 to tak, \u017ee Django se nejprve pod\u00edv\u00e1 do URLconfu, a\r\nteprve pokud tam nenajde <tt class=\"docutils literal\"><span class=\"pre\">handler404</span></tt>, pou\u017eije v\u00fdchoz\u00ed\r\n<tt class=\"docutils literal\"><span class=\"pre\">django.views.defaults.page_not_found</span></tt>.</p>\r\n<p>\u010cty\u0159i v\u011bci ohledn\u011b view 404:</p>\r\n<ul class=\"simple\">\r\n<li>View 404 je vol\u00e1no i v p\u0159\u00edpadech, kdy Django v definici URLconf nenajde\r\npravidlo pro po\u017eadovanou str\u00e1nku.</li>\r\n<li>Kdy\u017e si nenadefinujete sv\u00e9 vlastn\u00ed view pro 404 \u2014 a pou\u017e\u00edv\u00e1te z\u00e1kladn\u00ed view\r\n(co\u017e je doporu\u010deno) \u2014 st\u00e1le m\u00e1te jednu povinnost: mus\u00edte vytvo\u0159it soubor\r\n<tt class=\"docutils literal\"><span class=\"pre\">404.html</span></tt> v rootu \u0161ablonov\u00e9ho adres\u00e1\u0159e.</li>\r\n<li>Do view 404 se pos\u00edl\u00e1 objekt <a class=\"reference internal\" href=\"http://docs.djangoproject.com/en/dev/ref/templates/api/#django.template.RequestContext\" title=\"django.template.RequestContext\"><tt class=\"xref py py-class docutils literal\"><span class=\"pre\">RequestContext</span></tt></a> a\r\ntud\u00ed\u017e bude m\u00edt p\u0159\u00edstup k prom\u011bnn\u00fdm definovan\u00fdm v\r\n<a class=\"reference internal\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#std:setting-TEMPLATE_CONTEXT_PROCESSORS\"><tt class=\"xref std std-setting docutils literal\"><span class=\"pre\">TEMPLATE_CONTEXT_PROCESSORS</span></tt></a>  (nap\u0159. <tt class=\"docutils literal\"><span class=\"pre\">MEDIA_URL</span></tt> apod.).</li>\r\n<li>Pokud je <a class=\"reference internal\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#std:setting-DEBUG\"><tt class=\"xref std std-setting docutils literal\"><span class=\"pre\">DEBUG</span></tt></a> nastaven na <tt class=\"xref docutils literal\"><span class=\"pre\">True</span></tt> (v <tt class=\"docutils literal\"><span class=\"pre\">settings.py</span></tt>), tak\r\nse view 404 nikdy nezavol\u00e1, a m\u00edsto toho bude zobrazen URLconf spole\u010dn\u011b s\r\nhrstkou debug informac\u00ed.</li>\r\n</ul>\r\n</div>\r\n<div class=\"section\" id=\"s-view-500-server-error\">\r\n<span id=\"view-500-server-error\"></span><h3>View 500 (server error)<a class=\"headerlink\" href=\"#view-500-server-error\" title=\"Permalink na tento nadpis\">\u00b6</a></h3>\r\n<p>Pokud b\u011bhem chodu va\u0161eho view dojde k runtime chyb\u011b, zachov\u00e1 se Django podobn\u011b\r\njako v p\u0159\u00edpad\u011b chyb 404 -- zavol\u00e1 view <tt class=\"docutils literal\"><span class=\"pre\">django.views.defaults.server_error</span></tt>\r\na to na\u010dte a zobraz\u00ed \u0161ablonu <tt class=\"docutils literal\"><span class=\"pre\">500.html</span></tt>.</p>\r\n<p>V adres\u00e1\u0159i s \u0161ablonami mus\u00edte vytvo\u0159it soubor <tt class=\"docutils literal\"><span class=\"pre\">500.html</span></tt>.\r\nTato \u0161ablona bude vyu\u017e\u00edv\u00e1na poka\u017ed\u00e9, kdy\u017e ve va\u0161\u00ed aplikaci na serveru dojde\r\nk n\u011bjak\u00e9 chyb\u011b. Defaultn\u00ed view 500 nepos\u00edl\u00e1 do \u0161ablony \u017e\u00e1dn\u00e9 prom\u011bnnn\u00e9, aby\r\nse zabr\u00e1nilo dal\u0161\u00edm p\u0159\u00edpadn\u00fdm chyb\u00e1m.</p>\r\n<p>View <tt class=\"docutils literal\"><span class=\"pre\">server_error</span></tt> by m\u011blo sta\u010dit pro 99% webov\u00fdch aplikac\u00edch, ale kdyby\r\njste ho necht\u011bli z n\u011bjak\u00e9ho d\u016fvodu pou\u017e\u00edt, sta\u010d\u00ed nadefinovat prom\u011bnnou\r\n<tt class=\"docutils literal\"><span class=\"pre\">handler500</span></tt> ve va\u0161em URLconf:</p>\r\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"n\">handler500</span> <span class=\"o\">=</span> <span class=\"s\">&#39;mysite.views.my_custom_error_view&#39;</span>\r\n</pre></div>\r\n</div>\r\n<p>Aby jste v\u011bd\u011bli: fach\u00e1 to tak, \u017ee Django se nejprve pod\u00edv\u00e1 do URLconfu, a\r\nteprve pokud tam nenajde <tt class=\"docutils literal\"><span class=\"pre\">handler500</span></tt>, pou\u017eije v\u00fdchoz\u00ed\r\n<tt class=\"docutils literal\"><span class=\"pre\">django.views.defaults.server_error</span></tt>.</p>\r\n<p>Dv\u011b v\u011bci ohledn\u011b view 500:</p>\r\n<ul class=\"simple\">\r\n<li>Kdy\u017e si nenadefinujete sv\u00e9 vlastn\u00ed view 500 \u2014 a pou\u017e\u00edv\u00e1te z\u00e1kladn\u00ed view\r\n(co\u017e je doporu\u010deno) \u2014 st\u00e1le m\u00e1te jednu povinnost: mus\u00edte vytvo\u0159it soubor\r\n<tt class=\"docutils literal\"><span class=\"pre\">500.html</span></tt> v rootu \u0161ablonov\u00e9ho adres\u00e1\u0159e.</li>\r\n<li>Pokud je <a class=\"reference internal\" href=\"http://docs.djangoproject.com/en/dev/ref/settings/#std:setting-DEBUG\"><tt class=\"xref std std-setting docutils literal\"><span class=\"pre\">DEBUG</span></tt></a> nastaven na <tt class=\"xref docutils literal\"><span class=\"pre\">True</span></tt> (v <tt class=\"docutils literal\"><span class=\"pre\">settings.py</span></tt>), tak\r\nse view 500 nikdy nezavol\u00e1, a nam\u00edsto toho bude zobrazen traceback s debug\r\ninformacemi o tom, kde a jak\u00e1 chyba nastala.</li>\r\n</ul>\r\n</div>\r\n</div>\r\n</div>\r\n    </div>\r\n    <div id=\"rightSideBar\" class=\"span-7 last\">\r\n        <h3><a href=\"http://docs.djangoproject.com/en/dev/contents/\">Obsah</a></h3><ul>\r\n<li><a class=\"reference internal\" href=\"#\">P\u00ed\u0161eme views</a><ul>\r\n<li><a class=\"reference internal\" href=\"#jednoduche-view\">Jednoduch\u00e9 view</a></li>\r\n<li><a class=\"reference internal\" href=\"#prirazovani-url-adres-k-views\">P\u0159i\u0159azov\u00e1n\u00ed URL adres k views</a></li>\r\n<li><a class=\"reference internal\" href=\"#vraceni-chyb\">Vracen\u00ed chyb</a><ul>\r\n<li><a class=\"reference internal\" href=\"#vyjimka-http404\">V\u00fdjimka Http404</a></li>\r\n</ul>\r\n</li>\r\n<li><a class=\"reference internal\" href=\"#prizpusobeni-chybovych-view\">P\u0159izp\u016fsoben\u00ed chybov\u00fdch view</a><ul>\r\n<li><a class=\"reference internal\" href=\"#view-404-stranka-nenalezena\">View 404 (str\u00e1nka nenalezena)</a></li>\r\n<li><a class=\"reference internal\" href=\"#view-500-server-error\">View 500 (server error)</a></li>\r\n</ul>\r\n</li>\r\n</ul>\r\n</li>\r\n</ul><h3>Listov\u00e1n\u00ed</h3><ul>\r\n<li>P\u0159edchoz\u00ed: <a href=\"http://docs.djangoproject.com/en/dev/topics/http/urls/\">URL dispatcher</a></li>\r\n<li>Dal\u0161\u00ed: <a href=\"http://docs.djangoproject.com/en/dev/topics/http/decorators/\">View decorators</a></li>\r\n</ul>\r\n        \r\n        \r\n<table class=\"revision\">\r\n    \r\n    \r\n    <tr>\r\n        <th>P\u0159eklad</th>\r\n        <td>Michal Vin\u00e1rek</td>\r\n    </tr>\r\n    \r\n    \r\n    <tr>\r\n        <th>Korekce</th>\r\n        <td>Michal Valou\u0161ek</td>\r\n    </tr>\r\n    \r\n</table>\r\n\r\n\r\n    </div>\r\n    <br class=\"clear\" />\r\n</div>", 
            "enable_comments": false
        }
    }, 
    {
        "pk": 7, 
        "model": "flatpages.flatpage", 
        "fields": {
            "registration_required": false, 
            "title": "Kterak z\u00edskat Django", 
            "url": "/download/", 
            "template_name": "flatpages/doc.html", 
            "sites": [
                1
            ], 
            "content": "<div id=\"wrapcontent\" class=\"span-22 prefix-1 suffix-1 last\">\r\n<div id=\"content\" class=\"span-14 suffix-1\">\r\n<h1>Kterak z\u00edskat Django</h1>\r\n\r\n<p>Django je open-source projektem vydan\u00fdm pod <a\r\nhref=\"http://code.djangoproject.com/file/django/trunk/LICENSE\">licenc\u00ed\r\nBSD</a>. Aby jste Django rozb\u011bhli, budete pot\u0159ebovat Python minim\u00e1ln\u011b ve\r\nverzi 2.5. Existuje n\u011bkolik zp\u016fsob\u016f, jak Django z\u00edskat:</p>\r\n\r\n<h2>Varianta prvn\u00ed: <span class=\"thin\">St\u00e1hn\u011bte si posledn\u00ed ofici\u00e1ln\u00ed\r\nverzi</span></h2>\r\n<p>Posledn\u00ed ofici\u00e1ln\u00ed verze je 1.4. Z\u00edsk\u00e1te ji n\u00e1sledovn\u011b:</p>\r\n<p>Nejd\u0159\u00edve si st\u00e1hn\u011bte <a\r\nhref=\"http://www.djangoproject.com/download/1.4/tarball/\">Django-1.4.tar.gz</a>\r\na potom prove\u010fte:</p>\r\n\r\n<pre class=\"literal-block\"><code>tar xzvf Django-1.4.tar.gz\r\ncd Django-1.4\r\nsudo python setup.py install\r\n</code></pre>\r\n\r\n\r\n<h2>Varianta druh\u00e1: <span class=\"thin\">St\u00e1hn\u011bte si posledn\u00ed v\u00fdvojovou\r\nverzi</span></h2>\r\n<p>Posledn\u00ed super-duper verzi Djanga najdete v\u017edy v ofici\u00e1ln\u00edm Git\r\nrepozit\u00e1\u0159i. Pokud na sv\u00e9m po\u010d\u00edta\u010di m\u00e1te nainstalov\u00e1n Git, sta\u010d\u00ed spustit \r\nn\u00e1sleduj\u00edc\u00ed p\u0159\u00edkaz:</p>\r\n<pre class=\"literal-block\"><code>git clone https://github.com/django/django.git</code></pre>\r\n<p>Pokud Git nainstalov\u00e1n nem\u00e1te, s\u00e1hn\u011bte po \r\n<a href=\"https://github.com/django/django/zipball/master\">ZIP arch\u00edvu</a>.</p>\r\n\r\n<h2>Co d\u00e1l?</h2> <p>Chlapci a d\u011bv\u010data, dal\u0161\u00ed informace naleznete v <a\r\nhref=\"/dokumentace/intro/install/\">instala\u010dn\u00edm pr\u016fvodci</a>.</p>\r\n\r\n<p>Nezapome\u0148te se zaregistrovat do <a\r\nhref=\"http://groups.google.com/group/django-users\">diskuzn\u00ed skupiny\r\ndjango-users</a> (a <a\r\nhref=\"http://groups.google.com/group/django-cs\">django-cs</a>!), kde v\u00e1m\r\nostatn\u00ed u\u017eivatel\u00e9 a v\u00fdvoj\u00e1\u0159i Djanga r\u00e1di porad\u00ed.</p>\r\n</div>\r\n\r\n<div id=\"rightSideBar\" class=\"span-7 last\">\r\n<h3>Pro netrp\u011bliv\u00e9:</h3>\r\n<p>St\u00e1hn\u011bte si posledn\u00ed vyd\u00e1n\u00ed:<br /><a\r\nhref=\"http://www.djangoproject.com/download/1.4/tarball/\">Django-1.4.tar.gz</a>.</p>\r\n\r\n<h3>Kter\u00e1 verze je lep\u0161\u00ed?</h3>\r\n<p>V\u00fdvoj\u00e1\u0159sk\u00fd t\u00fdm vylep\u0161uje Django t\u00e9m\u011b\u0159 denn\u011b a intenzivn\u011b p\u0159i tom mysl\u00ed na\r\nstabilitu sv\u00e9ho d\u00edt\u011bte. Jin\u00fdmi slovy, posledn\u00ed v\u00fdvojov\u00e1 verze je\r\nbezpe\u010dnou a snadnou cestou k nejnov\u011bj\u0161\u00edm vlastnostem na\u0161eho\r\nmilovan\u00e9ho Djanga. Pokud si vyberete v\u00fdvojovou verzi, m\u011bjte na pam\u011bti, \u017ee\r\n\u010das od \u010dasu se v n\u00ed objev\u00ed n\u011bjak\u00e9 zp\u011btn\u011b nekompatibiln\u00ed zm\u011bny. Z tohoto\r\nd\u016fvodu je moudr\u00e9 v\u011bnovat pozornost <a\r\nhref=\"http://code.djangoproject.com/timeline\">\u010dasov\u00e9 ose v\u00fdvoje</a>.</p>\r\n\r\n<p>Pokud je pro v\u00e1s stabilita frameworku nejd\u016fle\u017eit\u011bj\u0161\u00edm parametrem,\r\nvyberte si posledn\u00ed ofici\u00e1ln\u00ed vyd\u00e1n\u00ed Djanga (kter\u00e9 mimochodem v\u017edy\r\nobsahuje detailn\u00ed informace o v\u0161ech zm\u011bn\u00e1ch, kter\u00e9 budete muset p\u0159i\r\nupgrade prov\u00e9st).</p>\r\n\r\n<h3>Star\u0161\u00ed vyd\u00e1n\u00ed</h3>\r\n<ul>\r\n    <li>Django 1.3.1: <a href=\"http://www.djangoproject.com/download/1.3.1/tarball/\">Django-1.3.1.tar.gz</a></li>\r\n</ul>\r\n\r\n<h3>Nepodporovan\u00e1 star\u0161\u00ed vyd\u00e1n\u00ed</h3>\r\n<p>(pro tyto verze se ji\u017e nevyd\u00e1v\u00e1j\u00ed bezpe\u010dnostn\u00ed a opravn\u00e9\r\naktualizace)</p>\r\n<ul>\r\n    <li>Django 1.2: <a\r\n    href=\"http://www.djangoproject.com/download/1.2.7/tarball/\">tarball</a></li>\r\n    <li>Django 1.1: <a\r\n    href=\"http://www.djangoproject.com/download/1.1.4/tarball/\">tarball</a></li>\r\n    <li>Django 1.0: <a\r\n    href=\"http://www.djangoproject.com/download/1.0.4/tarball/\">tarball</a></li>\r\n</ul>\r\n</div>\r\n\r\n</div>", 
            "enable_comments": false
        }
    }, 
    {
        "pk": 11, 
        "model": "flatpages.flatpage", 
        "fields": {
            "registration_required": false, 
            "title": "Koment\u00e1\u0159ov\u00e1 pravidla", 
            "url": "/komentarova-pravidla/", 
            "template_name": "", 
            "sites": [
                1
            ], 
            "content": "<div id=\"wrapcontent\" class=\"span-22 last prefix-1 suffix-1\"><div id=\"content\" class=\"span-14 suffix-1\">\r\n\r\n<h1>Koment\u00e1\u0159ov\u00e1 pravidla</h1>\r\n\r\n<p>Publikov\u00e1n\u00edm koment\u00e1\u0159e na tomto webu projevujete souhlas s n\u00e1sleduj\u00edc\u00edmi podm\u00ednkami:</p>\r\n\r\n<ul>\r\n<li>vulg\u00e1rn\u00ed, ur\u00e1\u017eliv\u00e9 a zcestn\u00e9 p\u0159\u00edsp\u011bvky budou smaz\u00e1ny; tot\u00e9\u017e plat\u00ed o SPAMu</li>\r\n<li>pokud bude koment\u00e1\u0159 poukazovat na chybu v obsahu str\u00e1nky, bude provedena oprava, koment\u00e1\u0159 smaz\u00e1n a jeho autor uveden v seznamu korektor\u016f</li>\r\n<li>koment\u00e1\u0159e s dotazy na obecn\u00e9 probl\u00e9my s programovan\u00edm v Djangu, Pythonu, apod. budou smaz\u00e1ny a jejich autor vyzv\u00e1n, aby sv\u016fj dotaz poslal do n\u011bkter\u00e9 z diskuzn\u00edch skupin nebo na IRC kan\u00e1l</li>\r\n</ul>\r\n\r\n</div></div>\r\n", 
            "enable_comments": false
        }
    }, 
    {
        "pk": 14, 
        "model": "flatpages.flatpage", 
        "fields": {
            "registration_required": false, 
            "title": "Komunita", 
            "url": "/komunita/", 
            "template_name": "", 
            "sites": [
                1
            ], 
            "content": "<div id=\"wrapcontent\" class=\"span-22 prefix-1 suffix-1 last\">\r\n<div id=\"content\">\r\n\r\n<h1>Komunita</h1>\r\n\r\n<div class=\"clear span-7 suffix-1\">\r\n<h3>Diskuzn\u00ed skupiny</h3>\r\n<ul>\r\n<li><a\r\nhref=\"http://groups.google.com/group/django-users/\">django-users</a><br\r\n/>Nejlep\u0161\u00ed m\u00edsto, kam poslat sv\u016fj dotaz (v angli\u010dtin\u011b)</li>\r\n<li><a href=\"http://groups.google.com/group/django-cs\">django-cs</a>\r\n<br />Pokud angli\u010dtinu neovl\u00e1d\u00e1te, zkuste tuto diskuzn\u00ed skupinu;\r\npo\u010det \u010dlen\u016f a aktivita je ale v\u00fdrazn\u011b ni\u017e\u0161\u00ed ne\u017e u\r\n\"django-users\"</li>\r\n</ul>\r\n\r\n<h3>IRC</h3>\r\n<ul>\r\n<li><a href=\"irc://irc.freenode.net/django\">#django</a><br />\r\nSv\u016fj dotaz (v angli\u010dtin\u011b) m\u016f\u017eete poslat i na IRC kan\u00e1l, p\u0159\u00edpadn\u011b prohledat <a\r\nhref=\"http://botland.oebfare.com/logger/django/\">jeho arch\u00edv</a></li>\r\n<li><a href=\"irc://irc.freenode.net/django-cs\">#django-cs</a><br />\r\nMladi\u010dk\u00fd IRC kan\u00e1l, na kter\u00e9m m\u016f\u017eete naj\u00edt pomoc v \u010de\u0161tin\u011b (<a href=\"http://botland.oebfare.com/logger/django-cs/\">z\u00e1znam star\u0161\u00edch zpr\u00e1v</a>)</li>\r\n</ul>\r\n\r\n\r\n\r\n<h4 class=\"thin\">Co se na IRC \u0159e\u0161ilo naposledy?</h4>\r\n\r\n<!-- INC:irc -->\r\n\r\n<p><a href=\"http://botland.oebfare.com/logger/django-cs/\">Zobrazit \u00fapln\u00fd v\u00fdpis</a></p>\r\n</div>\r\n\r\n\r\n<div class=\"span-5 suffix-1\">\r\n<h3>V\u00fdvoj\u00e1\u0159i v \u010cesku</h3>\r\n<p>Seznam \u010desk\u00fdch Django v\u00fdvoj\u00e1\u0159\u016f (\u0159azeno abecedn\u011b):</p>\r\n\r\n<!-- INC:djangopeople -->\r\n\r\n<p>Hled\u00e1te dal\u0161\u00ed v\u00fdvoj\u00e1\u0159e? Mrkn\u011bte na web <a href=\"http://djangopeople.net/\">djangopeople.net</a>, kde naleznete spoustu Djangonaut\u016f ze v\u0161ech kout\u016f sv\u011bta.</p>\r\n\r\n</div>\r\n\r\n<div class=\"span-8 last\">\r\n<h3>\"\u010cesk\u00e9\" weby</h3>\r\n<p>Seznam web\u016f, na jejich\u017e realizaci se pod\u00edlel n\u011bkter\u00fd z \u010desk\u00fdch v\u00fdvoj\u00e1\u0159\u016f.</p>\r\n\r\n<!-- INC:djangosites -->\r\n\r\n<p>P\u0159ehled dal\u0161\u00edch projekt\u016f, kter\u00e9 byly zrealizov\u00e1ny s pomoc\u00ed frameworku Django, naleznete v katalogu <a href=\"http://djangosites.org/\">djangosites.org</a>.</p>\r\n</div>\r\n\r\n</div></div>", 
            "enable_comments": false
        }
    }, 
    {
        "pk": 8, 
        "model": "flatpages.flatpage", 
        "fields": {
            "registration_required": true, 
            "title": "Seznam nedod\u011blk\u016f a n\u00e1pad\u016f", 
            "url": "/todo/", 
            "template_name": "", 
            "sites": [
                1
            ], 
            "content": "<div id=\"wrapcontent\" class=\"span-22 prefix-1 suffix-1 last\">\r\n<div id=\"content\">\r\n\r\n<h1>Seznam nedod\u011blk\u016f a n\u00e1pad\u016f</h1>\r\n\r\n<ul>\r\n<li>odkaz do admina ze stranek</li>\r\n<li>nasadit Markdown</li>\r\n<li>vystavit zdrojov\u00fd k\u00f3d n\u011bkam do repozit\u00e1\u0159e</li>\r\n<li>napsat testy</li>\r\n<li>pripominky od Vladi Macka</li>\r\n<li>nainstalovat na kajku sphinx (abych mohl delat snadneji upravy)</li>\r\n<li>napsat do managera pro translation model metodu, ktera opravi cesty source_path (pri kopii z kajky na lokal se kajciny cesty uchovaji a pak mi to tu nejede); podobne plati i pro cesty na obrazky z tutorialu 2</li>\r\n</ul>\r\n\r\n<h2>Inspirace v zahranici</h2>\r\n\r\n<div class=\"span-6 suffix-1\">\r\n<h3><a href=\"http://www.djangobrasil.org/\">Django Brasil</a></h3>\r\n<ul>\r\n<li>pripadove studie</li>\r\n<li>cookbook ve wiki djangoproject.com</li>\r\n<li>pokec o dockach</li>\r\n<li>zdrojak maji na google code</li>\r\n<li>rss ctecka (dala by se pouzit)</li>\r\n<li>blog</li>\r\n<li>kontakt</li>\r\n</ul>\r\n</div>\r\n\r\n<div class=\"span-6 suffix-1\">\r\n<h3><a href=\"http://www.django.pl/\">Django.pl</a></h3>\r\n<ul>\r\n<li><a href=\"http://djangopl.uservoice.com/pages/general?referer_type=popin\">feedback</a></li>\r\n</ul>\r\n</div>\r\n\r\n<div class=\"span-6 suffix-1 last\">\r\n<h3><a href=\"http://www.django-de.org/\">Django-de.org</a></h3>\r\n<ul>\r\n<li>vyzva ke spolupraci na zvlastni strance</li>\r\n<li>zpravy taguji, maji v jejich prehledu jejich seznam; po rozkliknuti tagu nabizi souvisejici tagy</li>\r\n<li>stranka s komunitou; seznam lidi, a jejich zapisy z blogu</li>\r\n<li>inzeraty s nabidkou prace</li>\r\n<li>trac</li>\r\n</ul>\r\n</div>\r\n\r\n\r\n</div></div>", 
            "enable_comments": false
        }
    }
]
